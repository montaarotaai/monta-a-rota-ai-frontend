<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monta a Rota Ai</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#f0f2f5;color:#333;}
.login-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;background:linear-gradient(135deg,#FF6B35 0%,#004E89 100%);}
.login-box{background:white;padding:28px;border-radius:16px;width:100%;max-width:390px;box-shadow:0 8px 30px rgba(0,0,0,.2);}
.tabs{display:flex;margin-bottom:16px;border-radius:8px;overflow:hidden;border:1px solid #eee;}
.tab{flex:1;padding:10px;text-align:center;cursor:pointer;background:#f5f5f5;color:#666;font-size:14px;border:none;}
.tab.active{background:linear-gradient(135deg,#FF6B35,#004E89);color:white;font-weight:600;}
.fg{margin-bottom:11px;}
.fg label{display:block;font-size:11px;font-weight:700;color:#666;margin-bottom:3px;text-transform:uppercase;letter-spacing:.5px;}
.fg input,.fg select,.fg textarea{width:100%;padding:10px 12px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;}
.fg input:focus,.fg select:focus{outline:none;border-color:#FF6B35;}
.g2{display:grid;grid-template-columns:2fr 1fr;gap:8px;}
.g2b{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.g3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;}
.btn{width:100%;padding:12px;border:none;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;}
.btn:hover{opacity:.88;}.btn:disabled{opacity:.5;cursor:not-allowed;}
.btn-primary{background:linear-gradient(135deg,#FF6B35,#004E89);color:white;}
.btn-green{background:#00C9A7;color:white;}
.btn-blue{background:#004E89;color:white;}
.btn-orange{background:#FF6B35;color:white;}
.btn-red{background:#e74c3c;color:white;}
.btn-gray{background:#888;color:white;}
.btn-purple{background:#8e44ad;color:white;}
.user-type{display:flex;gap:10px;margin-bottom:12px;}
.user-type label{flex:1;padding:10px;text-align:center;border:2px solid #e0e0e0;border-radius:10px;cursor:pointer;font-size:13px;}
.user-type input:checked+label{border-color:#FF6B35;background:#fff5f2;color:#FF6B35;font-weight:600;}
.user-type input{display:none;}
.msg-error{background:#ffebee;color:#c62828;padding:9px 12px;border-radius:8px;font-size:13px;margin-bottom:9px;}
.msg-ok{background:#e8f5e9;color:#2e7d32;padding:9px 12px;border-radius:8px;font-size:13px;margin-bottom:9px;}
.msg-warn{background:#fff8e1;color:#e65100;padding:9px 12px;border-radius:8px;font-size:13px;margin-bottom:9px;}
.header{background:linear-gradient(135deg,#FF6B35 0%,#004E89 100%);color:white;padding:18px 16px 14px;text-align:center;position:relative;background-size:cover;background-position:center top;}
.header h1{font-size:19px;font-weight:700;}
.header p{font-size:12px;opacity:.85;margin-top:2px;}
.btn-logout{position:absolute;top:13px;right:13px;background:rgba(255,255,255,.18);color:white;border:none;padding:6px 12px;border-radius:7px;font-size:12px;cursor:pointer;font-weight:600;}
.container{padding:12px;max-width:900px;margin:0 auto;}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:9px;margin-bottom:12px;}
.card{background:white;padding:12px;border-radius:11px;box-shadow:0 1px 6px rgba(0,0,0,.07);cursor:pointer;}
.card h3{font-size:10px;color:#999;font-weight:500;margin-bottom:4px;text-transform:uppercase;}
.card .val{font-size:22px;font-weight:700;color:#FF6B35;}
.menu{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}
.mitem{background:white;padding:18px 10px;border-radius:11px;text-align:center;box-shadow:0 1px 6px rgba(0,0,0,.07);cursor:pointer;transition:transform .15s;}
.mitem:hover{transform:translateY(-2px);}
.mitem .ico{font-size:28px;margin-bottom:6px;}
.mitem h3{font-size:12px;color:#444;font-weight:600;}
.secao{background:white;border-radius:11px;box-shadow:0 1px 6px rgba(0,0,0,.07);padding:13px;margin-bottom:11px;}
.s-title{font-size:13px;font-weight:700;color:#004E89;margin-bottom:9px;}
.badge{display:inline-block;padding:2px 8px;border-radius:20px;font-size:10px;font-weight:700;}
.b-ativo,.b-entregue{background:#e8f5e9;color:#2e7d32;}
.b-bloqueado,.b-cancelado{background:#ffebee;color:#c62828;}
.b-pendente{background:#fff8e1;color:#e65100;}
.b-em_rota,.b-aceito{background:#e3f2fd;color:#1565c0;}
.b-chegou_loja{background:#f3e5f5;color:#6a1b9a;}
.b-saiu_entrega{background:#e0f7fa;color:#00695c;}
.b-online{background:#e8f5e9;color:#2e7d32;}
.b-offline{background:#f5f5f5;color:#777;}
.mapa-box{border-radius:10px;overflow:hidden;position:relative;}
.mapa-ctrl{position:absolute;top:8px;right:8px;z-index:999;display:flex;flex-direction:column;gap:5px;}
.mapa-btn{background:white;border:none;width:34px;height:34px;border-radius:7px;font-size:16px;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;}
.mapa-btn.seguindo{background:#FF6B35;color:white;}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:1000;overflow-y:auto;-webkit-overflow-scrolling:touch;}
.modal.open{display:flex;align-items:flex-start;justify-content:center;padding:8px;}
.modal-box{background:white;border-radius:13px;width:100%;max-width:640px;padding:16px;position:relative;margin:auto;}
.modal-close{position:absolute;top:11px;right:13px;font-size:22px;cursor:pointer;color:#999;background:none;border:none;line-height:1;}
.litem{padding:11px 0;border-bottom:1px solid #f0f0f0;display:flex;gap:9px;align-items:flex-start;}
.litem:last-child{border-bottom:none;}
.btn-sm{color:white;border:none;padding:6px 11px;border-radius:6px;cursor:pointer;font-size:11px;white-space:nowrap;margin:0;width:auto;font-weight:700;}
.btn-sm.green{background:#00C9A7;}.btn-sm.blue{background:#004E89;}.btn-sm.red{background:#e74c3c;}.btn-sm.gray{background:#888;}.btn-sm.orange{background:#FF6B35;}.btn-sm.purple{background:#8e44ad;}
.foto-circle{width:78px;height:78px;border-radius:50%;background:rgba(255,255,255,.25);border:3px dashed rgba(255,255,255,.5);display:flex;align-items:center;justify-content:center;font-size:32px;margin:0 auto 6px;cursor:pointer;}
.foto-img{width:78px;height:78px;border-radius:50%;object-fit:cover;border:3px solid white;margin:0 auto 6px;display:block;cursor:pointer;}
.codigo-box{background:rgba(255,255,255,.15);border-radius:9px;padding:7px 14px;margin-top:7px;display:inline-block;}
.codigo-num{font-size:26px;font-weight:700;letter-spacing:6px;color:white;}
.codigo-label{font-size:10px;opacity:.8;text-align:center;}
.ecard{background:#f8f9fa;border-radius:9px;padding:11px;margin-bottom:7px;border-left:4px solid #FF6B35;}
.ecard.rota{border-left-color:#004E89;background:#f0f4ff;}
.ecard.entregue-card{border-left-color:#00C9A7;opacity:.7;}
.ocr-progress{background:#e3f2fd;border-radius:8px;padding:13px;text-align:center;margin:10px 0;}
.ocr-bar{height:5px;background:#e0e0e0;border-radius:3px;margin-top:7px;overflow:hidden;}
.ocr-fill{height:100%;background:linear-gradient(90deg,#FF6B35,#004E89);border-radius:3px;transition:width .3s;width:0%;}
.hidden{display:none!important;}
.row{display:flex;gap:7px;align-items:center;}
.status-flow{display:flex;gap:4px;margin:8px 0;flex-wrap:wrap;}
.sf-step{flex:1;padding:6px 4px;border-radius:6px;text-align:center;font-size:10px;font-weight:700;border:2px solid #e0e0e0;color:#999;min-width:60px;}
.sf-step.done{background:#e8f5e9;border-color:#00C9A7;color:#2e7d32;}
.sf-step.active{background:#004E89;border-color:#004E89;color:white;}
.sf-step.current{background:#FF6B35;border-color:#FF6B35;color:white;animation:pulse2 1s infinite;}
@keyframes pulse2{0%,100%{opacity:1;}50%{opacity:.7;}}
.gps-banner{background:#ffebee;padding:10px 14px;border-radius:8px;margin-bottom:10px;font-size:13px;color:#c62828;display:flex;align-items:center;gap:8px;}
.entrega-valor{background:#e8f5e9;border-radius:6px;padding:5px 10px;font-size:13px;font-weight:700;color:#2e7d32;display:inline-block;}
.chip{background:#e3f2fd;color:#1565c0;border-radius:20px;padding:3px 10px;font-size:11px;display:inline-flex;align-items:center;gap:4px;margin:2px;}
.chip.green{background:#e8f5e9;color:#2e7d32;}
.notif-dot{width:10px;height:10px;background:#e74c3c;border-radius:50%;display:inline-block;margin-left:5px;animation:pulse2 .8s infinite;}
select.ent-select{width:100%;padding:8px;border:1.5px solid #e0e0e0;border-radius:7px;font-size:13px;margin-top:5px;}
.adm-tabs{display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap;}
.adm-tab{padding:8px 14px;border-radius:8px;border:none;cursor:pointer;font-size:13px;font-weight:600;background:#e0e0e0;color:#555;}
.adm-tab.active{background:#004E89;color:white;}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="pg-login" class="login-wrap">
  <div class="login-box">
    <div style="text-align:center;margin-bottom:18px;">
      <img id="login-logo" src="" alt="Monta a Rota Ai" style="width:130px;height:130px;object-fit:contain;margin:0 auto;display:block;">
    </div>
    <div class="tabs">
      <button class="tab active" onclick="switchTab('login',this)">Entrar</button>
      <button class="tab" onclick="switchTab('register',this)">Cadastrar</button>
    </div>
    <div id="login-tab">
      <div id="login-msg"></div>
      <div class="fg"><label>Email</label><input type="email" id="l-email" placeholder="seu@email.com" autocomplete="email"></div>
      <div class="fg"><label>Senha</label><input type="password" id="l-senha" placeholder="..." autocomplete="current-password"></div>
      <button class="btn btn-primary" onclick="fazerLogin()" id="btn-login">Entrar</button>
    </div>
    <div id="register-tab" class="hidden">
      <div id="reg-msg"></div>
      <div class="user-type">
        <label><input type="radio" name="rtype" value="loja" checked onchange="toggleCad()"><span>&#127978; Loja</span></label>
        <label><input type="radio" name="rtype" value="entregador" onchange="toggleCad()"><span>&#128757; Entregador</span></label>
      </div>
      <div class="fg"><label>Nome (CAIXA ALTA autom√°tico)</label><input type="text" id="r-nome" oninput="this.value=this.value.toUpperCase()"></div>
      <div class="fg">
        <label>Login (usu√°rio do sistema)</label>
        <div style="display:flex;align-items:center;gap:0;">
          <input type="text" id="r-email-user" placeholder="seunome" oninput="this.value=this.value.toLowerCase().replace(/[^a-z0-9._-]/g,'')"
            style="flex:1;padding:10px 12px;border:1.5px solid #e0e0e0;border-radius:8px 0 0 8px;font-size:14px;border-right:none;">
          <span style="background:#f5f5f5;border:1.5px solid #e0e0e0;border-left:none;padding:10px 10px;border-radius:0 8px 8px 0;font-size:13px;color:#666;white-space:nowrap;">@montarotaai.com</span>
        </div>
        <input type="hidden" id="r-email">
      </div>
      <div class="fg"><label>Telefone</label><input type="tel" id="r-tel" placeholder="(16) 99999-9999"></div>
      <div class="fg"><label>Senha</label><input type="password" id="r-senha" placeholder="Minimo 6 caracteres"></div>
      <div id="c-loja">
        <div class="fg"><label>Nome da Loja (CAIXA ALTA autom√°tico)</label><input type="text" id="r-nloja" oninput="this.value=this.value.toUpperCase()"></div>
        <div class="fg"><label>CNPJ</label><input type="text" id="r-cnpj" placeholder="00.000.000/0000-00"></div>
        <div class="g2"><div class="fg"><label>Rua</label><input type="text" id="r-rua"></div><div class="fg"><label>Numero</label><input type="text" id="r-num"></div></div>
        <div class="g2b"><div class="fg"><label>Bairro</label><input type="text" id="r-bairro"></div><div class="fg"><label>Cidade</label><input type="text" id="r-cidade" value="Ribeirao Preto"></div></div>
      </div>
      <div id="c-ent" class="hidden">
        <div class="fg"><label>Placa</label><input type="text" id="r-placa" placeholder="ABC-1234"></div>
        <div class="fg"><label>Chave Pix</label><input type="text" id="r-pix"></div>
      </div>
      <button class="btn btn-primary" onclick="fazerCadastro()" id="btn-cad">Cadastrar</button>
    </div>
  </div>
</div>

<!-- ADMIN -->
<div id="pg-admin" class="hidden">
  <div class="header" id="adm-header" style="padding:0;overflow:hidden;">
    <!-- Imagem de fundo de fora a fora -->
    <div style="position:relative;width:100%;min-height:140px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:14px 16px 12px;">
      <div style="position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,0) 40%,rgba(0,40,80,0.55) 100%);pointer-events:none;"></div>
      <button class="btn-logout" onclick="sair()" style="position:absolute;top:13px;right:13px;z-index:2;">Sair</button>
      <button onclick="abrirCfgAdm()" style="position:absolute;top:13px;left:13px;background:rgba(255,255,255,.18);color:white;border:none;padding:6px 12px;border-radius:7px;font-size:12px;cursor:pointer;font-weight:600;z-index:2;">‚öôÔ∏è Config</button>
      <!-- Foto de perfil -->
      <div style="position:relative;z-index:2;text-align:center;">
        <div id="adm-foto-ph" class="foto-circle" onclick="$('adm-input-foto').click()" title="Trocar foto" style="margin:0 auto 4px;">&#128100;</div>
        <img id="adm-foto-img" class="foto-img hidden" src="" alt="" onclick="$('adm-input-foto').click()" title="Trocar foto" style="cursor:pointer;margin:0 auto 4px;display:block;">
        <input type="file" id="adm-input-foto" accept="image/*" class="hidden" onchange="uploadFotoAdm(event)">
        <p style="font-size:12px;color:white;opacity:.9;text-shadow:0 1px 4px rgba(0,0,0,.7);">Painel Administrativo</p>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="adm-tabs">
      <button class="adm-tab active" onclick="admTab('painel',this)">&#127968; Painel</button>
      <button class="adm-tab" onclick="admTab('lojas',this)">&#127978; Lojas</button>
      <button class="adm-tab" onclick="admTab('entregadores',this)">&#128757; Entregadores</button>
      <button class="adm-tab" onclick="admTab('financeiro',this)">&#128176; Financeiro</button>
      <button class="adm-tab" onclick="admTab('impersonar',this)">&#128065; Ver Painel</button>
    </div>
    <!-- Painel -->
    <div id="adm-painel">
      <div class="cards">
        <div class="card"><h3>Entregadores</h3><div class="val" id="adm-cnt-ent">0</div></div>
        <div class="card"><h3>Lojas</h3><div class="val" id="adm-cnt-loj">0</div></div>
        <div class="card"><h3>Online</h3><div class="val" id="adm-cnt-on">0</div></div>
        <div class="card"><h3>Em Rota</h3><div class="val" id="adm-cnt-rota">0</div></div>
      </div>
      <div class="secao">
        <div class="s-title">&#128205; Mapa Geral ‚Äî Entregadores Online</div>
        <div class="mapa-box">
          <div id="mapa-admin" style="height:280px;"></div>
          <div class="mapa-ctrl">
            <button class="mapa-btn" id="btn-fol-adm" onclick="toggleFollowEnt('admin')" title="Seguir entregador">&#128757;</button>
          </div>
        </div>
        <div id="lista-on-adm" style="margin-top:8px;display:flex;flex-wrap:wrap;gap:5px;"></div>
      </div>
      <!-- GPS Validacao - controle global do admin -->
      <div class="secao" id="adm-gps-toggle-box" style="display:flex;align-items:center;justify-content:space-between;padding:12px 14px;background:#fff3e0;border:1.5px solid #ffcc80;">
        <div>
          <div style="font-size:13px;font-weight:700;color:#e65100;">üìç Validacao de GPS (Global)</div>
          <div style="font-size:11px;color:#888;" id="adm-gps-toggle-desc">Entregadores confirmam sem validacao (modo livre)</div>
        </div>
        <div id="adm-gps-toggle-sw" onclick="admToggleGpsGlobal()" style="cursor:pointer;width:50px;height:26px;border-radius:13px;background:#ccc;position:relative;transition:background .3s;flex-shrink:0;">
          <div id="adm-gps-toggle-knob" style="position:absolute;top:3px;left:3px;width:20px;height:20px;border-radius:50%;background:white;transition:left .3s;box-shadow:0 1px 3px rgba(0,0,0,.3);"></div>
        </div>
      </div>

      <div class="secao">
        <div class="s-title">&#128230; Entregas em Tempo Real</div>
        <div id="adm-entregas-realtime"></div>
      </div>
    </div>
    <!-- Lojas -->
    <div id="adm-lojas" class="hidden">
      <div id="adm-loj-lst"></div>
    </div>
    <!-- Entregadores -->
    <div id="adm-entregadores" class="hidden">
      <div id="adm-ent-lst"></div>
    </div>
    <!-- Financeiro -->
    <div id="adm-financeiro" class="hidden">
      <div class="secao">
        <div class="s-title">üìä Relat√≥rio Financeiro ‚Äî Admin</div>
        <div class="g2b" style="gap:8px;margin-bottom:8px;">
          <select id="adm-fin-per" onchange="carregarFinAdm()" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:13px;">
            <option value="hoje">Hoje</option>
            <option value="semana" selected>Esta semana (Seg-Dom)</option>
            <option value="mes">Este m√™s</option>
            <option value="semana_passada">Semana passada</option>
            <option value="mes_passado">M√™s passado</option>
          </select>
          <select id="adm-fin-loja" onchange="carregarFinAdm()" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:13px;">
            <option value="">Todas as lojas</option>
          </select>
        </div>
        <button onclick="carregarFinAdm()" class="btn btn-blue" style="margin-bottom:4px;">üîÑ Atualizar</button>
      </div>
      <div id="adm-fin-dados"></div>
    </div>
    <!-- Impersonar -->
    <div id="adm-impersonar" class="hidden">
      <div class="secao">
        <div class="s-title">Ver como Loja</div>
        <select id="adm-sel-loja" onchange="admVerLoja()" style="width:100%;padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;margin-bottom:8px;">
          <option value="">Selecione uma loja...</option>
        </select>
        <div id="adm-loja-view"></div>
      </div>
      <div class="secao">
        <div class="s-title">Ver como Entregador</div>
        <select id="adm-sel-ent" onchange="admVerEnt()" style="width:100%;padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;margin-bottom:8px;">
          <option value="">Selecione um entregador...</option>
        </select>
        <div id="adm-ent-view"></div>
      </div>
    </div>
  </div>
</div>

<!-- LOJA -->
<div id="pg-loja" class="hidden">
  <div class="header" style="padding:0;overflow:hidden;">
    <div style="position:relative;width:100%;min-height:150px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:16px 16px 14px;">
      <div style="position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,0) 30%,rgba(0,20,60,0.65) 100%);pointer-events:none;"></div>
      <button class="btn-logout" onclick="sair()" style="position:absolute;top:13px;right:13px;z-index:2;">Sair</button>
      <div style="position:relative;z-index:2;text-align:center;width:100%;">
        <h1 id="loja-nome" style="font-size:22px;font-weight:900;color:#FFD700;text-shadow:0 2px 8px rgba(0,0,0,.8),0 0 20px rgba(255,215,0,.4);letter-spacing:1px;margin-bottom:6px;">Minha Loja</h1>
        <div class="codigo-box" style="background:rgba(0,0,0,0.35);backdrop-filter:blur(4px);">
          <div class="codigo-label" style="color:rgba(255,255,255,.8);">Codigo para Entregadores</div>
          <div class="codigo-num" id="loja-cod">------</div>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="cards">
      <div class="card"><h3>Taxa Sistema</h3><div class="val" id="lj-ts">-</div></div>
      <div class="card"><h3>Hoje</h3><div class="val" id="lj-hj">0</div></div>
      <div class="card"><h3>Online</h3><div class="val" id="lj-online-cnt">0</div></div>
    </div>
    <!-- Taxa config -->
    <div class="secao">
      <div class="s-title">&#128176; Configuracao de Taxa ao Entregador</div>
      <div class="fg">
        <label>Tipo de taxa</label>
        <select id="lj-taxa-tipo" onchange="toggleTaxaTipo()">
          <option value="fixo">Valor fixo (mesmo valor para qualquer distancia)</option>
          <option value="por_km">Por distancia (ate X km fixo, acima diferente)</option>
          <option value="fixo_mais_km">Fixo base + valor por entrega (ate X km) + acima diferente</option>
        </select>
      </div>
      <div id="taxa-fixo-area">
        <div class="fg"><label>Valor fixo por entrega (R$)</label>
          <div class="row"><input type="number" id="lj-taxa-new" step="0.50" min="0" placeholder="0.00" style="flex:1;padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;">
          <button class="btn-sm blue" onclick="salvarTaxaLj()">Salvar</button></div>
        </div>
      </div>
      <div id="taxa-km-area" class="hidden">
        <div class="g3">
          <div class="fg"><label>Valor ate X km</label><input type="number" id="lj-taxa-base" step="0.50" min="0" placeholder="8.00" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;width:100%;"></div>
          <div class="fg"><label>Limite (km)</label><input type="number" id="lj-km-limite" step="0.5" min="1" placeholder="5" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;width:100%;"></div>
          <div class="fg"><label>Acima do limite</label><input type="number" id="lj-taxa-km-exc" step="0.50" min="0" placeholder="12.00" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;width:100%;"></div>
        </div>
        <button class="btn btn-blue" onclick="salvarTaxaLj()" style="margin-top:4px;">Salvar Configuracao de Taxa</button>
      </div>
      <!-- Novo tipo: fixo base + por km -->
      <div id="taxa-fixo-km-area" class="hidden">
        <p style="font-size:11px;color:#888;margin-bottom:8px;">Ex: R$5 fixo + R$8 por entrega ate 7km, acima R$10</p>
        <div class="g2b">
          <div class="fg"><label>Fixo mensal/semanal (R$)</label><input type="number" id="lj-taxa-fixo-base" step="0.50" min="0" placeholder="0.00" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;width:100%;"></div>
          <div class="fg"><label>Por entrega ate X km</label><input type="number" id="lj-taxa-por-ent" step="0.50" min="0" placeholder="8.00" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;width:100%;"></div>
        </div>
        <div class="g2b">
          <div class="fg"><label>Limite (km)</label><input type="number" id="lj-km-limite2" step="0.5" min="1" placeholder="7" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;width:100%;"></div>
          <div class="fg"><label>Acima do limite</label><input type="number" id="lj-taxa-km-exc2" step="0.50" min="0" placeholder="10.00" style="padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:14px;width:100%;"></div>
        </div>
        <button class="btn btn-blue" onclick="salvarTaxaLj()" style="margin-top:4px;">Salvar Configuracao de Taxa</button>
      </div>
      <div id="taxa-msg" style="font-size:12px;margin-top:5px;"></div>
    </div>
    <!-- Mapa -->
    <div class="secao">
      <div class="s-title">&#128205; Entregadores Online</div>
      <div class="mapa-box">
        <div id="mapa-loja" style="height:230px;"></div>
        <div class="mapa-ctrl">
          <button class="mapa-btn" id="btn-fol-lj" onclick="toggleFollowEnt('loja')" title="Seguir entregador automaticamente">&#128757;</button>
        </div>
      </div>
      <div id="lista-on-lj" style="margin-top:7px;display:flex;flex-wrap:wrap;gap:5px;"></div>
    </div>
    <div class="menu">
      <div class="mitem" onclick="abrirNovoPedido()"><div class="ico">&#128247;</div><h3>Novo Pedido</h3></div>
      <div class="mitem" onclick="abrirPedidosLj()"><div class="ico">&#128230;</div><h3>Pedidos / Rota</h3></div>
      <div class="mitem" onclick="abrirRelLj()"><div class="ico">&#128202;</div><h3>Relatorio</h3></div>
      <div class="mitem" onclick="abrirGerEnt()"><div class="ico">&#128101;</div><h3>Entregadores</h3></div>
      <div class="mitem" onclick="abrirCfgLj()" style="grid-column:1/-1;max-width:170px;margin:0 auto;"><div class="ico">&#9881;</div><h3>Configuracoes</h3></div>
    </div>
  </div>
</div>

<!-- ENTREGADOR -->
<div id="pg-entregador" class="hidden">
  <div class="header" style="cursor:pointer;padding:0;overflow:hidden;" onclick="abrirFoto()">
    <div style="position:relative;width:100%;min-height:150px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:14px 16px 12px;">
      <div style="position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,0) 30%,rgba(0,20,60,0.65) 100%);pointer-events:none;"></div>
      <button class="btn-logout" onclick="event.stopPropagation();sair()" style="position:absolute;top:13px;right:13px;z-index:2;">Sair</button>
      <div style="position:relative;z-index:2;text-align:center;">
        <div id="foto-ph" class="foto-circle" style="margin:0 auto 4px;">&#128100;</div>
        <img id="foto-img" class="foto-img hidden" src="" alt="" style="margin:0 auto 4px;display:block;">
        <h1 id="ent-nome" style="font-size:18px;font-weight:800;color:#FFD700;text-shadow:0 2px 8px rgba(0,0,0,.8);margin-bottom:2px;">Entregador</h1>
        <p id="ent-st" style="font-size:12px;opacity:.9;color:white;text-shadow:0 1px 4px rgba(0,0,0,.7);">&#9899; Offline</p>
      </div>
    </div>
    <input type="file" id="input-foto" accept="image/*" class="hidden" onchange="uploadFoto(event)">
  </div>
  <div class="container">
    <!-- Banner GPS: s√≥ aparece aqui dentro, s√≥ para entregador -->
    <div id="gps-banner" class="hidden" style="background:#e65100;color:white;padding:9px 14px;border-radius:9px;margin-bottom:10px;font-size:12px;display:flex;align-items:center;gap:8px;flex-wrap:wrap;">
      <span style="flex:1;">üìç Localiza√ß√£o desligada. Ative o GPS do aparelho para rastrear sua posi√ß√£o.</span>
      <button onclick="pedirGPS()" style="background:white;color:#e65100;border:none;padding:5px 11px;border-radius:6px;font-weight:700;cursor:pointer;font-size:11px;">Ativar</button>
      <button onclick="$('gps-banner').classList.add('hidden')" style="background:transparent;color:white;border:none;font-size:18px;cursor:pointer;line-height:1;">&times;</button>
    </div>
    <!-- Aviso background GPS -->
    <div id="gps-bg-aviso" class="hidden" style="background:#fff3e0;border:1.5px solid #FF6B35;border-radius:9px;padding:9px 13px;margin-bottom:10px;font-size:11px;color:#e65100;">
      üì± <strong>GPS em background:</strong> Mantenha a tela do app vis√≠vel ou a tela do celular ligada enquanto estiver em rota. Se fechar o app, a localiza√ß√£o pode n√£o atualizar.
      <button onclick="$('gps-bg-aviso').classList.add('hidden')" style="float:right;background:none;border:none;font-size:16px;cursor:pointer;color:#e65100;line-height:1;">&times;</button>
    </div>
    <div id="gps-debug" style="font-size:10px;color:#888;text-align:center;margin-bottom:4px;"></div>
    <div id="ent-pedido-alerta" class="hidden" style="background:#FF6B35;color:white;padding:12px;border-radius:10px;margin-bottom:10px;text-align:center;font-weight:700;font-size:14px;cursor:pointer;" onclick="abrirRotaEnt()">
      &#128226; PEDIDO PRONTO NA LOJA! Toque para ver
    </div>
    <div class="cards">
      <div class="card"><h3>Entregas Hoje</h3><div class="val" id="ent-cnt">0</div></div>
      <div class="card"><h3>Ganhos Hoje</h3><div class="val" id="ent-gnh" style="font-size:16px;">R$0</div></div>
    </div>
    <!-- Loja ativa -->
    <div class="secao">
      <div class="s-title">&#127978; Loja Ativa</div>
      <div id="ent-loja-ativa-info" style="margin-bottom:8px;"></div>
      <div id="ent-selecionar-loja-box" class="hidden">
        <p style="font-size:12px;color:#666;margin-bottom:6px;">Selecione com qual loja vai trabalhar hoje:</p>
        <select id="ent-sel-loja-ativa" style="width:100%;padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;"></select>
        <button class="btn btn-green" onclick="confirmarLojaAtiva()" style="margin-top:7px;">Confirmar e Ficar Online</button>
      </div>
      <div id="ent-conectar-box">
        <p style="font-size:11px;color:#888;margin-bottom:8px;">Adicionar outra loja:</p>
        <div style="display:flex;gap:7px;align-items:stretch;">
          <input type="text" id="cod-loja-inp" placeholder="Codigo da loja" maxlength="6"
            style="flex:1;padding:10px 12px;border:1.5px solid #e0e0e0;border-radius:8px;font-size:18px;text-transform:uppercase;letter-spacing:5px;text-align:center;font-weight:700;">
          <button onclick="conectarCodigo()" style="background:linear-gradient(135deg,#FF6B35,#e65100);color:white;border:none;padding:10px 16px;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;white-space:nowrap;">&#128273; Conectar</button>
        </div>
        <div id="msg-cod" style="font-size:12px;margin-top:5px;"></div>
      </div>
    </div>
    <div class="menu">
      <div class="mitem" id="btn-on-card" onclick="toggleOnline()">
        <div class="ico" id="ico-on">&#128994;</div>
        <h3 id="txt-on">Ficar Online</h3>
      </div>
      <div class="mitem" onclick="abrirRotaEnt()"><div class="ico">&#127758;</div><h3>Minha Rota <span id="rota-notif" class="hidden notif-dot"></span></h3></div>
      <div class="mitem" onclick="abrirGanhosEnt()"><div class="ico">&#128181;</div><h3>Meus Ganhos</h3></div>
      <div class="mitem" onclick="abrirCfgEnt()"><div class="ico">&#9881;</div><h3>Configuracoes</h3></div>
    </div>
  </div>
</div>

<!-- MODAIS -->
<!-- Novo Pedido -->
<div id="m-pedido" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('pedido')">&times;</button>
  <h2 style="margin-bottom:4px;">&#128247; Novo Pedido</h2>
  <p style="font-size:12px;color:#888;margin-bottom:12px;">Fotografe a comanda para leitura automatica ou preencha manualmente</p>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:11px;">
    <div onclick="abrirCamera()" style="background:linear-gradient(135deg,#FF6B35,#004E89);border-radius:11px;padding:16px;text-align:center;cursor:pointer;color:white;">
      <div style="font-size:28px;margin-bottom:4px;">&#128247;</div>
      <div style="font-weight:700;font-size:13px;">Tirar Foto</div>
      <div style="font-size:10px;opacity:.8;">Abrir camera</div>
    </div>
    <div onclick="abrirGaleria()" style="background:linear-gradient(135deg,#004E89,#1a237e);border-radius:11px;padding:16px;text-align:center;cursor:pointer;color:white;">
      <div style="font-size:28px;margin-bottom:4px;">&#128444;</div>
      <div style="font-weight:700;font-size:13px;">Da Galeria</div>
      <div style="font-size:10px;opacity:.8;">Escolher foto</div>
    </div>
  </div>
  <input type="file" id="ocr-camera" accept="image/*" capture="environment" class="hidden" onchange="lerComanda(event)">
  <input type="file" id="ocr-galeria" accept="image/*" class="hidden" onchange="lerComanda(event)">
  <div id="ocr-prev" class="hidden" style="margin-bottom:11px;text-align:center;">
    <img id="ocr-img" style="max-width:100%;max-height:160px;border-radius:8px;border:1px solid #eee;">
    <div style="margin-top:5px;display:flex;gap:6px;justify-content:center;">
      <button onclick="abrirCamera()" class="btn-sm orange">&#128247; Camera</button>
      <button onclick="abrirGaleria()" class="btn-sm blue">&#128444; Galeria</button>
    </div>
  </div>
  <div id="ocr-load" class="hidden" style="background:#e3f2fd;border-radius:10px;padding:14px;text-align:center;margin-bottom:11px;">
    <div style="font-size:22px;margin-bottom:5px;">&#129302;</div>
    <div style="font-weight:700;font-size:13px;color:#004E89;">Lendo comanda com IA...</div>
    <div style="font-size:11px;color:#666;margin-top:3px;">Aguarde alguns segundos</div>
  </div>
  <div class="fg"><label>Numero do Pedido / Codigo Ifood</label><input type="text" id="p-num" placeholder="Ex: 4321 ou #IFD-ABC123"></div>
  <div class="fg"><label>Nome do Cliente</label><input type="text" id="p-cli"></div>
  <div class="fg"><label>Telefone</label><input type="tel" id="p-tel"></div>
  <div class="g2"><div class="fg"><label>Rua / Avenida</label><input type="text" id="p-rua" oninput="atualizarValorCorrida()"></div><div class="fg"><label>Numero</label><input type="text" id="p-nend" oninput="atualizarValorCorrida()"></div></div>
  <div class="g2b"><div class="fg"><label>Bairro</label><input type="text" id="p-bairro" oninput="atualizarValorCorrida()"></div><div class="fg"><label>Cidade</label><input type="text" id="p-cidade" value="Ribeirao Preto"></div></div>
  <div class="fg"><label>Complemento</label><input type="text" id="p-comp" placeholder="Ex: Apto 12 Torre 2"></div>
  <div class="fg"><label>Observacoes</label><input type="text" id="p-obs"></div>
  <div id="p-codconf-area" class="hidden" style="margin-bottom:11px;background:#f3e5f5;border-radius:8px;padding:10px;">
    <label style="font-size:11px;font-weight:700;color:#6a1b9a;text-transform:uppercase;letter-spacing:.5px;">&#128273; Codigo iFood detectado</label>
    <input type="text" id="p-cod-conf" placeholder="" style="width:100%;margin-top:5px;padding:9px;border:1.5px solid #ce93d8;border-radius:8px;font-size:16px;letter-spacing:4px;font-weight:700;color:#6a1b9a;">
    <p style="font-size:10px;color:#888;margin-top:3px;">Este codigo sera exibido ao entregador para confirmacao.</p>
  </div>
  <div id="p-valor-corrida" class="hidden" style="margin:10px 0;padding:10px;background:#e8f5e9;border-radius:8px;text-align:center;">
    <p style="font-size:11px;color:#666;">Valor estimado da corrida</p>
    <p id="p-valor-txt" style="font-size:22px;font-weight:700;color:#2e7d32;"></p>
    <p id="p-dist-txt" style="font-size:11px;color:#888;"></p>
  </div>
  <div id="ped-msg" style="margin-top:5px;"></div>
  <button class="btn btn-green" onclick="salvarPedido()" style="margin-top:9px;">&#10004; Salvar e Adicionar a Rota</button>
</div></div>

<!-- Pedidos/Rota Loja -->
<!-- Modal Plano de Rota -->
<!-- Modal: Definir Quantidade por Entregador -->
<div id="m-qtd-ent" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('qtd-ent')">&times;</button>
  <h2 style="margin-bottom:4px;">üî¢ Distribui√ß√£o de Pedidos</h2>
  <p style="font-size:12px;color:#888;margin-bottom:4px;">Defina o m√°ximo de pedidos por entregador. A IA distribui automaticamente.</p>
  <p style="font-size:11px;color:#e65100;margin-bottom:12px;">A IA agrupa pedidos no mesmo sentido/bairro, com o mais perto da loja primeiro.</p>

  <!-- Limite global por entregador -->
  <div style="background:#f0f4ff;border:2px solid #004E89;border-radius:11px;padding:14px;margin-bottom:14px;text-align:center;">
    <p style="font-size:11px;font-weight:700;color:#004E89;text-transform:uppercase;letter-spacing:.5px;margin-bottom:10px;">üì¶ M√°ximo de pedidos por entregador</p>
    <div style="display:flex;align-items:center;justify-content:center;gap:14px;">
      <button onclick="ajustarLimiteGlobal(-1)" style="width:40px;height:40px;border-radius:50%;border:2px solid #e0e0e0;background:white;font-size:24px;font-weight:700;cursor:pointer;line-height:1;">‚àí</button>
      <div id="qtd-limite-val" style="min-width:50px;text-align:center;font-size:36px;font-weight:800;color:#004E89;">4</div>
      <button onclick="ajustarLimiteGlobal(1)" style="width:40px;height:40px;border-radius:50%;border:2px solid #004E89;background:#004E89;color:white;font-size:24px;font-weight:700;cursor:pointer;line-height:1;">+</button>
    </div>
    <p style="font-size:10px;color:#888;margin-top:6px;">Salvo automaticamente para pr√≥ximas vezes ‚Ä¢ m√°x. 10</p>
  </div>

  <!-- Lista de entregadores dispon√≠veis -->
  <div id="qtd-ent-body">
    <p style="text-align:center;color:#888;">Carregando entregadores...</p>
  </div>
  <div id="qtd-total-info" style="background:#e3f2fd;border-radius:8px;padding:10px;margin:10px 0;font-size:13px;text-align:center;"></div>
  <div id="qtd-msg" style="margin-bottom:8px;"></div>
  <button class="btn btn-primary" onclick="gerarRotaComIA()" id="btn-gerar-rota">ü§ñ Gerar Rota com IA</button>
</div></div>

<div id="m-rota-plano" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('rota-plano')">&times;</button>
  <h2 style="margin-bottom:4px;">üó∫Ô∏è Plano de Rota</h2>
  <p style="font-size:12px;color:#888;margin-bottom:12px;">Revise as rotas geradas pela IA e confirme</p>
  <div id="rota-plano-body"></div>
  <div style="margin-top:12px;display:flex;gap:8px;">
    <button class="btn btn-secondary" onclick="closeM('rota-plano');openM('qtd-ent')" style="flex:1;background:#f5f5f5;color:#555;border:none;padding:11px;border-radius:9px;font-weight:700;cursor:pointer;">‚Üê Voltar</button>
    <button class="btn btn-primary" onclick="confirmarRotaPlano()" id="btn-confirmar-rota" style="flex:2;">‚úÖ Confirmar e Despachar</button>
  </div>
</div></div>

<div id="m-rota" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('rota')">&times;</button>
  <h2 style="margin-bottom:9px;">&#128230; Pedidos e Rota</h2>
  <div class="row" style="margin-bottom:11px;flex-wrap:wrap;gap:6px;">
    <button class="btn-sm blue" onclick="abrirDefinirQuantidade()" style="padding:8px 13px;background:#004E89;">üî¢ Definir Qtd / Rota IA</button>
    <button class="btn-sm blue" onclick="otimizarRotaInteligente()" style="padding:8px 13px;">ü§ñ Otimizar Auto</button>
    <button class="btn-sm orange" onclick="avisarPedidoPronto()" style="padding:8px 13px;">üì¢ Pedido Pronto</button>
  </div>
  <div id="rota-lst"></div>
</div></div>

<!-- Relatorio Loja -->
<div id="m-rel" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('rel')">&times;</button>
  <h2 style="margin-bottom:9px;">&#128202; Relatorio Financeiro</h2>
  <select id="rel-f" onchange="carregarRel()" style="width:100%;padding:9px;border:1.5px solid #e0e0e0;border-radius:8px;margin-bottom:11px;">
    <option value="hoje">Hoje</option>
    <option value="semana" selected>Esta semana (Seg-Dom)</option>
    <option value="semana_passada">Semana passada</option>
    <option value="mes">Este m√™s</option>
    <option value="mes_passado">M√™s passado</option>
  </select>
  <div id="rel-dados"></div>
</div></div>

<!-- Gerenciar Entregadores Loja -->
<div id="m-ger" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('ger')">&times;</button>
  <h2 style="margin-bottom:9px;">&#128101; Meus Entregadores</h2>
  <div class="secao" style="background:#fff3e0;">
    <div class="s-title" style="color:#e65100;">Codigo da Loja</div>
    <p style="font-size:12px;color:#666;margin-bottom:7px;">O entregador digita este codigo para se vincular a esta loja:</p>
    <div style="font-size:30px;text-align:center;letter-spacing:7px;font-weight:700;color:#004E89;" id="ger-cod">------</div>
  </div>
  <div id="ger-lst" style="margin-top:9px;"></div>
</div></div>

<!-- Config Loja -->
<div id="m-cfg-lj" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('cfg-lj')">&times;</button>
  <h2 style="margin-bottom:13px;">&#9881; Configuracoes da Loja</h2>
  <!-- Logo upload -->
  <div style="text-align:center;margin-bottom:14px;">
    <div id="cfg-logo-prev" style="margin-bottom:8px;"></div>
    <div onclick="document.getElementById('cfg-logo-input').click()" style="display:inline-block;background:#f0f4ff;border:2px dashed #004E89;border-radius:10px;padding:10px 20px;cursor:pointer;font-size:12px;color:#004E89;font-weight:700;">
      &#128444; Trocar Logo da Loja
    </div>
    <input type="file" id="cfg-logo-input" accept="image/*" class="hidden" onchange="uploadLogoLoja(event)">
    <p style="font-size:10px;color:#999;margin-top:4px;">Aparece no topo do app. Recomendado: fundo transparente, 200x80px</p>
  </div>
  <div class="fg"><label>Nome da Loja</label><input type="text" id="cfg-nlj"></div>
  <div class="fg"><label>Telefone</label><input type="tel" id="cfg-tel"></div>
  <div class="fg"><label>CNPJ</label><input type="text" id="cfg-cnpj"></div>
  <div class="g2"><div class="fg"><label>Rua</label><input type="text" id="cfg-rua"></div><div class="fg"><label>Numero</label><input type="text" id="cfg-nend"></div></div>
  <div class="g2b"><div class="fg"><label>Bairro</label><input type="text" id="cfg-bairro"></div><div class="fg"><label>Cidade</label><input type="text" id="cfg-cidade"></div></div>
  <div class="fg"><label>Complemento</label><input type="text" id="cfg-comp"></div>
  <div class="g2b"><div class="fg"><label>Abertura</label><input type="time" id="cfg-ab"></div><div class="fg"><label>Fechamento</label><input type="time" id="cfg-fch"></div></div>
  <div class="fg"><label>Nova Senha (em branco = nao alterar)</label><input type="password" id="cfg-senha"></div>
  <div id="cfg-lj-msg"></div>
  <button class="btn btn-primary" onclick="salvarCfgLj()">Salvar</button>
</div></div>

<!-- Ganhos Entregador -->
<div id="m-ganhos" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('ganhos')">&times;</button>
  <h2 style="margin-bottom:9px;">üí∞ Meus Ganhos</h2>
  <!-- Filtros r√°pidos -->
  <div style="display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px;">
    <button onclick="filtroGanhos('hoje',this)" class="btn-sm green" id="gnhf-hoje">Hoje</button>
    <button onclick="filtroGanhos('ontem',this)" class="btn-sm gray" id="gnhf-ontem">Ontem</button>
    <button onclick="filtroGanhos('semana',this)" class="btn-sm gray" id="gnhf-semana">Esta Semana</button>
    <button onclick="filtroGanhos('mes',this)" class="btn-sm gray" id="gnhf-mes">Este M√™s</button>
  </div>
  <!-- Navega√ß√£o de meses -->
  <div id="gnh-nav-mes" style="display:none;align-items:center;justify-content:space-between;background:#f0f4ff;border-radius:10px;padding:8px 12px;margin-bottom:8px;">
    <button onclick="navMes(-1)" style="background:none;border:none;font-size:20px;cursor:pointer;color:#004E89;padding:0 8px;">‚Äπ</button>
    <span id="gnh-mes-label" style="font-weight:700;font-size:13px;color:#004E89;text-transform:capitalize;"></span>
    <button onclick="navMes(1)" id="gnh-nav-prox" style="background:none;border:none;font-size:20px;cursor:pointer;color:#004E89;padding:0 8px;">‚Ä∫</button>
  </div>
  <div id="gnh-resumo" style="margin-bottom:12px;"></div>
  <div id="gnh-dados"></div>
</div></div>

<!-- Rota Entregador -->
<div id="m-rota-ent" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('rota-ent')">&times;</button>
  <h2 style="margin-bottom:9px;">&#127758; Minhas Entregas</h2>
  <div id="rota-ent-lst"></div>
</div></div>

<!-- Editar Pedido -->
<div id="m-editar" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('editar')">&times;</button>
  <h2 style="margin-bottom:13px;">&#9998; Editar Pedido</h2>
  <input type="hidden" id="edit-id">
  <div class="fg"><label>Numero do Pedido / Codigo Ifood</label><input type="text" id="edit-num" placeholder="Ex: 4321"></div>
  <div class="fg"><label>Nome do Cliente</label><input type="text" id="edit-cli"></div>
  <div class="fg"><label>Telefone</label><input type="tel" id="edit-tel"></div>
  <div class="g2"><div class="fg"><label>Rua / Avenida</label><input type="text" id="edit-rua"></div><div class="fg"><label>Numero</label><input type="text" id="edit-nend"></div></div>
  <div class="g2b"><div class="fg"><label>Bairro</label><input type="text" id="edit-bairro"></div><div class="fg"><label>Cidade</label><input type="text" id="edit-cidade"></div></div>
  <div class="fg"><label>Complemento</label><input type="text" id="edit-comp" placeholder="Ex: Apto 12 Torre 2"></div>
  <div class="fg"><label>Observacoes</label><input type="text" id="edit-obs"></div>
  <div id="edit-msg" style="margin-top:5px;"></div>
  <button class="btn btn-primary" onclick="salvarEdicaoPedido()">&#10003; Salvar Alteracoes</button>
</div></div>

<!-- Confirma√ß√£o iFood -->
<div id="m-ifood-conf" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('ifood-conf')">&times;</button>
  <div style="text-align:center;margin-bottom:14px;">
    <div style="font-size:40px;">üì±</div>
    <h2 style="color:#ea1d2c;margin-bottom:4px;">Confirma√ß√£o iFood</h2>
    <p style="font-size:12px;color:#888;">Pedido <strong id="ifood-conf-num"></strong></p>
  </div>
  <div style="background:#fff3e0;border:1.5px solid #FF6B35;border-radius:10px;padding:12px;margin-bottom:14px;">
    <p style="font-size:13px;color:#e65100;font-weight:700;margin-bottom:4px;">Como confirmar:</p>
    <p style="font-size:12px;color:#555;line-height:1.7;">1. Chegue ao endere√ßo de entrega<br>2. Abra o iFood e confirme a entrega no app<br>3. Volte aqui e clique em <strong>Finalizar</strong></p>
  </div>
  <a id="ifood-conf-link" href="#" target="_blank" style="display:block;background:#ea1d2c;color:white;text-align:center;padding:14px;border-radius:9px;font-weight:700;font-size:15px;text-decoration:none;margin-bottom:12px;">
    üîó Abrir iFood para Confirmar
  </a>
  <div id="ifood-conf-msg" style="margin-bottom:8px;"></div>
  <button class="btn btn-green" onclick="finalizarSemCodigoIfood()" style="font-size:16px;padding:14px;">‚úÖ Entregue ‚Äî Finalizar</button>
</div></div>

<!-- Config Admin -->
<div id="m-cfg-adm" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('cfg-adm')">&times;</button>
  <h2 style="margin-bottom:14px;">‚öôÔ∏è Configura√ß√µes Admin</h2>

  <!-- Foto de perfil -->
  <div style="background:#f8f9fa;border-radius:10px;padding:13px;margin-bottom:12px;">
    <div style="font-size:12px;font-weight:700;color:#004E89;margin-bottom:10px;">üë§ Foto de Perfil</div>
    <div style="display:flex;align-items:center;gap:14px;">
      <div id="adm-cfg-foto-prev" style="width:72px;height:72px;border-radius:50%;background:#e0e0e0;overflow:hidden;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:28px;">üë§</div>
      <div>
        <button onclick="$('adm-input-foto').click()" class="btn btn-blue" style="width:auto;padding:8px 16px;font-size:13px;">üì∑ Trocar Foto</button>
        <p style="font-size:11px;color:#999;margin-top:5px;">Aparece no topo do painel admin</p>
      </div>
    </div>
  </div>

  <!-- Papel de fundo -->
  <div style="background:#f8f9fa;border-radius:10px;padding:13px;margin-bottom:12px;">
    <div style="font-size:12px;font-weight:700;color:#004E89;margin-bottom:6px;">üñºÔ∏è Papel de Fundo</div>
    <p style="font-size:11px;color:#888;margin-bottom:10px;">Ser√° aplicado como fundo para <strong>todas as lojas</strong> do sistema.</p>
    <div id="adm-fundo-prev" style="height:80px;border-radius:8px;background:#e0e0e0;margin-bottom:10px;background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;color:#aaa;font-size:12px;">Sem fundo definido</div>
    <div style="display:flex;gap:8px;">
      <button onclick="$('adm-input-fundo').click()" class="btn btn-primary" style="width:auto;padding:8px 16px;font-size:13px;">üìÅ Escolher Imagem</button>
      <button onclick="removerFundoAdm()" class="btn btn-gray" style="width:auto;padding:8px 14px;font-size:13px;">üóëÔ∏è Remover</button>
    </div>
    <input type="file" id="adm-input-fundo" accept="image/*" class="hidden" onchange="uploadFundoAdm(event)">
  </div>

  <div id="cfg-adm-msg"></div>
</div></div>

<!-- Editar Loja (Admin) -->
<div id="m-adm-edit-loja" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('adm-edit-loja')">&times;</button>
  <h2 style="margin-bottom:14px;">‚úèÔ∏è Editar Loja</h2>
  <input type="hidden" id="adm-edit-loja-id">
  <div class="fg"><label>Nome da Loja</label><input type="text" id="adm-edit-nome-loja"></div>
  <div class="fg"><label>Email (login do sistema)</label><input type="email" id="adm-edit-email" placeholder="loja@montarotaai.com"></div>
  <div class="fg"><label>Telefone</label><input type="tel" id="adm-edit-tel"></div>
  <div class="fg"><label>CNPJ</label><input type="text" id="adm-edit-cnpj"></div>
  <div class="g2"><div class="fg"><label>Rua</label><input type="text" id="adm-edit-rua"></div><div class="fg"><label>N√∫mero</label><input type="text" id="adm-edit-nend"></div></div>
  <div class="g2b"><div class="fg"><label>Bairro</label><input type="text" id="adm-edit-bairro"></div><div class="fg"><label>Cidade</label><input type="text" id="adm-edit-cidade"></div></div>
  <div class="fg"><label>Complemento</label><input type="text" id="adm-edit-comp"></div>
  <div class="fg"><label>Nova Senha (em branco = n√£o alterar)</label><input type="password" id="adm-edit-senha" placeholder="M√≠nimo 6 caracteres"></div>
  <div id="adm-edit-loja-msg" style="margin-top:6px;"></div>
  <button class="btn btn-primary" onclick="salvarEditLojaAdm()">‚úÖ Salvar Altera√ß√µes</button>
</div></div>

<!-- Config Entregador -->
<div id="m-cfg-ent" class="modal"><div class="modal-box">
  <button class="modal-close" onclick="closeM('cfg-ent')">&times;</button>
  <h2 style="margin-bottom:13px;">&#9881; Meus Dados</h2>
  <div class="fg"><label>Nome</label><input type="text" id="ent-nome2"></div>
  <div class="fg"><label>Telefone</label><input type="tel" id="ent-tel2"></div>
  <div class="fg"><label>Placa</label><input type="text" id="ent-plc"></div>
  <div class="fg"><label>Chave Pix</label><input type="text" id="ent-pix"></div>
  <div class="fg"><label>Nova Senha</label><input type="password" id="ent-sen"></div>
  <div id="ent-cfg-msg"></div>
  <button class="btn btn-primary" onclick="salvarCfgEnt()">Salvar</button>
</div></div>

<script>
const GOOGLE_KEY_DEFAULT='AIzaSyB3cRabRR5vQgwtudkGKXMwBI35c1iNGrs';
// Limpa chave antiga inv√°lida do localStorage para usar a nova padr√£o
(function(){
  const stored=localStorage.getItem('google_vision_key')||'';
  if(stored&&stored!==GOOGLE_KEY_DEFAULT&&!stored.startsWith('AIzaSyB3cRab')){
    localStorage.removeItem('google_vision_key');
  }
})();
function getGoogleKey(){
  const stored=localStorage.getItem('google_vision_key')||'';
  // Valida: chave Google v√°lida come√ßa com AIzaSy e tem 39 chars
  if(stored&&stored.startsWith('AIzaSy')&&stored.length>=35) return stored;
  // Chave inv√°lida no storage ‚Äî usa a padr√£o e limpa
  if(stored) localStorage.removeItem('google_vision_key');
  return GOOGLE_KEY_DEFAULT;
}
const IFOOD_URL='https://confirmacao-entrega-propria.ifood.com.br/';
const LOGO_URL='data:image/jpeg;base64,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';
const HEADER_BG_URL='data:image/jpeg;base64,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';
const SB_URL='https://dfvjaweyxfenhjgusekq.supabase.co';
const SB_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRmdmphd2V5eGZlbmhqZ3VzZWtxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMzk4NTMsImV4cCI6MjA4NzYxNTg1M30.MT9pzSQgc3ZNGiIV95DwjVtNvSZI0Lz-SKMkvMys1Kg';
const db=window.supabase.createClient(SB_URL,SB_KEY);
// OCR usa Google Cloud Vision API ‚Äî chave configurada em GOOGLE_KEY
const RP_LAT=-21.1767, RP_LNG=-47.8208;

let U=null;
let mapas={admin:null,loja:null};
let mrks={admin:{},loja:{}};
let tooltips={admin:{},loja:{}};
let seg={admin:false,loja:false};
let ivs={rast:null,rastPush:null,mAdm:null,mLj:null,alerta:null};
let gpsOk=false;
let realtimeCh=null;
let myLat=null,myLng=null;
let lojaGeoCache={lat:null,lng:null};
let geocodeCache={};

// ============ INIT ============
window.onload=()=>{
  // Set logo on login screen immediately
  const li=$('login-logo');if(li)li.src=LOGO_URL;
  const s=localStorage.getItem('u');
  if(s){U=JSON.parse(s);showPg(U.tipo);}
};


// ‚îÄ‚îÄ GPS EM BACKGROUND: Wake Lock + Visibility API ‚îÄ‚îÄ
// Mant√©m o rastreamento ativo mesmo com tela em segundo plano
let _wakeLock=null;

async function ativarWakeLock(){
  if(!('wakeLock' in navigator))return;
  try{
    _wakeLock=await navigator.wakeLock.request('screen');
    _wakeLock.addEventListener('release',()=>{
      // Tenta reativar se ainda estiver online
      if(U&&U.online)setTimeout(ativarWakeLock,2000);
    });
  }catch(e){console.warn('[WakeLock]',e);}
}

function liberarWakeLock(){
  if(_wakeLock){_wakeLock.release().catch(()=>{});_wakeLock=null;}
}

// Quando app volta ao foco, retoma GPS imediatamente
document.addEventListener('visibilitychange',()=>{
  if(document.visibilityState==='visible'&&U&&U.online&&U.tipo==='entregador'){
    // App voltou ao foco ‚Äî envia posi√ß√£o imediatamente
    if(myLat&&myLng){
      db.from('usuarios').update({latitude:myLat,longitude:myLng}).eq('id',U.id);
    }
    navigator.geolocation&&navigator.geolocation.getCurrentPosition(
      p=>{myLat=p.coords.latitude;myLng=p.coords.longitude;
          db.from('usuarios').update({latitude:myLat,longitude:myLng}).eq('id',U.id);},
      ()=>{},
      {enableHighAccuracy:true,timeout:10000,maximumAge:5000}
    );
    // Reativa Wake Lock se perdeu
    ativarWakeLock();
  }
});

function swPostMessage(msg){
  // Mantido por compatibilidade ‚Äî agora usando Wake Lock em vez de SW
  if(msg.type==='STOP_GPS')liberarWakeLock();
}


// Helper seguro para banner GPS (so existe na tela do entregador)
function showGpsBanner(show){
  const b=$('gps-banner');
  if(!b)return; // nao esta na pagina atual
  b.classList.toggle('hidden',!show);
}

function iniciarGPS(){
  if(!navigator.geolocation)return;
  navigator.geolocation.getCurrentPosition(
    p=>{gpsOk=true;myLat=p.coords.latitude;myLng=p.coords.longitude;showGpsBanner(false);},
    err=>{
      // Mostra banner s√≥ se PERMISSION_DENIED (codigo 1)
      if(err.code===1)showGpsBanner(true);
    },
    {enableHighAccuracy:false,timeout:10000,maximumAge:60000}
  );
}

function pedirGPS(){
  showGpsBanner(false);
  if(!navigator.geolocation)return;
  navigator.geolocation.getCurrentPosition(
    p=>{gpsOk=true;myLat=p.coords.latitude;myLng=p.coords.longitude;showGpsBanner(false);},
    err=>{if(err.code===1)showGpsBanner(true);},
    {enableHighAccuracy:true,timeout:12000,maximumAge:0}
  );
}

// Obter posicao atual (promise)
function obterPosicaoAgora(){
  return new Promise((resolve,reject)=>{
    if(myLat&&myLng){resolve({lat:myLat,lng:myLng});return;}
    if(!navigator.geolocation){reject('sem_gps');return;}
    const timer=setTimeout(()=>{
      if(myLat&&myLng)resolve({lat:myLat,lng:myLng});
      else reject('timeout');
    },8000);
    navigator.geolocation.getCurrentPosition(
      p=>{clearTimeout(timer);gpsOk=true;myLat=p.coords.latitude;myLng=p.coords.longitude;resolve({lat:p.coords.latitude,lng:p.coords.longitude});},
      err=>{clearTimeout(timer);if(myLat&&myLng)resolve({lat:myLat,lng:myLng});else reject(err.code===1?'bloqueado':'indisponivel');},
      {enableHighAccuracy:true,timeout:7000,maximumAge:30000}
    );
  });
}

// ============ UTILS ============
const $=id=>document.getElementById(id);
const v=id=>{const e=$(id);return e?e.value.trim():'';}
const fR=val=>'R$ '+parseFloat(val||0).toFixed(2).replace('.',',');
const fEnd=(r,n,b,c,cp)=>{let s=[r,n].filter(Boolean).join(', ');if(b)s+=', '+b;if(c)s+=' - '+c;if(cp)s+=' ('+cp+')';return s;};
function showM(id,msg,ok){const e=$(id);if(!e)return;e.className=ok?'msg-ok':'msg-error';e.innerHTML=msg;}
function clearM(id){const e=$(id);if(e){e.className='';e.textContent='';}}
// Salva U no localStorage SEM logo_url/foto_url (base64 enorme estoura quota)
function salvarU(u){
  try{
    const s=u||U;
    const copia={...s};delete copia.logo_url;delete copia.foto_url;
    localStorage.setItem('u',JSON.stringify(copia));
  }catch(e){console.warn('salvarU falhou:',e);}
}function iDia(){const d=new Date();d.setHours(0,0,0,0);return d.toISOString();}
function fDia(){const d=new Date();d.setHours(23,59,59,999);return d.toISOString();}
function iPer(p){
  const n=new Date();
  if(p==='hoje'){n.setHours(0,0,0,0);return n.toISOString();}
  if(p==='semana'){const d=new Date(n);d.setDate(d.getDate()-((d.getDay()+6)%7));d.setHours(0,0,0,0);return d.toISOString();}
  if(p==='semana_passada'){const d=new Date(n);d.setDate(d.getDate()-((d.getDay()+6)%7)-7);d.setHours(0,0,0,0);return d.toISOString();}
  if(p==='mes'){n.setDate(1);n.setHours(0,0,0,0);return n.toISOString();}
  if(p==='mes_passado'){return new Date(n.getFullYear(),n.getMonth()-1,1).toISOString();}
  n.setHours(0,0,0,0);return n.toISOString();
}

// Haversine
function distKm(lat1,lng1,lat2,lng2){
  const R=6371,dL=(lat2-lat1)*Math.PI/180,dG=(lng2-lng1)*Math.PI/180;
  const a=Math.sin(dL/2)**2+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dG/2)**2;
  return R*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
}
function angleDeg(lat1,lng1,lat2,lng2){return Math.atan2(lng2-lng1,lat2-lat1)*180/Math.PI;}

// Geocode via Nominatim
async function geocode(addr){
  if(geocodeCache[addr])return geocodeCache[addr];
  try{
    const r=await fetch('https://nominatim.openstreetmap.org/search?q='+encodeURIComponent(addr+', Ribeirao Preto, SP, Brasil')+'&format=json&limit=1',{headers:{'User-Agent':'MontaARotaAi/1.0'}});
    const d=await r.json();
    if(d&&d[0]){const res={lat:parseFloat(d[0].lat),lng:parseFloat(d[0].lon)};geocodeCache[addr]=res;return res;}
  }catch(e){}
  return null;
}

// Sound beep
function beep(freq=880,dur=0.4){
  try{const ctx=new(window.AudioContext||window.webkitAudioContext)();const o=ctx.createOscillator();const g=ctx.createGain();o.connect(g);g.connect(ctx.destination);o.type='sine';o.frequency.value=freq;g.gain.setValueAtTime(0.3,ctx.currentTime);g.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+dur);o.start();o.stop(ctx.currentTime+dur);}catch(e){}
}
function beepAlerta(){beep(660,0.2);setTimeout(()=>beep(880,0.3),300);}

// Calcular valor corrida
function calcularValorCorrida(distancia,taxaTipo,taxaBase,kmLimite,taxaExcedente,taxaFixoBase){
  if(taxaTipo==='por_km'){
    if(distancia<=kmLimite)return taxaBase;
    else return taxaExcedente;
  }
  if(taxaTipo==='fixo_mais_km'){
    // fixoBase eh o valor por entrega; taxaFixoBase seria um fixo mensal (nao somado por corrida)
    if(distancia<=kmLimite)return taxaBase;
    else return taxaExcedente;
  }
  return taxaBase; // fixo
}

// MODAIS
function openM(id){const m=$('m-'+id);if(m)m.classList.add('open');}
function closeM(id){const m=$('m-'+id);if(m)m.classList.remove('open');}
window.addEventListener('click',e=>{if(e.target.classList.contains('modal'))e.target.classList.remove('open');});

function switchTab(tab,el){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));el.classList.add('active');
  if(tab==='login'){$('login-tab').classList.remove('hidden');$('register-tab').classList.add('hidden');}
  else{$('login-tab').classList.add('hidden');$('register-tab').classList.remove('hidden');}
}
function toggleCad(){
  const t=document.querySelector('input[name="rtype"]:checked').value;
  $('c-loja').classList.toggle('hidden',t!=='loja');$('c-ent').classList.toggle('hidden',t!=='entregador');
}
function toggleTaxaTipo(){
  const t=v('lj-taxa-tipo');
  $('taxa-fixo-area').classList.toggle('hidden',t!=='fixo');
  $('taxa-km-area').classList.toggle('hidden',t!=='por_km');
  $('taxa-fixo-km-area').classList.toggle('hidden',t!=='fixo_mais_km');
}

// ============ AUTH ============
async function fazerLogin(){
  const email=v('l-email'),senha=v('l-senha'),btn=$('btn-login');
  if(!email||!senha){showM('login-msg','Preencha email e senha');return;}
  btn.disabled=true;btn.textContent='Entrando...';
  try{
    const{data:u}=await db.from('usuarios').select('*').eq('email',email).single();
    if(!u){showM('login-msg','Usuario nao encontrado');return;}
    if(u.status==='bloqueado'){showM('login-msg','Acesso bloqueado.');return;}
    if(senha!==u.senha_hash){showM('login-msg','Senha incorreta');return;}
    U=u;salvarU(u);showPg(u.tipo);
  }catch(e){showM('login-msg','Erro: '+e.message);}
  finally{btn.disabled=false;btn.textContent='Entrar';}
}

async function fazerCadastro(){
  const tipo=document.querySelector('input[name="rtype"]:checked').value;
  const nomeRaw=v('r-nome'),emailUser=v('r-email-user'),senha=v('r-senha'),btn=$('btn-cad');
  const nome=nomeRaw.toUpperCase();
  if(!nome||!emailUser||!senha){showM('reg-msg','Preencha nome, login e senha');return;}
  if(!/^[a-z0-9._-]+$/.test(emailUser)){showM('reg-msg','Login inv√°lido. Use apenas letras min√∫sculas e n√∫meros.');return;}
  if(senha.length<6){showM('reg-msg','Senha minimo 6 caracteres');return;}
  const email=emailUser+'@montarotaai.com';
  btn.disabled=true;btn.textContent='Cadastrando...';
  try{
    const{data:ex}=await db.from('usuarios').select('id').eq('email',email).single();
    if(ex){showM('reg-msg','Login ja cadastrado. Escolha outro.');return;}
    const rua=v('r-rua'),num=v('r-num'),bairro=v('r-bairro'),cidade=v('r-cidade')||'Ribeirao Preto';
    const d={tipo,nome,email,telefone:v('r-tel'),senha_hash:senha,status:'ativo',taxa_sistema:0.50,taxa_entrega:0,taxa_tipo:'fixo',taxa_km_limite:5,taxa_km_excedente:2,online:false,cidade};
    if(tipo==='loja'){
      d.nome_loja=(v('r-nloja')||nome).toUpperCase();d.cnpj=v('r-cnpj');
      d.endereco=fEnd(rua,num,bairro,cidade,'');
      d.endereco_rua=rua;d.endereco_numero=num;d.endereco_bairro=bairro;d.endereco_cidade=cidade;
      d.codigo_loja=Math.random().toString(36).substring(2,8).toUpperCase();
    }else{d.placa_moto=v('r-placa');d.chave_pix=v('r-pix');}
    const{error}=await db.from('usuarios').insert([d]);
    if(error){showM('reg-msg','Erro: '+error.message);return;}
    showM('reg-msg','‚úÖ Cadastro realizado! Login: '+email,true);
    setTimeout(()=>{$('l-email').value=email;document.querySelectorAll('.tab')[0].click();},1800);
  }catch(e){showM('reg-msg','Erro: '+e.message);}
  finally{btn.disabled=false;btn.textContent='Cadastrar';}
}

function showPg(tipo){
  ['pg-login','pg-admin','pg-loja','pg-entregador'].forEach(id=>$(id).classList.add('hidden'));
  $('pg-'+tipo).classList.remove('hidden');
  // Logo apenas na tela de login
  const li=$('login-logo');if(li)li.src=LOGO_URL;
  // Aplica wallpaper em todos os headers
  document.querySelectorAll('.header').forEach(h=>{
    h.style.backgroundImage=`url('${HEADER_BG_URL}')`;
    h.style.backgroundSize='cover';
    h.style.backgroundPosition='center top';
  });
  pararIvs();
  if(tipo==='admin')initAdmin();
  else if(tipo==='loja')initLoja();
  else if(tipo==='entregador')initEnt();
}

function sair(){
  pararIvs();
  if(U&&U.online)db.from('usuarios').update({online:false}).eq('id',U.id);
  // PRESERVA v√≠nculo de loja em chave separada por entregador
  // Assim o nome da loja permanece mesmo ap√≥s logout/fechar app
  if(U&&U.tipo==='entregador'&&U._loja_ativa_nome){
    const lojaKey='loja_vinc_'+U.id;
    localStorage.setItem(lojaKey,JSON.stringify({
      loja_ativa_id:U.loja_ativa_id||null,
      _loja_ativa_nome:U._loja_ativa_nome,
      _loja_ativa_codigo:U._loja_ativa_codigo||''
    }));
  }
  U=null;localStorage.removeItem('u');
  ['pg-admin','pg-loja','pg-entregador'].forEach(id=>$(id).classList.add('hidden'));
  $('pg-login').classList.remove('hidden');
  $('l-email').value='';$('l-senha').value='';
}
function pararIvs(){
  // rast usa watchPosition, nao setInterval
  if(ivs.rast){navigator.geolocation&&navigator.geolocation.clearWatch(ivs.rast);ivs.rast=null;}
  // os demais sao setInterval
  ['rastPush','mAdm','mLj','alerta'].forEach(k=>{if(ivs[k]){clearInterval(ivs[k]);ivs[k]=null;}});
  // Fecha canal realtime
  if(realtimeCh){try{realtimeCh.unsubscribe();}catch(e){}realtimeCh=null;}
}

// ============ MAPA ============
function criarMapa(tipo){
  const id=tipo==='admin'?'mapa-admin':'mapa-loja';
  if(mapas[tipo])return;
  mapas[tipo]=L.map(id).setView([RP_LAT,RP_LNG],13);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'OSM'}).addTo(mapas[tipo]);
}

function icoEnt(nome,tel,comPedido){
  const bg=comPedido?'#1565C0':'#2e7d32'; // azul=com pedido, verde=livre
  const emoji=comPedido?'&#128757;':'&#128757;';
  const borda=comPedido?'#90CAF9':'#A5D6A7';
  return L.divIcon({
    html:`<div style="position:relative;text-align:center;">
      <div style="background:${bg};color:white;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-size:17px;border:3px solid ${borda};box-shadow:0 2px 8px rgba(0,0,0,.45);margin:0 auto;">${emoji}</div>
      <div style="background:rgba(0,0,0,.80);color:white;font-size:9px;padding:2px 6px;border-radius:4px;white-space:nowrap;margin-top:2px;max-width:100px;overflow:hidden;text-overflow:ellipsis;">${nome.split(' ')[0]}${tel?' | '+tel.slice(-4):''}</div>
    </div>`,
    iconSize:[100,54],iconAnchor:[50,36],className:''
  });
}

async function atuMapa(tipo,ents){
  const m=mapas[tipo];if(!m)return;
  const mk=mrks[tipo];
  Object.keys(mk).forEach(id=>{if(!ents.find(e=>e.id===id)){mk[id].remove();delete mk[id];}});
  const bounds=[];
  let primLl=null;
  ents.forEach(e=>{
    if(!e.latitude||!e.longitude)return;
    const ll=[e.latitude,e.longitude];
    const ico=icoEnt(e.nome,e.telefone,!!e.com_pedido);
    const popup=`<strong>${e.nome}</strong><br>Tel: ${e.telefone||'-'}<br><span style="color:${e.com_pedido?'#1565C0':'#2e7d32'};font-weight:700">${e.com_pedido?'üîµ Em rota':'üü¢ Livre'}</span>`;
    if(mk[e.id]){mk[e.id].setLatLng(ll);mk[e.id].setIcon(ico);}
    else mk[e.id]=L.marker(ll,{icon:ico}).addTo(m).bindPopup(popup);
    bounds.push(ll);
    if(!primLl)primLl=ll;
  });
  if(seg[tipo]&&primLl){m.setView(primLl,16,{animate:true});}
  else if(!seg[tipo]){
    if(bounds.length===1)m.setView(bounds[0],15);
    else if(bounds.length>1)m.fitBounds(bounds,{padding:[40,40]});
    else m.setView([RP_LAT,RP_LNG],13);
  }
  setTimeout(()=>m.invalidateSize(),300);
}

function toggleFollowEnt(tipo){
  seg[tipo]=!seg[tipo];
  const bid='btn-fol-'+(tipo==='admin'?'adm':'lj');
  const b=$(bid);
  if(b){
    b.classList.toggle('seguindo',seg[tipo]);
    b.innerHTML=seg[tipo]?'&#128308;&#128757;':'&#128757;';
    b.title=seg[tipo]?'Seguindo (clique para parar)':'Seguir entregador automaticamente';
  }
}
function toggleFollow(tipo){toggleFollowEnt(tipo);}
function centerMap(tipo){
  seg[tipo]=false;
  mapas[tipo]&&mapas[tipo].setView([RP_LAT,RP_LNG],13);
}

// ============ ADMIN ============
async function initAdmin(){
  admTab('painel',document.querySelector('.adm-tab'));
  await carregarDadosAdmin();
  await carregarAdmGpsToggle();
  criarMapa('admin');await pullAdm();
  ivs.mAdm=setInterval(pullAdm,5000);
  iniciarRealtimeDrivers('admin');
  await carregarAdmImpersonar();
  // Carrega foto de perfil do admin
  if(U.foto_url){
    $('adm-foto-img').src=U.foto_url;
    $('adm-foto-img').classList.remove('hidden');
    $('adm-foto-ph').classList.add('hidden');
  }
  db.from('usuarios').select('foto_url').eq('id',U.id).single().then(({data:d})=>{
    if(d&&d.foto_url){U.foto_url=d.foto_url;$('adm-foto-img').src=d.foto_url;$('adm-foto-img').classList.remove('hidden');$('adm-foto-ph').classList.add('hidden');}
  });
}

function aplicarFundoAdmin(url){
  const h=$('adm-header');
  if(!h)return;
  if(url){
    h.style.backgroundImage=`url('${url}')`;
    h.style.backgroundSize='cover';
    h.style.backgroundPosition='center';
  } else {
    h.style.backgroundImage='';h.style.backgroundSize='';h.style.backgroundPosition='';
  }
}

async function abrirCfgAdm(){
  openM('cfg-adm');
  clearM('cfg-adm-msg');
  // Mostra foto atual no preview
  const prev=$('adm-cfg-foto-prev');
  if(U.foto_url) prev.innerHTML=`<img src="${U.foto_url}" style="width:100%;height:100%;object-fit:cover;">`;
  // Mostra fundo atual no preview
  const{data:d}=await db.from('usuarios').select('fundo_url').eq('id',U.id).single();
  const fundoPrev=$('adm-fundo-prev');
  if(d&&d.fundo_url){
    fundoPrev.style.backgroundImage=`url('${d.fundo_url}')`;
    fundoPrev.textContent='';
  } else {
    fundoPrev.style.backgroundImage='';
    fundoPrev.textContent='Sem fundo definido';
  }
}

async function uploadFotoAdm(event){
  const file=event.target.files[0];if(!file)return;
  const reader=new FileReader();
  reader.onload=async(e)=>{
    const b=e.target.result;
    await db.from('usuarios').update({foto_url:b}).eq('id',U.id);
    U.foto_url=b;salvarU();
    // Atualiza header
    $('adm-foto-img').src=b;$('adm-foto-img').classList.remove('hidden');$('adm-foto-ph').classList.add('hidden');
    // Atualiza preview no modal
    const prev=$('adm-cfg-foto-prev');
    if(prev)prev.innerHTML=`<img src="${b}" style="width:100%;height:100%;object-fit:cover;">`;
    showM('cfg-adm-msg','‚úÖ Foto salva!',true);setTimeout(()=>clearM('cfg-adm-msg'),2000);
  };
  reader.readAsDataURL(file);
}

async function uploadFundoAdm(event){
  const file=event.target.files[0];if(!file)return;
  showM('cfg-adm-msg','‚è≥ Salvando fundo...',true);
  const reader=new FileReader();
  reader.onload=async(e)=>{
    const b=e.target.result;
    await db.from('usuarios').update({fundo_url:b}).eq('id',U.id);
    aplicarFundoAdmin(b);
    // Atualiza preview
    const prev=$('adm-fundo-prev');
    if(prev){prev.style.backgroundImage=`url('${b}')`;prev.textContent='';}
    showM('cfg-adm-msg','‚úÖ Fundo salvo e aplicado a todas as lojas!',true);
    setTimeout(()=>clearM('cfg-adm-msg'),3000);
  };
  reader.readAsDataURL(file);
}

async function removerFundoAdm(){
  await db.from('usuarios').update({fundo_url:null}).eq('id',U.id);
  aplicarFundoAdmin(null);
  const prev=$('adm-fundo-prev');
  if(prev){prev.style.backgroundImage='';prev.textContent='Sem fundo definido';}
  showM('cfg-adm-msg','‚úÖ Fundo removido.',true);setTimeout(()=>clearM('cfg-adm-msg'),2000);
}

async function abrirEditLojaAdm(id){
  const{data:l}=await db.from('usuarios').select('*').eq('id',id).single();
  if(!l)return;
  $('adm-edit-loja-id').value=id;
  $('adm-edit-nome-loja').value=l.nome_loja||l.nome||'';
  $('adm-edit-email').value=l.email||'';
  $('adm-edit-tel').value=l.telefone||'';
  $('adm-edit-cnpj').value=l.cnpj||'';
  $('adm-edit-rua').value=l.rua||'';
  $('adm-edit-nend').value=l.numero_endereco||'';
  $('adm-edit-bairro').value=l.bairro||'';
  $('adm-edit-cidade').value=l.cidade||'';
  $('adm-edit-comp').value=l.complemento||'';
  $('adm-edit-senha').value='';
  clearM('adm-edit-loja-msg');
  openM('adm-edit-loja');
}

async function salvarEditLojaAdm(){
  const id=$('adm-edit-loja-id').value;
  if(!id)return;
  const d={
    nome_loja:$('adm-edit-nome-loja').value.trim(),
    nome:$('adm-edit-nome-loja').value.trim(),
    telefone:$('adm-edit-tel').value.trim(),
    cnpj:$('adm-edit-cnpj').value.trim(),
    rua:$('adm-edit-rua').value.trim(),
    numero_endereco:$('adm-edit-nend').value.trim(),
    bairro:$('adm-edit-bairro').value.trim(),
    cidade:$('adm-edit-cidade').value.trim(),
    complemento:$('adm-edit-comp').value.trim(),
  };
  // Endere√ßo completo
  d.endereco=[d.rua,d.numero_endereco,d.bairro,d.cidade].filter(Boolean).join(', ');
  // Email (troca se preenchido)
  const novoEmail=$('adm-edit-email').value.trim();
  if(novoEmail)d.email=novoEmail;
  // Senha (troca se preenchida)
  const novaSenha=$('adm-edit-senha').value.trim();
  if(novaSenha.length>=6)d.senha_hash=novaSenha;
  const{error}=await db.from('usuarios').update(d).eq('id',id);
  if(error){showM('adm-edit-loja-msg','Erro: '+error.message,false);return;}
  showM('adm-edit-loja-msg','‚úÖ Loja atualizada com sucesso!',true);
  setTimeout(()=>{closeM('adm-edit-loja');carregarAdmLojas();},1500);
}

async function carregarDadosAdmin(){
  const{data:e}=await db.from('usuarios').select('id').eq('tipo','entregador')
  const{data:l}=await db.from('usuarios').select('id').eq('tipo','loja')
  const{data:on}=await db.from('usuarios').select('id').eq('tipo','entregador').eq('online',true);
  const{data:rota}=await db.from('entregas').select('id').eq('status','em_rota');
  $('adm-cnt-ent').textContent=e?e.length:0;
  $('adm-cnt-loj').textContent=l?l.length:0;
  $('adm-cnt-on').textContent=on?on.length:0;
  $('adm-cnt-rota').textContent=rota?rota.length:0;
  // Entregas realtime
  const{data:ativ}=await db.from('entregas').select('*,loja:loja_id(nome_loja,nome),entregador:entregador_id(nome,telefone)').in('status',['aceito','chegou_loja','saiu_entrega','em_rota']).order('created_at',{ascending:false}).limit(20);
  const el=$('adm-entregas-realtime');
  if(!ativ||!ativ.length){el.innerHTML='<p style="color:#999;font-size:13px;">Nenhuma entrega ativa agora.</p>';return;}
  el.innerHTML=ativ.map(e=>{
    const st=e.status_detalhado||e.status;
    const stColor={'aceito':'#1565C0','chegou_loja':'#e65100','saiu_entrega':'#FF6B35','em_rota':'#6a1b9a'}[st]||'#555';
    const stLabel={'aceito':'Aceito','chegou_loja':'Na Loja','saiu_entrega':'A Caminho','em_rota':'Em Rota'}[st]||st;
    return `<div style="border-radius:10px;background:white;margin-bottom:8px;border:1.5px solid #e0e0e0;overflow:hidden;">
      <div style="padding:10px 12px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;" onclick="this.nextElementSibling.classList.toggle('hidden')">
        <div>
          <span style="font-weight:700;font-size:13px;">${e.numero_pedido?'#'+e.numero_pedido:e.cliente_nome||'Entrega'}</span>
          <span style="background:${stColor};color:white;font-size:10px;padding:2px 7px;border-radius:10px;margin-left:6px;">${stLabel}</span>
          <div style="font-size:11px;color:#888;margin-top:2px;">üõµ ${e.entregador?e.entregador.nome:'N√£o atribu√≠do'} &nbsp;|&nbsp; üè™ ${e.loja?e.loja.nome_loja||e.loja.nome:'?'}</div>
        </div>
        <span style="font-size:11px;color:#aaa;">‚ñº detalhes</span>
      </div>
      <div class="hidden" style="padding:0 12px 12px;border-top:1px solid #f0f0f0;">
        <p style="font-size:12px;color:#555;margin:6px 0;">üìç ${e.endereco_entrega}</p>
        ${e.cliente_nome?`<p style="font-size:11px;color:#888;">üë§ ${e.cliente_nome}${e.cliente_telefone?` | <a href="tel:${e.cliente_telefone}" style="color:#004E89">üìû ${e.cliente_telefone}</a>`:''}</p>`:''}
        ${e.distancia_km>0?`<p style="font-size:11px;color:#888;">üìè ${parseFloat(e.distancia_km).toFixed(1)}km | <strong style="color:#2e7d32">${fR(e.valor_corrida||0)}</strong></p>`:''}
        ${e.entregador?`<p style="font-size:11px;color:#1565C0;font-weight:700;">üõµ Entregador: ${e.entregador.nome}${e.entregador.telefone?' | '+e.entregador.telefone:''}</p>`:''}
        ${e.codigo_confirmacao?`<p style="font-size:11px;color:#8e44ad;">üîë C√≥d. iFood: ${e.codigo_confirmacao}</p>`:''}
        <div style="margin-top:8px;display:flex;gap:6px;flex-wrap:wrap;">
          <button onclick="admFinalizarEntrega('${e.id}')" style="background:#2e7d32;color:white;border:none;padding:7px 14px;border-radius:7px;font-size:12px;font-weight:700;cursor:pointer;">‚úÖ Finalizar</button>
          <button onclick="admForcarStatus('${e.id}','cancelado')" style="background:#c62828;color:white;border:none;padding:7px 14px;border-radius:7px;font-size:12px;font-weight:700;cursor:pointer;">‚úñ Cancelar</button>
          ${e.entregador_id?`<button onclick="admRealocarEntrega('${e.id}')" style="background:#e65100;color:white;border:none;padding:7px 14px;border-radius:7px;font-size:12px;font-weight:700;cursor:pointer;">üîÑ Trocar Entregador</button>`:''}
        </div>
      </div>
    </div>`;
  }).join('');
}

async function pullAdm(){
  const{data:ents}=await db.from('usuarios').select('id,nome,telefone,latitude,longitude').eq('tipo','entregador').eq('online',true);
  $('adm-cnt-on').textContent=ents?ents.length:0;
  const el=$('lista-on-adm');
  if(!ents||!ents.length){el.innerHTML='<span style="font-size:12px;color:#999">Nenhum online</span>';await atuMapa('admin',[]);carregarDadosAdmin();return;}
  // Verifica quem tem pedido ativo
  const{data:ativas}=await db.from('entregas').select('entregador_id').in('entregador_id',ents.map(e=>e.id)).in('status',['aceito','em_rota','chegou_loja','saiu_entrega']);
  const comPedidoIds=new Set((ativas||[]).map(a=>a.entregador_id));
  const entsParaMapa=ents.map(e=>({...e,com_pedido:comPedidoIds.has(e.id)}));
  el.innerHTML=ents.map(e=>{
    const cp=comPedidoIds.has(e.id);
    return `<span class="badge" onclick="focarEntAdm('${e.id}')" style="background:${cp?'#1565C0':'#2e7d32'};color:white;cursor:pointer;padding:6px 11px;" title="Clique para ver no mapa">&#128757; ${e.nome} ${e.telefone?'('+e.telefone+')':''}${cp?' üîµ':' üü¢'}</span>`;
  }).join('');
  await atuMapa('admin',entsParaMapa);
  carregarDadosAdmin();
}

function admTab(aba,btn){
  ['painel','lojas','entregadores','financeiro','impersonar'].forEach(a=>$('adm-'+a).classList.add('hidden'));
  document.querySelectorAll('.adm-tab').forEach(b=>b.classList.remove('active'));
  $('adm-'+aba).classList.remove('hidden');
  if(btn)btn.classList.add('active');
  if(aba==='lojas')carregarAdmLojas();
  else if(aba==='entregadores')carregarAdmEnt();
  else if(aba==='financeiro')carregarFinAdm();
}

async function carregarAdmLojas(){
  const el=$('adm-loj-lst');el.innerHTML='<p>Carregando...</p>';
  const{data}=await db.from('usuarios').select('*').eq('tipo','loja');
  if(!data||!data.length){el.innerHTML='<p>Nenhuma loja</p>';return;}
  el.innerHTML=data.map(l=>`
    <div class="secao">
      <div style="display:flex;justify-content:space-between;margin-bottom:7px;">
        <div><strong>${l.nome_loja||l.nome}</strong> <span style="font-size:11px;color:#888;">[${l.codigo_loja||'---'}]</span><br>
        <small style="color:#888;">${l.email||''} | Tel: ${l.telefone||'-'}</small></div>
        <span class="badge b-${l.status}">${l.status}</span>
      </div>
      <div class="row" style="flex-wrap:wrap;">
        <label style="font-size:11px;">Taxa R$</label>
        <input type="number" id="tx-${l.id}" value="${parseFloat(l.taxa_sistema||0.50).toFixed(2)}" step="0.01" min="0" style="width:70px;padding:6px;border:1.5px solid #e0e0e0;border-radius:6px;font-size:12px;">
        <button class="btn-sm blue" onclick="saveTaxAdm('${l.id}')">Salvar Taxa</button>
        <button class="btn-sm orange" onclick="abrirEditLojaAdm('${l.id}')">‚úèÔ∏è Editar</button>
        <button class="btn-sm ${l.status==='ativo'?'red':'green'}" onclick="toggleStAdm('${l.id}','${l.status}','loja')">${l.status==='ativo'?'Bloquear':'Ativar'}</button>
      </div>
      <small id="tx-msg-${l.id}" style="color:#27ae60;margin-top:3px;display:block;"></small>
    </div>`).join('');
}

async function carregarAdmEnt(){
  const el=$('adm-ent-lst');el.innerHTML='<p>Carregando...</p>';
  const{data}=await db.from('usuarios').select('*').eq('tipo','entregador');
  if(!data||!data.length){el.innerHTML='<p>Nenhum entregador</p>';return;}
  el.innerHTML=data.map(e=>`
    <div class="secao">
      <div style="display:flex;justify-content:space-between;">
        <div><strong>${e.nome}</strong> <span class="badge ${e.online?'b-online':'b-offline'}">${e.online?'Online':'Offline'}</span><br>
        <small style="color:#888;">Tel: ${e.telefone||'-'} | Placa: ${e.placa_moto||'-'} | Pix: ${e.chave_pix||'-'}</small></div>
        <div style="display:flex;flex-direction:column;gap:5px;align-items:flex-end;">
          <span class="badge b-${e.status}">${e.status}</span>
          <button class="btn-sm ${e.status==='ativo'?'red':'green'}" onclick="toggleStAdm('${e.id}','${e.status}','ent')">${e.status==='ativo'?'Bloquear':'Ativar'}</button>
        </div>
      </div>
    </div>`).join('');
}

async function carregarFinAdm(){
  const p=$('adm-fin-per').value;
  const lojaFiltro=$('adm-fin-loja')?.value||'';
  const el=$('adm-fin-dados');
  el.innerHTML='<p style="text-align:center;padding:20px;color:#888;">‚è≥ Carregando dados...</p>';

  // Calcula per√≠odo
  function getPeriodo(per){
    const now=new Date();
    const hoje=new Date(now.getFullYear(),now.getMonth(),now.getDate());
    if(per==='hoje') return {ini:hoje,fim:new Date(hoje.getTime()+86400000-1)};
    if(per==='semana'){
      const d=new Date(hoje);d.setDate(d.getDate()-((d.getDay()+6)%7));// segunda
      return{ini:d,fim:new Date(d.getTime()+7*86400000-1)};
    }
    if(per==='semana_passada'){
      const d=new Date(hoje);d.setDate(d.getDate()-((d.getDay()+6)%7)-7);
      return{ini:d,fim:new Date(d.getTime()+7*86400000-1)};
    }
    if(per==='mes'){const d=new Date(now.getFullYear(),now.getMonth(),1);return{ini:d,fim:new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59)};}
    if(per==='mes_passado'){const d=new Date(now.getFullYear(),now.getMonth()-1,1);return{ini:d,fim:new Date(now.getFullYear(),now.getMonth(),0,23,59,59)};}
    return{ini:hoje,fim:new Date(hoje.getTime()+86400000-1)};
  }
  const{ini,fim}=getPeriodo(p);

  let q=db.from('entregas').select('*,loja:loja_id(nome_loja,nome,id),entregador:entregador_id(nome,id)')
    .gte('created_at',ini.toISOString()).lte('created_at',fim.toISOString());
  if(lojaFiltro) q=q.eq('loja_id',lojaFiltro);
  const{data:entregas}=await q.order('created_at',{ascending:false});
  const{data:lojas}=await db.from('usuarios').select('id,nome_loja,nome').eq('tipo','loja');

  // Popula filtro de lojas (uma vez)
  const selLoja=$('adm-fin-loja');
  if(selLoja&&selLoja.options.length<=1&&lojas){
    lojas.forEach(l=>{if(!selLoja.querySelector(`option[value="${l.id}"]`)){const o=document.createElement('option');o.value=l.id;o.textContent=l.nome_loja||l.nome;selLoja.appendChild(o);}});
  }

  if(!entregas||!entregas.length){el.innerHTML='<p style="color:#999;text-align:center;padding:30px;">Sem entregas no per√≠odo selecionado.</p>';return;}

  const KM_LIMITE=5; // km limite padr√£o para categoriza√ß√£o
  const totSis=entregas.reduce((s,e)=>s+parseFloat(e.valor_sistema||0),0);
  const totEnt=entregas.reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0);
  const entPorEntregador={};
  entregas.forEach(e=>{
    const eid=e.entregador_id||'sem';
    const enome=e.entregador?.nome||'Sem entregador';
    if(!entPorEntregador[eid])entPorEntregador[eid]={nome:enome,corridas:[],totalVal:0,abaixoKm:0,acimaKm:0,valAbaixo:0,valAcima:0};
    const d=parseFloat(e.distancia_km||0);
    const v=parseFloat(e.valor_corrida||e.valor_entregador||0);
    entPorEntregador[eid].corridas.push(e);
    entPorEntregador[eid].totalVal+=v;
    if(d>0&&d<=KM_LIMITE){entPorEntregador[eid].abaixoKm++;entPorEntregador[eid].valAbaixo+=v;}
    else if(d>KM_LIMITE){entPorEntregador[eid].acimaKm++;entPorEntregador[eid].valAcima+=v;}
    else{entPorEntregador[eid].abaixoKm++;entPorEntregador[eid].valAbaixo+=v;}
  });

  // Entregas por dia para gr√°fico de linha
  const porDia={};
  entregas.forEach(e=>{
    const dia=e.created_at?.split('T')[0]||'';
    if(!porDia[dia])porDia[dia]={entregas:0,sistema:0,entregadores:0};
    porDia[dia].entregas++;
    porDia[dia].sistema+=parseFloat(e.valor_sistema||0);
    porDia[dia].entregadores+=parseFloat(e.valor_corrida||e.valor_entregador||0);
  });
  const dias=Object.keys(porDia).sort();
  const diasLabel=dias.map(d=>{const[,m,dd]=d.split('-');return`${dd}/${m}`;});

  // Bairros top 8
  const porBairro={};
  entregas.forEach(e=>{
    const b=(e.endereco_bairro||'Sem bairro').trim()||'Sem bairro';
    if(!porBairro[b])porBairro[b]={cnt:0,val:0};
    porBairro[b].cnt++;
    porBairro[b].val+=parseFloat(e.valor_corrida||e.valor_entregador||0);
  });
  const bairrosArr=Object.entries(porBairro).sort((a,b)=>b[1].cnt-a[1].cnt).slice(0,8);

  // M√©tricas
  const ticketMedio=entregas.length>0?totEnt/entregas.length:0;
  const kmTotal=entregas.reduce((s,e)=>s+parseFloat(e.distancia_km||0),0);
  const custoKm=kmTotal>0?(totEnt/kmTotal):0;

  // HTML do relat√≥rio
  const entradoresArr=Object.values(entPorEntregador).sort((a,b)=>b.totalVal-a.totalVal);
  const coresEnt=['#FF6B35','#004E89','#00C9A7','#8e44ad','#e74c3c','#27ae60','#f39c12'];

  el.innerHTML=`
  <!-- RESUMO GERAL -->
  <div class="secao" style="background:linear-gradient(135deg,#004E89,#FF6B35);color:white;border-radius:12px;padding:14px;margin-bottom:10px;">
    <div style="font-size:11px;font-weight:700;opacity:.8;margin-bottom:8px;text-transform:uppercase;">Resumo do Per√≠odo</div>
    <div class="g3">
      <div style="text-align:center;background:rgba(255,255,255,.15);border-radius:8px;padding:10px;">
        <div style="font-size:10px;opacity:.8;">Entregas</div>
        <div style="font-size:24px;font-weight:700;">${entregas.length}</div>
      </div>
      <div style="text-align:center;background:rgba(255,255,255,.15);border-radius:8px;padding:10px;">
        <div style="font-size:10px;opacity:.8;">Taxa Sistema</div>
        <div style="font-size:16px;font-weight:700;">${fR(totSis)}</div>
      </div>
      <div style="text-align:center;background:rgba(255,255,255,.15);border-radius:8px;padding:10px;">
        <div style="font-size:10px;opacity:.8;">A Pagar Ent.</div>
        <div style="font-size:16px;font-weight:700;">${fR(totEnt)}</div>
      </div>
    </div>
  </div>

  <!-- GR√ÅFICO ENTREGAS POR DIA -->
  ${dias.length>1?`<div class="secao">
    <div class="s-title">üìà Entregas por Dia</div>
    <canvas id="chart-dias" height="160"></canvas>
  </div>`:''}

  <!-- GR√ÅFICO PIZZA ENTREGADORES -->
  ${entradoresArr.length>1?`<div class="secao">
    <div class="s-title">ü•ß Distribui√ß√£o por Entregador</div>
    <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
      <canvas id="chart-pizza" width="160" height="160" style="max-width:160px;"></canvas>
      <div style="flex:1;">
        ${entradoresArr.map((e,i)=>`<div style="display:flex;align-items:center;gap:6px;margin-bottom:6px;">
          <div style="width:12px;height:12px;border-radius:50%;background:${coresEnt[i%coresEnt.length]};flex-shrink:0;"></div>
          <span style="font-size:12px;">${e.nome}</span>
          <span style="margin-left:auto;font-weight:700;font-size:12px;">${e.corridas.length}x</span>
        </div>`).join('')}
      </div>
    </div>
  </div>`:''}

  <!-- DETALHAMENTO POR ENTREGADOR -->
  <div class="secao">
    <div class="s-title">üõµ Detalhamento por Entregador ‚Äî Limite: ${KM_LIMITE}km</div>
    ${entradoresArr.map((ent,i)=>`
    <div style="background:#f8f9fa;border-radius:10px;padding:12px;margin-bottom:10px;border-left:4px solid ${coresEnt[i%coresEnt.length]};">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <strong style="font-size:14px;">${ent.nome}</strong>
        <span style="background:#004E89;color:white;padding:3px 10px;border-radius:20px;font-size:13px;font-weight:700;">${fR(ent.totalVal)}</span>
      </div>
      <div class="g3" style="margin-bottom:8px;">
        <div style="background:white;border-radius:7px;padding:8px;text-align:center;">
          <div style="font-size:10px;color:#888;">Total corridas</div>
          <div style="font-size:18px;font-weight:700;color:#FF6B35;">${ent.corridas.length}</div>
        </div>
        <div style="background:white;border-radius:7px;padding:8px;text-align:center;">
          <div style="font-size:10px;color:#888;">At√© ${KM_LIMITE}km</div>
          <div style="font-size:14px;font-weight:700;color:#00C9A7;">${ent.abaixoKm}x<br><small>${fR(ent.valAbaixo)}</small></div>
        </div>
        <div style="background:white;border-radius:7px;padding:8px;text-align:center;">
          <div style="font-size:10px;color:#888;">Acima ${KM_LIMITE}km</div>
          <div style="font-size:14px;font-weight:700;color:#e74c3c;">${ent.acimaKm}x<br><small>${fR(ent.valAcima)}</small></div>
        </div>
      </div>
      <!-- Lista de corridas -->
      <details>
        <summary style="font-size:12px;color:#004E89;cursor:pointer;font-weight:600;">Ver ${ent.corridas.length} corridas ‚ñº</summary>
        <div style="margin-top:8px;">
          ${ent.corridas.map(c=>`<div style="padding:6px 0;border-bottom:1px solid #eee;font-size:11px;display:flex;justify-content:space-between;align-items:center;">
            <div>
              <strong>${c.cliente_nome||'Cliente'}</strong><br>
              <span style="color:#888;">${c.endereco_bairro||''} | ${parseFloat(c.distancia_km||0).toFixed(1)}km | ${c.created_at?.split('T')[0]||''}</span>
            </div>
            <span style="font-weight:700;color:#2e7d32;white-space:nowrap;">${fR(c.valor_corrida||c.valor_entregador)}</span>
          </div>`).join('')}
        </div>
      </details>
    </div>`).join('')}
  </div>

  <!-- GR√ÅFICO BARRAS: TOP BAIRROS -->
  <div class="secao" id="adm-fin-bairros-sec">
    <div class="s-title">üìç Top Bairros</div>
    <canvas id="chart-bairros-adm" height="160"></canvas>
  </div>

  <!-- M√âTRICAS FINANCEIRAS -->
  <div class="secao">
    <div class="s-title">üí° M√©tricas do Per√≠odo</div>
    <div id="adm-fin-metricas"></div>
  </div>

  <!-- RESUMO POR LOJA -->
  <div class="secao">
    <div class="s-title">üè™ Resumo por Loja</div>
    ${(lojas||[]).map(lj=>{
      const ljEnt=entregas.filter(e=>e.loja_id===lj.id);
      if(!ljEnt.length)return'';
      const ljSis=ljEnt.reduce((s,e)=>s+parseFloat(e.valor_sistema||0),0);
      const ljEntV=ljEnt.reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0);
      return`<div style="background:#f8f9fa;border-radius:10px;padding:10px;margin-bottom:8px;">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <strong>${lj.nome_loja||lj.nome}</strong>
          <span style="font-size:12px;color:#888;">${ljEnt.length} entregas</span>
        </div>
        <div class="g2b" style="margin-top:6px;gap:6px;">
          <div style="background:#e3f2fd;border-radius:6px;padding:7px;text-align:center;font-size:11px;">
            <div style="color:#888;">Taxa Sistema</div><strong style="color:#004E89;">${fR(ljSis)}</strong>
          </div>
          <div style="background:#e8f5e9;border-radius:6px;padding:7px;text-align:center;font-size:11px;">
            <div style="color:#888;">A Pagar Ent.</div><strong style="color:#2e7d32;">${fR(ljEntV)}</strong>
          </div>
        </div>
      </div>`;
    }).join('')}
  </div>`;

  // Renderiza gr√°ficos ap√≥s DOM atualizado
  setTimeout(()=>{
    // Gr√°fico de linha por dia
    if(dias.length>1){
      const ctx=document.getElementById('chart-dias');
      if(ctx){
        if(ctx._chart)ctx._chart.destroy();
        ctx._chart=new Chart(ctx,{
          type:'line',
          data:{
            labels:diasLabel,
            datasets:[
              {label:'Entregas',data:dias.map(d=>porDia[d].entregas),borderColor:'#FF6B35',backgroundColor:'rgba(255,107,53,.1)',tension:.3,fill:true,yAxisID:'y'},
              {label:'Taxa Sistema',data:dias.map(d=>porDia[d].sistema),borderColor:'#004E89',backgroundColor:'transparent',tension:.3,borderDash:[4,4],yAxisID:'y2'},
              {label:'Pago Entregad.',data:dias.map(d=>porDia[d].entregadores),borderColor:'#00C9A7',backgroundColor:'transparent',tension:.3,yAxisID:'y2'}
            ]
          },
          options:{responsive:true,plugins:{legend:{labels:{font:{size:10}}}},scales:{y:{position:'left',ticks:{font:{size:10}}},y2:{position:'right',grid:{drawOnChartArea:false},ticks:{font:{size:10},callback:v=>'R$'+v.toFixed(0)}}}}
        });
      }
    }
    // Gr√°fico barras bairros
    if(bairrosArr.length>0){
      const ctxB=document.getElementById('chart-bairros-adm');
      if(ctxB){
        if(ctxB._chart)ctxB._chart.destroy();
        ctxB._chart=new Chart(ctxB,{
          type:'bar',
          data:{
            labels:bairrosArr.map(b=>b[0]),
            datasets:[{
              label:'Entregas',
              data:bairrosArr.map(b=>b[1].cnt),
              backgroundColor:'rgba(0,78,137,.7)',
              borderColor:'#004E89',borderWidth:1,borderRadius:4
            }]
          },
          options:{responsive:true,plugins:{legend:{display:false}},scales:{x:{ticks:{font:{size:9},maxRotation:30}},y:{ticks:{font:{size:10},stepSize:1}}}}
        });
      } else {
        const sec=$('adm-fin-bairros-sec');if(sec)sec.style.display='none';
      }
    } else {
      const sec=$('adm-fin-bairros-sec');if(sec)sec.style.display='none';
    }

    // M√©tricas financeiras
    const metEl=$('adm-fin-metricas');
    if(metEl){
      metEl.innerHTML=`
      <div class="g2b" style="gap:8px;">
        <div style="background:#e3f2fd;border-radius:10px;padding:11px;text-align:center;">
          <div style="font-size:10px;color:#555;margin-bottom:4px;">üéüÔ∏è Ticket M√©dio</div>
          <div style="font-size:18px;font-weight:700;color:#004E89;">${fR(ticketMedio)}</div>
          <div style="font-size:10px;color:#888;">por corrida</div>
        </div>
        <div style="background:#e8f5e9;border-radius:10px;padding:11px;text-align:center;">
          <div style="font-size:10px;color:#555;margin-bottom:4px;">üìè Km Rodado</div>
          <div style="font-size:18px;font-weight:700;color:#2e7d32;">${kmTotal.toFixed(1)}km</div>
          <div style="font-size:10px;color:#888;">${fR(custoKm)}/km</div>
        </div>
      </div>
      <div style="margin-top:8px;background:#fff3e0;border-radius:10px;padding:11px;text-align:center;">
        <div style="font-size:10px;color:#555;margin-bottom:4px;">üìä M√©dia di√°ria</div>
        <div style="font-size:18px;font-weight:700;color:#e65100;">${dias.length>0?(entregas.length/dias.length).toFixed(1):0} entregas/dia</div>
      </div>`;
    }

    // Gr√°fico pizza
    if(entradoresArr.length>1){
      const ctx2=document.getElementById('chart-pizza');
      if(ctx2){
        if(ctx2._chart)ctx2._chart.destroy();
        ctx2._chart=new Chart(ctx2,{
          type:'doughnut',
          data:{
            labels:entradoresArr.map(e=>e.nome),
            datasets:[{data:entradoresArr.map(e=>e.corridas.length),backgroundColor:entradoresArr.map((_,i)=>coresEnt[i%coresEnt.length])}]
          },
          options:{responsive:false,plugins:{legend:{display:false}},cutout:'60%'}
        });
      }
    }
  },100);
}

async function toggleStAdm(id,st,tipo){
  const novo=st==='ativo'?'bloqueado':'ativo';
  await db.from('usuarios').update({status:novo}).eq('id',id);
  if(tipo==='loja')carregarAdmLojas();else carregarAdmEnt();
}
async function saveTaxAdm(id){
  const val=parseFloat($('tx-'+id).value);
  await db.from('usuarios').update({taxa_sistema:val}).eq('id',id);
  const m=$('tx-msg-'+id);m.textContent='Salvo!';setTimeout(()=>{m.textContent='';},2000);
}

async function carregarAdmImpersonar(){
  const{data:lojas}=await db.from('usuarios').select('id,nome_loja,nome').eq('tipo','loja');
  const{data:ents}=await db.from('usuarios').select('id,nome').eq('tipo','entregador');
  const selL=$('adm-sel-loja'),selE=$('adm-sel-ent');
  if(lojas)lojas.forEach(l=>{const o=document.createElement('option');o.value=l.id;o.textContent=l.nome_loja||l.nome;selL.appendChild(o);});
  if(ents)ents.forEach(e=>{const o=document.createElement('option');o.value=e.id;o.textContent=e.nome;selE.appendChild(o);});
}

async function admVerLoja(){
  const id=$('adm-sel-loja').value;if(!id)return;
  const el=$('adm-loja-view');el.innerHTML='<p>Carregando...</p>';
  const{data:lj}=await db.from('usuarios').select('*').eq('id',id).single();
  if(!lj){el.innerHTML='<p>Erro ao carregar</p>';return;}
  const{data:ents}=await db.from('entregas').select('*,entregador:entregador_id(nome)').eq('loja_id',id).neq('status','entregue').order('ordem_rota');
  const{data:assoc}=await db.from('loja_entregadores').select('*,e:entregador_id(nome,online,status)').eq('loja_id',id);
  const{data:rel}=await db.from('entregas').select('*,entregador:entregador_id(nome)').eq('loja_id',id).gte('created_at',iDia()).lte('created_at',fDia());
  const totH=rel?rel.length:0;
  const totSis=rel?rel.reduce((s,e)=>s+parseFloat(e.valor_sistema||0),0):0;
  const totEnt=rel?rel.reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0):0;
  el.innerHTML=`
    <div style="background:#e3f2fd;border-radius:10px;padding:12px;margin-bottom:10px;">
      <strong>${lj.nome_loja||lj.nome}</strong> | Codigo: <strong>${lj.codigo_loja||'---'}</strong><br>
      <small>${lj.endereco||''}</small><br>
      <small>Taxa sistema: ${fR(lj.taxa_sistema)} | Taxa entregador: ${fR(lj.taxa_entrega)}</small>
    </div>
    <div class="g3" style="margin-bottom:10px;">
      <div style="text-align:center;padding:8px;background:#fff3e0;border-radius:8px;"><p style="font-size:10px;color:#888;">Hoje</p><p style="font-size:18px;font-weight:700;color:#FF6B35;">${totH}</p></div>
      <div style="text-align:center;padding:8px;background:#e3f2fd;border-radius:8px;"><p style="font-size:10px;color:#888;">Sistema</p><p style="font-size:13px;font-weight:700;color:#004E89;">${fR(totSis)}</p></div>
      <div style="text-align:center;padding:8px;background:#e8f5e9;border-radius:8px;"><p style="font-size:10px;color:#888;">Entregad.</p><p style="font-size:13px;font-weight:700;color:#00C9A7;">${fR(totEnt)}</p></div>
    </div>
    <div style="margin-bottom:8px;"><strong>Entregadores vinculados:</strong><br>${(assoc||[]).map(a=>`<span class="badge ${a.e&&a.e.online?'b-online':'b-offline'}" style="margin:2px;">${a.e?a.e.nome:'?'}</span>`).join('')||'Nenhum'}</div>
    <div><strong>Pedidos ativos:</strong><br>${(!ents||!ents.length)?'<p style="color:#999;font-size:12px;">Nenhum pedido ativo</p>':ents.map(e=>`
      <div class="ecard ${e.status==='em_rota'?'rota':''}">
        <div style="display:flex;justify-content:space-between;"><strong>${e.numero_pedido?'#'+e.numero_pedido:e.cliente_nome||'Entrega'}</strong><span class="badge b-${e.status_detalhado||e.status}">${e.status_detalhado||e.status}</span></div>
        <p style="font-size:12px;color:#555;">&#128205; ${e.endereco_entrega}</p>
        ${e.entregador?`<p style="font-size:11px;color:#004E89;">&#128757; ${e.entregador.nome}</p>`:''}
        ${e.valor_corrida>0?`<span class="badge b-ativo">${fR(e.valor_corrida)}</span>`:''}
      </div>`).join('')}
    </div>`;
}

async function admVerEnt(){
  const id=$('adm-sel-ent').value;if(!id)return;
  const el=$('adm-ent-view');el.innerHTML='<p>Carregando...</p>';
  const{data:ent}=await db.from('usuarios').select('*').eq('id',id).single();
  if(!ent){el.innerHTML='<p>Erro</p>';return;}
  const{data:rota}=await db.from('entregas').select('*,loja:loja_id(nome_loja,nome)').eq('entregador_id',id).in('status',['aceito','em_rota','chegou_loja','saiu_entrega']).order('ordem_rota');
  const{data:ganhos}=await db.from('entregas').select('id,valor_corrida,valor_entregador').eq('entregador_id',id).gte('created_at',iDia()).lte('created_at',fDia());
  const totalGanhos=ganhos?ganhos.reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0):0;
  const{data:assoc}=await db.from('loja_entregadores').select('l:loja_id(nome_loja,nome)').eq('entregador_id',id);
  el.innerHTML=`
    <div style="background:#e8f5e9;border-radius:10px;padding:12px;margin-bottom:10px;">
      <strong>${ent.nome}</strong> <span class="badge ${ent.online?'b-online':'b-offline'}">${ent.online?'Online':'Offline'}</span><br>
      <small>Tel: ${ent.telefone||'-'} | Placa: ${ent.placa_moto||'-'} | Pix: ${ent.chave_pix||'-'}</small><br>
      <small>Lojas: ${(assoc||[]).map(a=>a.l?a.l.nome_loja||a.l.nome:'?').join(', ')||'Nenhuma'}</small><br>
      <small>Ganhos hoje: <strong>${fR(totalGanhos)}</strong> (${ganhos?ganhos.length:0} entregas)</small>
    </div>
    <strong>Rota atual:</strong><br>
    ${(!rota||!rota.length)?'<p style="color:#999;font-size:12px;">Sem entregas na rota.</p>':rota.map((e,i)=>`
      <div class="ecard rota">
        <div style="display:flex;justify-content:space-between;"><strong>${i+1}. ${e.numero_pedido?'#'+e.numero_pedido:e.cliente_nome||'Entrega'}</strong><span class="badge b-${e.status_detalhado||e.status}">${e.status_detalhado||e.status}</span></div>
        <p style="font-size:12px;color:#555;">&#128205; ${e.endereco_entrega}</p>
        <p style="font-size:11px;color:#888;">&#127978; ${e.loja?e.loja.nome_loja||e.loja.nome:'?'}</p>
        ${e.codigo_confirmacao?`<p style="font-size:11px;color:#8e44ad;">&#128273; Cod. Conf: ${e.codigo_confirmacao}</p>`:''}
        ${e.valor_corrida>0?`<span class="badge b-ativo">${fR(e.valor_corrida)}</span>`:''}
        <div class="row" style="margin-top:6px;flex-wrap:wrap;">
          <button class="btn-sm blue" onclick="admForcarStatus('${e.id}','entregue')">&#10003; Marcar Entregue (ADM)</button>
          <button class="btn-sm red" onclick="admForcarStatus('${e.id}','cancelado')">Cancelar</button>
        </div>
      </div>`).join('')}`;
}

async function admForcarStatus(id,status){
  await db.from('entregas').update({status,status_detalhado:status,entregue_at:status==='entregue'?new Date().toISOString():null}).eq('id',id);
  const sel=$('adm-sel-ent').value;if(sel)admVerEnt();
}

// ============ LOJA ============
async function initLoja(){
  const{data}=await db.from('usuarios').select('*').eq('id',U.id).single();
  if(data){
    // Preserva campos locais importantes que podem n√£o existir no banco
    const lojaAtivaLocal=U.loja_ativa_id||null;
    const lojaNomeLocal=U._loja_ativa_nome||null;
    const lojaCodLocal=U._loja_ativa_codigo||null;
    U={...U,...data};
    // Se o banco retornou null mas temos valor local, mant√©m o local
    if(!U.loja_ativa_id&&lojaAtivaLocal)U.loja_ativa_id=lojaAtivaLocal;
    if(!U._loja_ativa_nome&&lojaNomeLocal)U._loja_ativa_nome=lojaNomeLocal;
    if(!U._loja_ativa_codigo&&lojaCodLocal)U._loja_ativa_codigo=lojaCodLocal;
    salvarU();
  }
  $('loja-nome').textContent=U.nome_loja||U.nome;
  $('loja-cod').textContent=U.codigo_loja||'------';
  $('lj-ts').textContent=fR(U.taxa_sistema);
  // App logo removido ‚Äî wallpaper √© a identidade visual padr√£o
  // GPS toggle
  atuToggleGps(U.gps_validacao_obrigatorio||false);
  // Taxa tipo
  const tipoEl=$('lj-taxa-tipo');
  if(tipoEl&&U.taxa_tipo){tipoEl.value=U.taxa_tipo;toggleTaxaTipo();}
  if(U.taxa_tipo==='por_km'){
    if($('lj-taxa-base'))$('lj-taxa-base').value=parseFloat(U.taxa_entrega||0).toFixed(2);
    if($('lj-km-limite'))$('lj-km-limite').value=parseFloat(U.taxa_km_limite||5).toFixed(1);
    if($('lj-taxa-km-exc'))$('lj-taxa-km-exc').value=parseFloat(U.taxa_km_excedente||2).toFixed(2);
  }else if(U.taxa_tipo==='fixo_mais_km'){
    if($('lj-taxa-fixo-base'))$('lj-taxa-fixo-base').value=parseFloat(U.taxa_fixo_base||0).toFixed(2);
    if($('lj-taxa-por-ent'))$('lj-taxa-por-ent').value=parseFloat(U.taxa_entrega||0).toFixed(2);
    if($('lj-km-limite2'))$('lj-km-limite2').value=parseFloat(U.taxa_km_limite||7).toFixed(1);
    if($('lj-taxa-km-exc2'))$('lj-taxa-km-exc2').value=parseFloat(U.taxa_km_excedente||0).toFixed(2);
  }else{if($('lj-taxa-new'))$('lj-taxa-new').value=parseFloat(U.taxa_entrega||0).toFixed(2);}
  const{data:ent}=await db.from('entregas').select('id').eq('loja_id',U.id).gte('created_at',iDia()).lte('created_at',fDia());
  $('lj-hj').textContent=ent?ent.length:0;
  // Geocode loja
  if(U.loja_lat&&U.loja_lng){lojaGeoCache={lat:U.loja_lat,lng:U.loja_lng};}
  else if(U.endereco){geocode(U.endereco).then(g=>{if(g){lojaGeoCache=g;db.from('usuarios').update({loja_lat:g.lat,loja_lng:g.lng}).eq('id',U.id);}});}
  criarMapa('loja');await pullLj();
  ivs.mLj=setInterval(pullLj,5000);
  iniciarRealtimeDrivers('loja');
}

async function pullLj(){
  const{data:assoc}=await db.from('loja_entregadores').select('entregador_id').eq('loja_id',U.id);
  const el=$('lista-on-lj');
  if(!assoc||!assoc.length){el.innerHTML='<span style="font-size:12px;color:#999">Nenhum entregador vinculado.</span>';$('lj-online-cnt').textContent='0';return;}
  const ids=assoc.map(a=>a.entregador_id);
  const{data:todos}=await db.from('usuarios').select('id,nome,telefone,latitude,longitude,online').in('id',ids);
  const entsOnline=(todos||[]).filter(e=>e.online);
  $('lj-online-cnt').textContent=entsOnline.length;
  const{data:ativas}=entsOnline.length?await db.from('entregas').select('entregador_id').in('entregador_id',entsOnline.map(e=>e.id)).in('status',['aceito','em_rota','chegou_loja','saiu_entrega']):{data:[]};
  const comPedidoIds=new Set((ativas||[]).map(a=>a.entregador_id));
  const entsParaMapa=entsOnline.map(e=>({...e,com_pedido:comPedidoIds.has(e.id)}));
  // Lista clic√°vel ‚Äî clica no nome e o mapa foca nele
  el.innerHTML=entsOnline.length?entsOnline.map(e=>{
    const cp=comPedidoIds.has(e.id);
    const bg=cp?'#1565C0':'#2e7d32';
    const status=cp?'üîµ Em rota':'üü¢ Livre';
    return `<span onclick="focarEntregadorMapa('${e.id}')" style="background:${bg};color:white;padding:5px 11px;border-radius:20px;font-size:12px;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:5px;margin:2px;" title="Clique para ver no mapa">
      üõµ ${e.nome} <span style="font-size:10px;opacity:.85">${status}</span>
    </span>`;
  }).join(''):'<span style="font-size:12px;color:#999">Nenhum online agora.</span>';
  await atuMapa('loja',entsParaMapa);
}

async function salvarTaxaLj(){
  const tipo=v('lj-taxa-tipo');
  let base,kmLim,kmExc,fixoBase=0;
  if(tipo==='por_km'){
    base=parseFloat(v('lj-taxa-base')||0);
    kmLim=parseFloat(v('lj-km-limite')||5);
    kmExc=parseFloat(v('lj-taxa-km-exc')||0);
  }else if(tipo==='fixo_mais_km'){
    fixoBase=parseFloat(v('lj-taxa-fixo-base')||0);
    base=parseFloat(v('lj-taxa-por-ent')||0);
    kmLim=parseFloat(v('lj-km-limite2')||7);
    kmExc=parseFloat(v('lj-taxa-km-exc2')||0);
  }else{
    base=parseFloat(v('lj-taxa-new')||0);kmLim=5;kmExc=0;
  }
  // Tenta salvar com taxa_fixo_base
  let{error}=await db.from('usuarios').update({taxa_entrega:base,taxa_tipo:tipo,taxa_km_limite:kmLim,taxa_km_excedente:kmExc,taxa_fixo_base:fixoBase}).eq('id',U.id);
  // Se coluna taxa_fixo_base nao existe, salva sem ela
  if(error&&error.message&&error.message.includes('taxa_fixo_base')){
    const r2=await db.from('usuarios').update({taxa_entrega:base,taxa_tipo:tipo,taxa_km_limite:kmLim,taxa_km_excedente:kmExc}).eq('id',U.id);
    error=r2.error;
  }
  if(error){
    $('taxa-msg').style.color='#e53935';
    $('taxa-msg').textContent='‚ùå Erro ao salvar: '+error.message;
    return;
  }
  U.taxa_entrega=base;U.taxa_tipo=tipo;U.taxa_km_limite=kmLim;U.taxa_km_excedente=kmExc;U.taxa_fixo_base=fixoBase;
  salvarU();
  $('taxa-msg').style.color='#27ae60';$('taxa-msg').textContent='‚úÖ Configuracao salva!';
  setTimeout(()=>{$('taxa-msg').textContent='';},2000);
}

// Avisar pedido pronto (toca alerta em todos entregadores vinculados e online)
async function avisarPedidoPronto(){
  // Marca pedidos pendentes sem entregador como pedido_pronto=true
  const{data:ents}=await db.from('entregas').select('id').eq('loja_id',U.id).eq('status','pendente');
  if(!ents||!ents.length){alert('Nenhum pedido pendente para avisar.');return;}
  for(const e of ents)await db.from('entregas').update({pedido_pronto:true}).eq('id',e.id);
  alert('Aviso enviado! Os entregadores online serao notificados.');
}

// Calcular valor corrida baseado no endereco
async function atualizarValorCorrida(){
  const rua=v('p-rua'),num=v('p-nend'),bairro=v('p-bairro');
  if(!rua){$('p-valor-corrida').classList.add('hidden');return;}
  const endFull=fEnd(rua,num,bairro,v('p-cidade')||'Ribeirao Preto','');
  const geo=await geocode(endFull);
  if(!geo){$('p-valor-corrida').classList.add('hidden');return;}
  const lojaLat=lojaGeoCache.lat||RP_LAT,lojaLng=lojaGeoCache.lng||RP_LNG;
  const dist=distKm(lojaLat,lojaLng,geo.lat,geo.lng);
  const valor=calcularValorCorrida(dist,U.taxa_tipo||'fixo',U.taxa_entrega||0,U.taxa_km_limite||5,U.taxa_km_excedente||0);
  $('p-valor-txt').textContent=fR(valor);
  $('p-dist-txt').textContent='Distancia estimada: '+dist.toFixed(1)+' km';
  $('p-valor-corrida').classList.remove('hidden');
  window._pedidoGeo={lat:geo.lat,lng:geo.lng,dist,valor};
}

function abrirCamera(){$('ocr-camera').click();}
function abrirGaleria(){$('ocr-galeria').click();}

function abrirNovoPedido(){
  openM('pedido');
  ['ocr-camera','ocr-galeria'].forEach(id=>{const e=$(id);if(e)e.value='';});
  $('ocr-prev').classList.add('hidden');$('ocr-load').classList.add('hidden');
  ['p-num','p-cli','p-tel','p-rua','p-nend','p-bairro','p-obs','p-comp','p-cod-conf'].forEach(id=>{const e=$(id);if(e)e.value='';});
  $('p-cidade').value=U.endereco_cidade||U.cidade||'Ribeirao Preto';
  const ca=$('p-codconf-area');if(ca)ca.classList.add('hidden');
  clearM('ped-msg');$('p-valor-corrida').classList.add('hidden');
  window._pedidoGeo=null;
}

// ‚îÄ‚îÄ PARSER DE COMANDA BRASILEIRA (iFood, Takeat, Stone, etc.) ‚îÄ‚îÄ
function parsarComandaBR(txt){
  const lines=txt.split('\n').map(l=>l.trim()).filter(Boolean);
  const r={numero_pedido:'',nome_cliente:'',telefone:'',rua:'',numero_end:'',bairro:'',complemento:'',codigo_confirmacao:''};

  // N√∫mero do pedido: "Pedido #178" ou "Pedido #88" ou n√∫mero isolado no topo (4-6 d√≠gitos)
  // Tamb√©m reconhece: "5823" no in√≠cio, "EXPEDICAO 5823", "# 5823"
  const mHash=txt.match(/[Pp]edido\s*#?\s*(\d+)/)||txt.match(/EXPEDI[C√á][A√É]O\s*#?\s*(\d+)/i)||txt.match(/^\s*#\s*(\d{3,6})\s*$/m);
  if(mHash){r.numero_pedido=mHash[1];}
  else{
    // N√∫mero isolado nas primeiras 5 linhas (pedido de Stone/gen√©rico)
    for(let i=0;i<Math.min(5,lines.length);i++){
      if(/^\d{3,6}$/.test(lines[i])){r.numero_pedido=lines[i];break;}
    }
  }

  // Telefone: (16) 99xxx-xxxx ou 16 99xxx xxxx ou Tel: ...
  const mTel=txt.match(/[Tt]el(?:efone)?[:\s.]*\(?(\d{2})\)?[\s.-]?(\d{4,5})[\s.-]?(\d{4})/);
  if(mTel){r.telefone=mTel[1]+mTel[2]+mTel[3];}
  else{
    const mTel2=txt.match(/\((\d{2})\)\s*(\d{4,5})-?(\d{4})/);
    if(mTel2){r.telefone=mTel2[1]+mTel2[2]+mTel2[3];}
    else{
      const mTel3=txt.match(/(?<!\d)(\d{2})\s(\d{4,5})[\s-](\d{4})(?!\d)/);
      if(mTel3){r.telefone=mTel3[1]+mTel3[2]+mTel3[3];}
    }
  }

  // Nome do cliente: "Cliente: Nome" ou "cliente Nome"
  const mCli=txt.match(/[Cc]liente[:\s]+([^\n\r0-9#@]+?)(?:\n|$)/);
  if(mCli){r.nome_cliente=mCli[1].trim().replace(/\s+/g,' ');}
  else{
    // iFood: nome pr√≥prio em linha isolada (2+ palavras, primeira letra mai√∫scula)
    const excluir=['Delivery','iFood','Cupim','Lanche','Pedido','Total','Pagamento','Itens','Taxa','Entrega','Prevista','Cobrar','Valor','Forma','Bairro','Cidade','Comp','Ref','CEP','Data','Desc','Observ','CODIGO','Localiz'];
    for(const l of lines){
      if(l.length<4||l.length>50)continue;
      if(excluir.some(e=>l.includes(e)))continue;
      if(l.match(/^\d/)|| l.includes(':')|| l.includes('R$')|| l.includes('www'))continue;
      if(/^[A-Z√Å√Ä√É√Ç√â√ä√ç√ì√î√ï√ö√á][a-z√°√†√£√¢√©√™√≠√≥√¥√µ√∫√ß]+(?:\s+[A-Z√Å√Ä√É√Ç√â√ä√ç√ì√î√ï√ö√á][a-z√°√†√£√¢√©√™√≠√≥√¥√µ√∫√ß]+)+$/.test(l)){
        r.nome_cliente=l;break;
      }
    }
  }

  // Endere√ßo multi-formato: "Endere√ßo: Rua X, 200", "End: Av Y 100", "R. Manoel Ache, 206"
  const mEnd=txt.match(/[Ee]ndere[√ßc]o[:\s]+([^,\n\r]+),\s*(\d+)/)||
             txt.match(/\bEnd(?:ereco)?[:\s]+([^,\n\r]+),\s*(\d+)/i)||
             txt.match(/Localiza[c√ß][a√£]o[:\s]+([^,\n\r]+),\s*(\d+)/i);
  if(mEnd){r.rua=mEnd[1].trim();r.numero_end=mEnd[2];}
  else{
    // Linha com tipo de logradouro + nome + v√≠rgula + n√∫mero
    const mEnd2=txt.match(/(?:^|\n)\s*((?:Rua|Av(?:enida)?\.?|R\.|Trav(?:essa)?\.?|Alameda|Estrada|Est\.|Al\.)\s+[^\n,]+),\s*(\d+)/im);
    if(mEnd2){r.rua=mEnd2[1].trim();r.numero_end=mEnd2[2];}
    else{
      // Fallback: logradouro + espa√ßo + n√∫mero sem v√≠rgula (ex: "Rua das Flores 123")
      const mEnd3=txt.match(/(?:^|\n)\s*((?:Rua|Av(?:enida)?\.?|R\.)\s+[^\n\d,]{4,40})\s+(\d{1,5})(?:\s|,|$)/im);
      if(mEnd3)r.rua=mEnd3[1].trim();
    }
  }

  // Bairro: label expl√≠cito ou linha ap√≥s endere√ßo
  const mBairro=txt.match(/[Bb]airro[:\s]+([^\n\r]+)/)||txt.match(/B[:\s]+([A-Z√Å-√ö][a-z√°√†√£√¢√©√™√≠√≥√¥√µ√∫√ß][^\n\r]{2,30})/);
  if(mBairro){r.bairro=mBairro[1].trim().replace(/\s+/g,' ').replace(/^(Bairro|B)\s*/i,'');}

  // Complemento: "Comp: Ap 22" ‚Äî ignora tra√ßo sozinho
  const mComp=txt.match(/[Cc]omp(?:lemento)?[:\s]+([^\n\r]+)/);
  if(mComp){const c=mComp[1].trim();if(c!=='-'&&c!=='‚Äì'&&c!=='')r.complemento=c;}

  // C√≥digo de coleta iFood: "CODIGO DE COLETA PARCEIRA: 3266"
  const mCod=txt.match(/C[O√ì]DIGO\s+DE\s+COLETA\s+PARCEIRA[:\s]*(\d{4})/i);
  if(mCod){r.codigo_confirmacao=mCod[1];}

  return r;
}

async function lerComanda(event){
  const file=event.target.files[0];if(!file)return;
  const url=URL.createObjectURL(file);
  $('ocr-img').src=url;$('ocr-prev').classList.remove('hidden');
  const loadEl=$('ocr-load');
  loadEl.classList.remove('hidden');
  loadEl.innerHTML='<span style="font-size:12px;color:#555">üîç Preparando imagem...</span>';

  try{
    // Redimensiona imagem para max 1200px
    const base64=await new Promise((res,rej)=>{
      const img=new Image();
      img.onload=()=>{
        const MAX=1200;
        let w=img.width,h=img.height;
        if(w>MAX||h>MAX){if(w>h){h=Math.round(h*MAX/w);w=MAX;}else{w=Math.round(w*MAX/h);h=MAX;}}
        const cv=document.createElement('canvas');cv.width=w;cv.height=h;
        const ctx=cv.getContext('2d');ctx.drawImage(img,0,0,w,h);
        res(cv.toDataURL('image/jpeg',0.85).split(',')[1]);
      };
      img.onerror=rej;
      img.src=URL.createObjectURL(file);
    });

    loadEl.innerHTML='<span style="font-size:12px;color:#555">üîç Lendo comanda via Google Vision... aguarde</span>';

    // ‚îÄ‚îÄ GOOGLE CLOUD VISION API ‚îÄ‚îÄ
    const resp=await fetch(`https://vision.googleapis.com/v1/images:annotate?key=${getGoogleKey()}`,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        requests:[{
          image:{content:base64},
          features:[{type:'TEXT_DETECTION',maxResults:1}]
        }]
      })
    });

    loadEl.classList.add('hidden');

    if(!resp.ok){
      const errData=await resp.json().catch(()=>({}));
      const errMsg=errData.error?.message||resp.statusText||String(resp.status);
      const errCode=errData.error?.code||resp.status;
      const errDetails=errData.error?.details||errData.error?.errors||[];
      console.error('[OCR Google]',errCode,errMsg,errDetails);
      // Mostra mensagem t√©cnica completa para diagn√≥stico
      let errTip='';
      if(errCode===400&&errMsg.toLowerCase().includes('not valid')){
        errTip='<br><small style="color:#555;line-height:1.6;">‚öôÔ∏è Causa: <strong>Cloud Vision API n√£o est√° ativada</strong> no projeto.<br>Solu√ß√£o: <a href="https://console.cloud.google.com/apis/library/vision.googleapis.com" target="_blank" style="color:#004E89;">Clique aqui para ativar a API</a> ou acesse:<br>console.cloud.google.com ‚Üí Biblioteca ‚Üí Cloud Vision API ‚Üí Ativar</small>';
      }else if(errCode===403){
        errTip='<br><small style="color:#555;">‚öôÔ∏è Permiss√£o negada. Verifique se a Cloud Vision API est√° ativada.</small>';
      }
      showM('ped-msg','‚ùå Google Vision ('+errCode+'): '+errMsg+errTip,false);
      return;
    }

    const data=await resp.json();
    const rawText=data.responses?.[0]?.textAnnotations?.[0]?.description||'';

    if(!rawText){
      showM('ped-msg','‚ùå N√£o consegui ler texto na imagem. Tente foto mais n√≠tida e centralizada.',false);
      return;
    }

    // Parseia o texto extra√≠do
    const parsed=parsarComandaBR(rawText);

    // Preenche campos
    if(parsed.numero_pedido)$('p-num').value=parsed.numero_pedido;
    if(parsed.nome_cliente)$('p-cli').value=parsed.nome_cliente;
    if(parsed.telefone)$('p-tel').value=parsed.telefone;
    if(parsed.rua)$('p-rua').value=parsed.rua;
    if(parsed.numero_end)$('p-nend').value=parsed.numero_end;
    if(parsed.bairro)$('p-bairro').value=parsed.bairro;
    if(parsed.complemento)$('p-comp').value=parsed.complemento;
    window._ocrCodConf=parsed.codigo_confirmacao||'';
    if(parsed.codigo_confirmacao){
      const ca=$('p-codconf-area');if(ca)ca.classList.remove('hidden');
      $('p-cod-conf').value=parsed.codigo_confirmacao;
    }
    setTimeout(atualizarValorCorrida,400);

    const preenchidos=[parsed.nome_cliente,parsed.rua,parsed.numero_end,parsed.bairro].filter(Boolean).length;
    if(preenchidos>=3)showM('ped-msg','‚úÖ Comanda lida com sucesso! Confira os campos.',true);
    else if(preenchidos>=1)showM('ped-msg','‚ö†Ô∏è Leitura parcial ‚Äî complete os campos vazios.',false);
    else showM('ped-msg','‚ùå N√£o consegui ler. Preencha manualmente.',false);

  }catch(err){
    loadEl.classList.add('hidden');
    console.error('[OCR erro]',err);
    const msg=err.message||'';
    if(msg.includes('Failed to fetch')||msg.includes('NetworkError')){
      showM('ped-msg','‚ùå Sem conex√£o com a internet. Verifique a rede e tente novamente.',false);
    }else{
      showM('ped-msg','‚ùå Erro ao processar imagem. Tente novamente.',false);
    }
  }
}

// Parser inteligente ‚Äî suporta iFood, Takeat e sistemas similares
function parsearComanda(txt){
  const t=txt.replace(/\r/g,'').replace(/[ \t]+/g,' ');
  const linhas=t.split('\n').map(l=>l.trim()).filter(l=>l.length>0);
  const r={numero_pedido:'',nome_cliente:'',telefone:'',rua:'',numero_end:'',bairro:'',complemento:'',codigo_confirmacao:''};

  // ‚îÄ‚îÄ DETECTAR FORMATO ‚îÄ‚îÄ
  const isTakeat=/Takeat|takeat\.app|DELIVERY\s*\n.*Pedido #/i.test(t);
  const isIfood=/iFood|EXPEDICAO|COLETA PARCEIRA|Entrega Propria/i.test(t);

  // ‚îÄ‚îÄ NUMERO DO PEDIDO ‚îÄ‚îÄ
  // Takeat: "Pedido #178"  |  iFood: linha isolada "8589"
  const mPedTakeat=t.match(/Pedido\s*#?(\d+)/i);
  if(mPedTakeat){r.numero_pedido=mPedTakeat[1];}
  else{
    for(const l of linhas){if(/^\d{4,5}$/.test(l)){r.numero_pedido=l;break;}}
    if(!r.numero_pedido){const m=t.match(/Pedido[:\s]+(\d+)/i);if(m)r.numero_pedido=m[1];}
  }

  // ‚îÄ‚îÄ CODIGO DE COLETA iFood ‚îÄ‚îÄ
  const mCod=t.match(/(?:COLETA PARCEIRA|CODIGO DE COLETA)[:\s]+(\d{3,6})/i);
  if(mCod)r.codigo_confirmacao=mCod[1];

  // ‚îÄ‚îÄ NOME DO CLIENTE ‚îÄ‚îÄ
  if(isTakeat){
    // Takeat: "Cliente: Fulano" ou "Cliente:Fulano"
    const mNome=t.match(/Cliente[:\s]+([^\n]+)/i);
    if(mNome){
      const nome=mNome[1].trim();
      // Rejeita se for "whats" ou muito curto (bug de sistema)
      if(nome.length>2&&!/^(whats|zap|app|test)/i.test(nome))r.nome_cliente=nome;
    }
  } else if(isIfood){
    // iFood: nome aparece ap√≥s "Localizador:" ou "Primeiro pedido!"
    const idxLoc=linhas.findIndex(l=>/localizador/i.test(l));
    const idxPrim=linhas.findIndex(l=>/primeiro pedido/i.test(l));
    const idxInicio=Math.max(idxLoc,idxPrim);
    if(idxInicio>-1){
      for(let i=idxInicio+1;i<Math.min(idxInicio+5,linhas.length);i++){
        const l=linhas[i];
        if(pareceNomeCliente(l)){r.nome_cliente=l;break;}
      }
    }
    if(!r.nome_cliente){
      // Fallback: busca em todo texto
      for(const l of linhas){if(pareceNomeCliente(l)){r.nome_cliente=l;break;}}
    }
  }

  // ‚îÄ‚îÄ ENDERECO ‚îÄ‚îÄ
  // Takeat: "Endere√ßo: Rua X, 200"  |  iFood: "Endereco: Rua X, 17\n5"
  const mEndLabel=t.match(/Endere[c√ß]o[:\s]+([^\n]+)/i);
  if(mEndLabel){
    const endStr=mEndLabel[1].trim();
    // Tenta separar rua e n√∫mero: "Rua X, 200" ou "R. X, 200"
    const mRuaNum=endStr.match(/^(.+?)[,\s]+(\d+)\s*$/);
    if(mRuaNum){r.rua=mRuaNum[1].trim();r.numero_end=mRuaNum[2];}
    else{r.rua=endStr;}
  } else {
    // Sem label, busca linha que come√ßa com Rua/Av
    for(let i=0;i<linhas.length;i++){
      const l=linhas[i];
      const mEnd=l.match(/^((?:Rua|Avenida|Av\.|R\.|Al\.|Alameda|Travessa)\s+[^,\n]+?)(?:[,\s]+(\d+))?$/i);
      if(mEnd){
        r.rua=mEnd[1].trim();
        const numL=mEnd[2]||'';
        const prox=(linhas[i+1]||'').trim();
        // iFood: "17\n5" = 175
        if(numL&&/^\d+$/.test(prox)&&prox.length<=3){r.numero_end=numL+prox;}
        else if(numL){r.numero_end=numL;}
        else if(/^\d{1,5}$/.test(prox)){r.numero_end=prox;}
        break;
      }
    }
  }

  // ‚îÄ‚îÄ BAIRRO ‚îÄ‚îÄ
  const mBairro=t.match(/Bairro[:\s]+([^\n]+)/i);
  if(mBairro){
    r.bairro=mBairro[1]
      .replace(/\s*[\(\[][^\)\]]*[\)\]]/g,'')
      .replace(/\s*-\s*S[PQ-Z]\b.*/i,'')
      .replace(/\s*-?\s*CEP.*/i,'')
      .replace(/\s*\(\s*S-?\d+\s*\)/g,'')
      .trim();
    // Remove tra√ßo solit√°rio (Takeat usa "Comp: -")
    if(r.bairro==='-')r.bairro='';
  }

  // ‚îÄ‚îÄ COMPLEMENTO ‚îÄ‚îÄ
  const mComp=t.match(/(?:Comp(?:lemento)?)[:\s]+([^\n]+)/i);
  if(mComp){
    r.complemento=mComp[1].replace(/Bairro.*/i,'').trim();
    if(r.complemento==='-'||r.complemento==='- ')r.complemento='';
  }

  // ‚îÄ‚îÄ TELEFONE ‚îÄ‚îÄ
  // Takeat: "Tel: (16) 98157-3642"  |  iFood: "ID: 43421475"
  const mTelLabel=t.match(/Tel(?:efone)?[:\s]+([^\n]+)/i);
  if(mTelLabel){
    const tel=mTelLabel[1].replace(/\D/g,'');
    if(tel.length>=8)r.telefone=tel;
  }
  if(!r.telefone){
    const mId=t.match(/ID[:\s]+(\d{8,11})/i);
    if(mId)r.telefone=mId[1];
  }
  if(!r.telefone){
    const mTel2=t.match(/\(?\d{2}\)?\s?\d{4,5}[-\s]?\d{4}/);
    if(mTel2)r.telefone=mTel2[0].replace(/\D/g,'');
  }

  return r;
}

// Fun√ß√£o auxiliar: verifica se linha parece nome de cliente (para iFood)
function pareceNomeCliente(l){
  const naoNome=/^(Primeiro pedido|Data:|Entrega|Localizador|CODIGO|POR FAVOR|iFood|Steak|ITEM|Festival|Pagamento|Online|Valor|Taxa|Desconto|Cobrar|Rua |Av\.|Bairro|Comp|Cidade|EXPEDICAO|Entrega Propria|PEDIDO|0800|Tel|Fone|\*|\d{4}|Cupim|Paulim|Delivery|Store|Barbecue)/i;
  if(!l||l.length<4||l.length>60)return false;
  if(naoNome.test(l))return false;
  if(/\d{5,}/.test(l))return false;
  if(/R\$/.test(l))return false;
  if(l.includes(':'))return false;
  // Deve ter 2+ palavras com pelo menos 2 letras cada
  const palavras=l.split(' ').filter(p=>/[a-zA-Z√Ä-√∫]{2,}/.test(p));
  return palavras.length>=2;
}


async function salvarPedido(){
  const rua=v('p-rua');if(!rua){showM('ped-msg','Informe a rua de entrega');return;}
  const num=v('p-nend'),bairro=v('p-bairro'),cidade=v('p-cidade')||'Ribeirao Preto',comp=v('p-comp');
  const geo=window._pedidoGeo;
  const valor=geo?geo.valor:(U.taxa_entrega||0);
  const dist=geo?geo.dist:0;
  const dados={
    loja_id:U.id,
    numero_pedido:v('p-num'),cliente_nome:v('p-cli'),cliente_telefone:v('p-tel'),
    endereco_entrega:fEnd(rua,num,bairro,cidade,comp),
    endereco_rua:rua,endereco_numero:num,endereco_bairro:bairro,endereco_cidade:cidade,endereco_complemento:comp,
    valor_sistema:parseFloat(U.taxa_sistema||0),
    valor_entregador:parseFloat(valor),
    valor_corrida:parseFloat(valor),
    distancia_km:parseFloat(dist),
    lat_entrega:geo?geo.lat:null,lng_entrega:geo?geo.lng:null,
    status:'pendente',status_detalhado:'pendente',ordem_rota:99,
    pedido_pronto:false,
    codigo_confirmacao:window._ocrCodConf||''
  };
  const{error}=await db.from('entregas').insert([dados]);
  if(error){showM('ped-msg','Erro: '+error.message);return;}
  showM('ped-msg','Pedido salvo! '+fR(valor),true);
  const{data:ent}=await db.from('entregas').select('id').eq('loja_id',U.id).gte('created_at',iDia()).lte('created_at',fDia());
  $('lj-hj').textContent=ent?ent.length:0;
  setTimeout(()=>closeM('pedido'),1300);
}

// Guarda o plano de rota para confirma√ß√£o
let _rotaPlanoGrupos=[];
let _rotaPlanoEnts=[];

// ============================================================
// DISTRIBUI√á√ÉO INTELIGENTE COM IA
// ============================================================
let _qtdEntData={}; // {entId: {nome, qtd}}
let _rotaIAGrupos=[]; // [{entId, entNome, pedidos:[]}]

// Salva/carrega limite GLOBAL da loja (√∫nico para todos os entregadores)
function salvarLimiteGlobal(qtd){
  localStorage.setItem('loja_limite_global_'+U.id, Math.min(10,Math.max(1,qtd)));
}
function carregarLimiteGlobal(){
  return parseInt(localStorage.getItem('loja_limite_global_'+U.id)||'4')||4;
}
// Mant√©m fun√ß√µes antigas para compatibilidade (n√£o usadas mais)
function salvarLimiteEnt(entId,qtd){}
function carregarLimiteEnt(entId){return carregarLimiteGlobal();}

let _limiteGlobal=4; // limite de pedidos por entregador (configura√ß√£o da loja)

function ajustarLimiteGlobal(delta){
  _limiteGlobal=Math.min(10,Math.max(1,_limiteGlobal+delta));
  const el=$('qtd-limite-val');if(el)el.textContent=_limiteGlobal;
  salvarLimiteGlobal(_limiteGlobal);
  // Atualiza _qtdEntData com o novo limite para todos
  Object.keys(_qtdEntData).forEach(id=>{_qtdEntData[id].qtd=_limiteGlobal;});
  atuQtdTotal(window._qtdPendTotal||0);
}

async function abrirDefinirQuantidade(){
  const{data:peds}=await db.from('entregas').select('id,numero_pedido,cliente_nome,endereco_entrega,distancia_km,lat_entrega,lng_entrega').eq('loja_id',U.id).eq('status','pendente');
  if(!peds||!peds.length){alert('Sem pedidos pendentes para distribuir.');return;}

  const{data:assoc}=await db.from('loja_entregadores').select('entregador_id,e:entregador_id(id,nome,online)').eq('loja_id',U.id);
  const online=(assoc||[]).filter(a=>a.e&&a.e.online);
  if(!online.length){alert('Nenhum entregador online no momento.');return;}

  // Filtra entregadores que J√Å T√äM pedidos ativos ‚Äî n√£o podem receber novas rotas
  const idsOnline=online.map(a=>a.entregador_id);
  const{data:ocupados}=await db.from('entregas').select('entregador_id').in('entregador_id',idsOnline).in('status',['aceito','em_rota','chegou_loja','saiu_entrega']);
  const idsOcupados=new Set((ocupados||[]).map(x=>x.entregador_id));
  const livres=online.filter(a=>!idsOcupados.has(a.entregador_id));
  const emRota=online.filter(a=>idsOcupados.has(a.entregador_id));

  if(!livres.length){
    alert('Todos os entregadores online j√° est√£o com pedidos em andamento. Aguarde finalizarem para distribuir novas rotas.');
    return;
  }

  // Carrega limite global salvo
  _limiteGlobal=carregarLimiteGlobal();
  const el=$('qtd-limite-val');if(el)el.textContent=_limiteGlobal;

  // Monta _qtdEntData apenas com entregadores LIVRES
  _qtdEntData={};
  livres.forEach(a=>{_qtdEntData[a.entregador_id]={nome:a.e.nome,qtd:_limiteGlobal};});
  _rotaPlanoEnts=livres;

  // Monta lista visual dos entregadores
  const listLivres=livres.map(a=>`
    <div style="display:flex;align-items:center;gap:10px;padding:9px 12px;background:#f0faf5;border:1.5px solid #00C9A7;border-radius:9px;margin-bottom:7px;">
      <div style="font-size:20px;">üõµ</div>
      <div style="flex:1;">
        <div style="font-weight:700;font-size:13px;">${a.e.nome}</div>
        <div style="font-size:11px;color:#2e7d32;font-weight:600;">‚úÖ Livre ‚Äî receber√° at√© ${_limiteGlobal} pedido${_limiteGlobal>1?'s':''}</div>
      </div>
    </div>`).join('');

  const listOcupados=emRota.length?`<div style="margin-top:4px;margin-bottom:10px;">
    <p style="font-size:11px;font-weight:700;color:#e65100;margin-bottom:5px;">üîµ Em rota (n√£o receber√£o pedidos agora):</p>
    ${emRota.map(a=>`<div style="display:flex;align-items:center;gap:8px;padding:7px 10px;background:#fff3e0;border-radius:8px;margin-bottom:5px;opacity:.7;">
      <span style="font-size:16px;">üõµ</span>
      <div style="font-size:12px;color:#e65100;font-weight:600;">${a.e.nome} ‚Äî finalizando entregas...</div>
    </div>`).join('')}
  </div>`:'';

  $('qtd-ent-body').innerHTML=`
    <p style="font-size:12px;font-weight:700;color:#555;margin-bottom:8px;">Entregadores dispon√≠veis (${livres.length}):</p>
    ${listLivres}${listOcupados}`;

  atuQtdTotal(peds.length);
  $('qtd-msg').textContent='';
  window._qtdPendTotal=peds.length;
  window._qtdPendPeds=peds;
  closeM('rota');
  openM('qtd-ent');
}

// Mantida por compatibilidade (n√£o usada na nova UI)
function ajustarQtd(entId,delta){}

function atuQtdTotal(total){
  const nLivres=Object.keys(_qtdEntData).length;
  const capacidade=nLivres*(_limiteGlobal||4);
  const el=$('qtd-total-info');
  if(!el)return;
  if(total<=0){el.innerHTML='Sem pedidos pendentes.';el.style.background='#f5f5f5';return;}
  if(capacidade>=total){
    el.innerHTML=`‚úÖ <strong>${nLivres}</strong> entregador${nLivres>1?'es':''} √ó <strong>${_limiteGlobal||4}</strong> pedidos = capacidade de <strong>${capacidade}</strong> (${total} pendentes)`;
    el.style.background='#e8f5e9';
  } else {
    el.innerHTML=`‚ö†Ô∏è Capacidade: <strong>${capacidade}</strong> pedidos, mas h√° <strong>${total}</strong> pendentes ‚Äî <span style="color:#c62828;font-weight:700;">${total-capacidade} ficam sem entregador</span>`;
    el.style.background='#ffebee';
  }
}

async function gerarRotaComIA(){
  const peds=window._qtdPendPeds||[];
  if(!peds.length){showM('qtd-msg','Sem pedidos pendentes.',false);return;}

  const distribuicao=Object.entries(_qtdEntData).map(([id,v])=>([id,{...v,qtd:_limiteGlobal}]));
  if(!distribuicao.length){showM('qtd-msg','‚ö†Ô∏è Nenhum entregador dispon√≠vel.',false);return;}

  const btn=$('btn-gerar-rota');
  btn.textContent='‚è≥ Calculando rotas...';btn.disabled=true;
  showM('qtd-msg','Otimizando rotas...',true);

  const lojaLat=lojaGeoCache.lat||RP_LAT,lojaLng=lojaGeoCache.lng||RP_LNG;

  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  // FUN√á√ÉO: normaliza endere√ßo ‚Üí chave "logradouro + n√∫mero"
  // Resistente a varia√ß√µes de prefixo (Av/Avenida/R/Rua), acentos,
  // mai√∫sculas, complementos (Apt, Bloco, Torre, etc.)
  // Ex1: "Av. Presidente Castelo Branco, 1865 - Castelo Branco"  ‚Üí "presidente castelo branco 1865"
  // Ex2: "AVENIDA PRESIDENTE CASTELO BRANCO, 1865 - Ribeirao Preto" ‚Üí "presidente castelo branco 1865"
  // Ex3: "Consumidor Eletronica - AVENIDA PRES. CASTELO BRANCO, 1865" ‚Üí "castelo branco 1865"
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function chaveEnd(end){
    if(!end||!end.trim())return '_sem_end_'+Math.random();
    let s=end.toLowerCase()
      .normalize('NFD').replace(/[\u0300-\u036f]/g,'') // remove acentos
      // Remove prefixos de logradouro
      .replace(/\b(avenida|avenue|av\.?|rua|r\.?|alameda|al\.?|travessa|tv\.?|estrada|est\.?|praca|pca\.?|rodovia|rod\.?|viela|vila|v\.?)\b/g,' ')
      // Remove complementos (tudo que vem depois)
      .replace(/\b(apto?|apartamento|ap\.?|bloco|bl\.?|torre|t\.?|sala|sl\.?|casa|lote|lt\.?|cond|condominio|kit|subsetor|setor|s-\d+|s\d+|conjunto|cj\.?)\b.*/,'')
      // Remove cidade/bairro depois do tra√ßo ou v√≠rgula final
      .replace(/[-,]\s*[a-z\s]{3,}$/,'')
      .replace(/[^a-z0-9\s]/g,' ')
      .replace(/\s+/g,' ').trim();
    // Extrai: palavras significativas do logradouro + n√∫mero
    // Regex: captura "texto com pelo menos 3 chars" + "n√∫mero com 2+ d√≠gitos"
    const m=s.match(/([a-z][a-z0-9\s]{2,}?)\s+(\d{2,5})\b/);
    if(m){
      const palavras=m[1].trim().split(/\s+/);
      // Pega as 3 palavras mais √∫nicas (remove artigos/preposi√ß√µes curtas)
      const filtradas=palavras.filter(p=>p.length>2);
      const nomeRua=filtradas.slice(-3).join(' ');
      return (nomeRua+' '+m[2]).trim();
    }
    // Fallback: primeiros 40 chars normalizados
    return s.substring(0,40);
  }

  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  // PASSO 1: PR√â-AGRUPAR por endere√ßo (ANTES do geocode)
  // Pedidos com mesmo endere√ßo normalizado = mesma parada
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const mapaEnds={};
  peds.forEach(p=>{
    const k=chaveEnd(p.endereco_entrega);
    if(!mapaEnds[k])mapaEnds[k]=[];
    mapaEnds[k].push(p);
  });
  const paradaList=Object.values(mapaEnds); // array de arrays

  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  // PASSO 2: Geocode ‚Äî apenas UM representante por parada
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const paradasGeo=[];
  for(const grupo of paradaList){
    const rep=grupo[0]; // representante
    let lat=parseFloat(rep.lat_entrega||0),lng=parseFloat(rep.lng_entrega||0);
    let geocodeFailed=false;
    if(!lat||!lng){
      const g=await geocode(rep.endereco_entrega);
      if(g){
        lat=g.lat;lng=g.lng;
        // Salva coords em todos os pedidos do grupo
        for(const p of grupo){
          await db.from('entregas').update({lat_entrega:lat,lng_entrega:lng}).eq('id',p.id);
        }
      } else {geocodeFailed=true;lat=0;lng=0;}
    }
    const dist=geocodeFailed?0:distKm(lojaLat,lojaLng,lat,lng);
    const ang=geocodeFailed?0:((angleDeg(lojaLat,lojaLng,lat,lng)%360)+360)%360;
    paradasGeo.push({
      ids:grupo.map(p=>p.id),
      labels:grupo.map(p=>p.numero_pedido?'#'+p.numero_pedido:p.cliente_nome||'Entrega'),
      end:rep.endereco_entrega||'',
      lat,lng,dist,ang,geocodeFailed,
      qtdPeds:grupo.length // quantos pedidos nessa parada
    });
  }

  // Ordena paradas: mais pr√≥ximas da loja primeiro
  paradasGeo.sort((a,b)=>a.dist-b.dist);

  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  // PASSO 3: Distribuir PARADAS entre entregadores
  // Cada "parada" √© tratada como 1 unidade para fins de limite
  // (mesmo que tenha v√°rios pedidos ‚Äî s√£o entregues juntos)
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const entsOrdenados=distribuicao.sort((a,b)=>b[1].qtd-a[1].qtd);
  const grupos_ent=entsOrdenados.map(([id,v])=>({
    entId:id,entNome:v.nome,
    limite:_limiteGlobal, // limite = n¬∫ de PARADAS (n√£o pedidos individuais)
    paradas:[],totalParadas:0
  }));

  paradasGeo.forEach(parada=>{
    let melhor=null,melhorScore=Infinity;
    grupos_ent.forEach(g=>{
      if(g.totalParadas>=g.limite)return; // sem espa√ßo
      let score=0;
      if(g.paradas.length===0){
        score=50;
      } else {
        const angMedio=g.paradas.reduce((s,p)=>s+p.ang,0)/g.paradas.length;
        const diff=Math.abs(((parada.ang-angMedio+540)%360)-180);
        score=diff;
      }
      const espacoProp=(g.limite-g.totalParadas)/g.limite;
      score-=espacoProp*10;
      if(score<melhorScore){melhorScore=score;melhor=g;}
    });
    if(melhor){
      melhor.paradas.push(parada);melhor.totalParadas++;
    } else {
      // Parada n√£o coube ‚Äî adiciona para quem tem mais espa√ßo
      const comEspaco=grupos_ent.filter(g=>g.totalParadas<g.limite).sort((a,b)=>(b.limite-b.totalParadas)-(a.limite-a.totalParadas));
      if(comEspaco.length){comEspaco[0].paradas.push(parada);comEspaco[0].totalParadas++;}
      else grupos_ent[0].paradas.push(parada);
    }
  });

  // Monta _rotaIAGrupos no formato esperado pelo confirmarRotaPlano
  _rotaIAGrupos=grupos_ent
    .filter(g=>g.paradas.length>0)
    .map(g=>{
      g.paradas.sort((a,b)=>a.dist-b.dist);
      const bairros=[...new Set(g.paradas.map(p=>p.end.split(',')[1]?.trim()||'').filter(Boolean))].slice(0,2).join(' / ');
      return{
        entId:g.entId,entNome:g.entNome,
        descricao:bairros?('üìç '+bairros):(g.paradas.length+' parada'+(g.paradas.length>1?'s':'')),
        // Expande paradas para lista flat de pedidos (para compatibilidade com confirmarRotaPlano)
        pedidos:g.paradas.flatMap(parada=>
          parada.ids.map(id=>({
            id,
            num:(parada.labels.find((_,i)=>parada.ids[i]===id)||'').replace(/^#/,''),
            end:parada.end,
            dist:parada.dist,
            // extra: guarda todos os labels da parada para exibir juntos
            _paradaLabels:parada.labels,
            _paradaEnd:parada.end,
            _paradaQtd:parada.qtdPeds,
            _paradaIndex:parada.ids.indexOf(id)
          }))
        )
      };
    });
  _rotaPlanoGrupos=_rotaIAGrupos;

  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  // Exibe resultado
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const body=$('rota-plano-body');
  const coresEnt=['#004E89','#FF6B35','#00C9A7','#8e44ad','#e74c3c','#27ae60'];
  const totalPeds=peds.length;
  const totalParadas=paradasGeo.length;
  const pedsDistribuidos=_rotaIAGrupos.reduce((s,g)=>s+g.pedidos.length,0);

  body.innerHTML=`<div style="background:#e8f5e9;border-radius:9px;padding:11px;margin-bottom:12px;font-size:13px;color:#2e7d32;font-weight:700;">
    ü§ñ Rota otimizada: ${_rotaIAGrupos.length} entregador${_rotaIAGrupos.length>1?'es':''} ‚Ä¢ ${totalParadas} parada${totalParadas>1?'s':''} ‚Ä¢ ${totalPeds} pedido${totalPeds>1?'s':''}${pedsDistribuidos<totalPeds?` ‚Ä¢ <span style="color:#e65100;">${totalPeds-pedsDistribuidos} sem entregador</span>`:''}
  </div>`+_rotaIAGrupos.map((g,gi)=>{
    // Agrupa pedidos de volta por parada para exibi√ß√£o
    const paradasMapa={};
    g.pedidos.forEach(p=>{
      const k=p._paradaEnd||p.end;
      if(!paradasMapa[k])paradasMapa[k]={labels:p._paradaLabels||[('#'+p.num)],end:p.end,dist:p.dist,ids:[]};
      paradasMapa[k].ids.push(p.id);
    });
    const paradasList=Object.values(paradasMapa);
    return `<div style="background:#f8f9fa;border-radius:10px;padding:12px;margin-bottom:10px;border-left:4px solid ${coresEnt[gi%coresEnt.length]};">
    <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
      <span style="font-size:16px;">üõµ</span>
      <div>
        <div style="font-weight:700;font-size:14px;color:${coresEnt[gi%coresEnt.length]};">${g.entNome}</div>
        <div style="font-size:11px;color:#888;">${g.descricao}</div>
      </div>
      <span style="margin-left:auto;background:${coresEnt[gi%coresEnt.length]};color:white;padding:2px 10px;border-radius:20px;font-size:12px;font-weight:700;">${paradasList.length} parada${paradasList.length>1?'s':''} ‚Ä¢ ${g.pedidos.length} ped.</span>
    </div>
    ${paradasList.map((parada,pi)=>`
      <div style="padding:7px 0;border-bottom:1px solid #eee;font-size:12px;display:flex;gap:6px;align-items:start;">
        <span style="background:${coresEnt[gi%coresEnt.length]};color:white;border-radius:50%;width:20px;height:20px;min-width:20px;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;">${pi+1}</span>
        <div>
          <strong>${parada.labels.join(' + ')}</strong>
          <br><span style="color:#555;font-size:11px;">üìç ${parada.end}</span>
          ${parada.dist>0&&parada.dist<900?`<span style="color:#888;font-size:10px;"> ‚Ä¢ ${parada.dist.toFixed(1)}km</span>`:''}
          ${parada.labels.length>1?`<span style="display:inline-block;margin-top:3px;background:#fff3e0;color:#e65100;border-radius:4px;padding:1px 6px;font-size:10px;font-weight:700;">üì¶ ${parada.labels.length} pedidos no mesmo endere√ßo</span>`:''}
        </div>
      </div>`).join('')}
  </div>`;}).join('');

  btn.textContent='ü§ñ Gerar Rota com IA';btn.disabled=false;
  $('qtd-msg').textContent='';
  closeM('qtd-ent');
  openM('rota-plano');
}


async function otimizarRotaInteligente(){
  const{data:peds}=await db.from('entregas').select('*').eq('loja_id',U.id).eq('status','pendente').order('created_at');
  if(!peds||!peds.length){alert('Sem pedidos pendentes para otimizar.');return;}
  const{data:assoc}=await db.from('loja_entregadores').select('entregador_id,e:entregador_id(id,nome,online)').eq('loja_id',U.id);
  const onlineEnts=(assoc||[]).filter(a=>a.e&&a.e.online);
  if(!onlineEnts.length){alert('Nenhum entregador online vinculado √† loja.');return;}
  const lojaLat=lojaGeoCache.lat||RP_LAT,lojaLng=lojaGeoCache.lng||RP_LNG;
  const pedsGeo=[];
  for(const p of peds){
    let lat=p.lat_entrega,lng=p.lng_entrega;
    if(!lat||!lng){const g=await geocode(p.endereco_entrega);if(g){lat=g.lat;lng=g.lng;await db.from('entregas').update({lat_entrega:lat,lng_entrega:lng}).eq('id',p.id);}}
    pedsGeo.push({...p,lat:lat||lojaLat,lng:lng||lojaLng,dist:distKm(lojaLat,lojaLng,lat||lojaLat,lng||lojaLng),ang:angleDeg(lojaLat,lojaLng,lat||lojaLat,lng||lojaLng)});
  }
  const setoresMap={};
  pedsGeo.forEach(p=>{const s=Math.floor((p.ang+180)/60);if(!setoresMap[s])setoresMap[s]=[];setoresMap[s].push(p);});
  Object.values(setoresMap).forEach(s=>s.sort((a,b)=>a.dist-b.dist));
  _rotaPlanoGrupos=Object.values(setoresMap);
  _rotaPlanoEnts=onlineEnts;
  const entOptions=onlineEnts.map(a=>`<option value="${a.entregador_id}">${a.e.nome}</option>`).join('');
  const body=$('rota-plano-body');
  body.innerHTML=`<div style="background:#e8f5e9;border-radius:8px;padding:10px;margin-bottom:12px;font-size:13px;font-weight:700;color:#2e7d32;">
    üì¶ ${peds.length} entrega${peds.length>1?'s':''} em ${_rotaPlanoGrupos.length} grupo${_rotaPlanoGrupos.length>1?'s':''} por dire√ß√£o
  </div>`+_rotaPlanoGrupos.map((grupo,gi)=>`
    <div class="secao" style="margin-bottom:10px;">
      <div class="s-title">Grupo ${gi+1} ‚Äî ${grupo.length} entrega${grupo.length>1?'s':''}</div>
      ${grupo.map((p,pi)=>`<div style="padding:5px 0;border-bottom:1px solid #f0f0f0;font-size:12px;">
        <strong>${pi+1}. ${p.numero_pedido?'#'+p.numero_pedido:p.cliente_nome||'Entrega'}</strong><br>
        <span style="color:#555;">üìç ${p.endereco_entrega}</span>
        ${p.distancia_km>0?`<span style="color:#888;font-size:11px;"> ‚Ä¢ ${parseFloat(p.distancia_km).toFixed(1)}km</span>`:''}
      </div>`).join('')}
      <div style="margin-top:8px;">
        <label style="font-size:11px;font-weight:700;color:#333;">üõµ Entregador:</label>
        <select id="rota-ent-${gi}" style="width:100%;padding:8px;border:1.5px solid #e0e0e0;border-radius:7px;margin-top:4px;font-size:13px;">
          <option value="">‚Äî Selecione ‚Äî</option>${entOptions}
        </select>
      </div>
    </div>`).join('');
  closeM('rota');openM('rota-plano');
}

async function confirmarRotaPlano(){
  const btn=$('btn-confirmar-rota');
  btn.textContent='Salvando...';btn.disabled=true;
  let algumAtribuido=false,ordem=1;
  // Verifica se veio da IA (grupos com entId definido)
  if(_rotaIAGrupos.length){
    for(const g of _rotaIAGrupos){
      if(!g.entId)continue;
      algumAtribuido=true;
      for(const p of g.pedidos){
        await db.from('entregas').update({entregador_id:g.entId,status:'aceito',status_detalhado:'aceito',ordem_rota:ordem,pedido_pronto:true,aceito_at:new Date().toISOString()}).eq('id',p.id);
        ordem++;
      }
    }
    _rotaIAGrupos=[];
  } else {
    for(let gi=0;gi<_rotaPlanoGrupos.length;gi++){
      const eid=$(`rota-ent-${gi}`)?.value;
      if(!eid)continue;
      algumAtribuido=true;
      for(const p of _rotaPlanoGrupos[gi]){
        await db.from('entregas').update({entregador_id:eid,status:'aceito',status_detalhado:'aceito',ordem_rota:ordem,pedido_pronto:true,aceito_at:new Date().toISOString()}).eq('id',p.id);
        ordem++;
      }
    }
  }
  btn.textContent='‚úÖ Confirmar e Despachar';btn.disabled=false;
  if(!algumAtribuido){alert('Nenhum grupo com entregador atribu√≠do.');return;}
  closeM('rota-plano');openM('rota');
  carregarPedidos();
  alert(`‚úÖ ${ordem-1} entrega${ordem>2?'s':''} despachada${ordem>2?'s':''}!`);
}

async function abrirPedidosLj(){openM('rota');carregarPedidos();}
async function carregarPedidos(){
  $('rota-lst').innerHTML='<p>Carregando...</p>';
  const{data}=await db.from('entregas').select('*,entregador:entregador_id(nome)').eq('loja_id',U.id).neq('status','entregue').neq('status','cancelado').order('ordem_rota');
  if(!data||!data.length){$('rota-lst').innerHTML='<p style="color:#999;text-align:center;padding:20px">Sem pedidos. Use "Novo Pedido".</p>';return;}
  // Buscar entregadores disponiveis
  const{data:assoc}=await db.from('loja_entregadores').select('entregador_id,e:entregador_id(nome,online)').eq('loja_id',U.id)
  const onlineList=(assoc||[]).filter(a=>a.e&&a.e.online);
  $('rota-lst').innerHTML=data.map((e,i)=>{
    const stDet=e.status_detalhado||e.status;
    const steps=['pendente','aceito','chegou_loja','saiu_entrega','entregue'];
    const curIdx=steps.indexOf(stDet);
    const stepsHtml=steps.slice(0,4).map((st,idx)=>`<div class="sf-step ${idx<curIdx?'done':idx===curIdx?'current':''}">${['Pendente','Aceito','Na Loja','A Caminho'][idx]}</div>`).join('');
    const entOptions=onlineList.map(a=>`<option value="${a.entregador_id}" ${e.entregador_id===a.entregador_id?'selected':''}>${a.e.nome}</option>`).join('');
    return `<div class="ecard ${e.status==='em_rota'||e.status==='aceito'?'rota':''}">
      <div style="display:flex;justify-content:space-between;margin-bottom:4px;">
        <strong>${i+1}. ${e.numero_pedido?'#'+e.numero_pedido:e.cliente_nome||'Entrega'}</strong>
        <span class="badge b-${stDet}">${stDet}</span>
      </div>
      <div class="status-flow">${stepsHtml}</div>
      <p style="font-size:12px;color:#555;margin:3px 0;">&#128205; ${e.endereco_entrega}</p>
      ${e.cliente_nome?`<p style="font-size:11px;color:#888;">&#128100; ${e.cliente_nome}${e.cliente_telefone?' | '+e.cliente_telefone:''}</p>`:''}
      ${e.distancia_km>0?`<p style="font-size:11px;color:#888;">&#128205; ${parseFloat(e.distancia_km).toFixed(1)}km | ${fR(e.valor_corrida||e.valor_entregador)}</p>`:''}
      ${e.codigo_confirmacao?`<p style="font-size:11px;color:#8e44ad;">&#128273; Cod. Conf: ${e.codigo_confirmacao}</p>`:''}
      ${e.status==='pendente'?`<div style="margin-top:6px;"><label style="font-size:11px;font-weight:700;color:#555;">Atribuir a:</label><select class="ent-select" onchange="atribuirEnt('${e.id}',this.value)"><option value="">Selecione entregador...</option>${entOptions}</select></div>`:''}
      ${e.entregador?`<p style="font-size:11px;color:#004E89;margin-top:4px;">&#128757; ${e.entregador.nome}</p>`:''}
      <div class="row" style="margin-top:7px;flex-wrap:wrap;">
        <button class="btn-sm blue" onclick="abrirEditarPedido('${e.id}','${(e.numero_pedido||'').replace(/'/g,"\\'")}','${(e.cliente_nome||'').replace(/'/g,"\\'")}','${e.cliente_telefone||''}','${(e.endereco_rua||'').replace(/'/g,"\\'")}','${e.endereco_numero||''}','${(e.endereco_bairro||'').replace(/'/g,"\\'")}','${(e.endereco_cidade||'').replace(/'/g,"\\'")}','${(e.endereco_complemento||'').replace(/'/g,"\\'")}','${(e.observacoes||'').replace(/'/g,"\\'")}')">‚úèÔ∏è Editar</button>
        <button class="btn-sm green" onclick="ljFinalizarEntrega('${e.id}')">‚úÖ Finalizar</button>
        <button class="btn-sm red" onclick="cancelarEnt('${e.id}')">‚úñ Cancelar</button>
        ${e.status==='pendente'?`<button class="btn-sm orange" onclick="avisarPedidoPronto()">üîî Pronto</button>`:''}
      </div>
    </div>`;
  }).join('');
}

async function atribuirEnt(pedId,entId){
  if(!entId)return;
  await db.from('entregas').update({entregador_id:entId,status:'aceito',status_detalhado:'aceito',aceito_at:new Date().toISOString(),pedido_pronto:true}).eq('id',pedId);
  carregarPedidos();
}

// ============ GPS VALIDATION TOGGLE ============
let gpsValidacaoAtiva=false;

// ============ ADMIN GPS GLOBAL ============
async function admAtuToggleGps(ativo){
  const sw=$('adm-gps-toggle-sw');
  const knob=$('adm-gps-toggle-knob');
  const desc=$('adm-gps-toggle-desc');
  if(!sw)return;
  gpsValidacaoAtiva=ativo;
  if(ativo){sw.style.background='#e65100';knob.style.left='27px';if(desc)desc.textContent='GPS obrigatorio ‚Äî entregadores devem estar no local';}
  else{sw.style.background='#ccc';knob.style.left='3px';if(desc)desc.textContent='Entregadores confirmam sem validacao (modo livre)';}
}
async function admToggleGpsGlobal(){
  const novo=!gpsValidacaoAtiva;
  admAtuToggleGps(novo);
  // Salva em 3 camadas para garantir persist√™ncia total
  // 1) localStorage - persist√™ncia imediata e offline
  localStorage.setItem('adm_gps_global',novo?'1':'0');
  // 2) Admin user row
  try{await db.from('usuarios').update({gps_validacao_obrigatorio:novo}).eq('id',U.id);}catch(e){}
  U.gps_validacao_obrigatorio=novo;
  // 3) Propaga para todas as lojas (em background, n√£o bloqueia)
  db.from('usuarios').update({gps_validacao_obrigatorio:novo}).eq('tipo','loja').then(()=>{}).catch(()=>{});
  // 4) config_global table (se existir)
  db.from('config_global').upsert({chave:'gps_validacao_obrigatorio',valor:novo?'true':'false',updated_at:new Date().toISOString()}).then(()=>{}).catch(()=>{});
}
async function carregarAdmGpsToggle(){
  // Estrat√©gia tripla: localStorage (instant√¢neo) > banco admin > config_global
  // Primeiro aplica localStorage para resposta imediata
  const cached=localStorage.getItem('adm_gps_global');
  if(cached!==null){admAtuToggleGps(cached==='1');}

  // Depois verifica banco (mais confi√°vel)
  let ativo=cached!==null?cached==='1':false;
  try{
    const{data:cfg}=await db.from('config_global').select('valor').eq('chave','gps_validacao_obrigatorio').single();
    if(cfg)ativo=cfg.valor==='true';
  }catch(e){
    try{
      const{data:admData}=await db.from('usuarios').select('gps_validacao_obrigatorio').eq('id',U.id).single();
      if(admData&&admData.gps_validacao_obrigatorio!==null)ativo=admData.gps_validacao_obrigatorio;
    }catch(e2){}
  }
  // Garante que localStorage fica sincronizado com banco
  localStorage.setItem('adm_gps_global',ativo?'1':'0');
  admAtuToggleGps(ativo);
}

// ============ SUPABASE REALTIME GPS ============
function iniciarRealtimeDrivers(tipo){
  // Cancela canal anterior se houver
  if(realtimeCh){try{db.removeChannel(realtimeCh);}catch(e){}realtimeCh=null;}
  // Canal dedicado por tipo para evitar conflito
  realtimeCh=db.channel('gps-live-'+tipo+'-'+Date.now())
    .on('postgres_changes',{event:'UPDATE',schema:'public',table:'usuarios',filter:'tipo=eq.entregador'},
      async ()=>{
        // Qualquer update num entregador: recarrega o mapa imediatamente
        if(tipo==='admin')await pullAdm();
        else if(tipo==='loja')await pullLj();
      })
    .subscribe((status,err)=>{
      console.log('[Realtime]',tipo,status,err||'');
      if(status==='CHANNEL_ERROR'||status==='TIMED_OUT'){
        // Reconecta automaticamente ap√≥s 3s
        setTimeout(()=>iniciarRealtimeDrivers(tipo),3000);
      }
    });
}

// atuToggleGps - dummy para compatibilidade (GPS toggle agora s√≥ no admin)
function atuToggleGps(ativo){gpsValidacaoAtiva=ativo;}
async function toggleGpsValidacao(){
  const novo=!gpsValidacaoAtiva;
  await db.from('usuarios').update({gps_validacao_obrigatorio:novo}).eq('id',U.id);
  U.gps_validacao_obrigatorio=novo;
  salvarU();
  atuToggleGps(novo);
}

// ============ LOGO LOJA ============
function mostrarLogo(url,containerId){
  // Logo da loja n√£o √© mais exibida no header ‚Äî wallpaper √© a identidade visual
  // Fun√ß√£o mantida para compatibilidade com configura√ß√µes salvas no banco
}
async function uploadLogoLoja(event){
  const file=event.target.files[0];if(!file)return;
  const reader=new FileReader();
  reader.onload=async(e)=>{
    const b64=e.target.result;
    // Salva no banco (fonte de verdade) ‚Äî n√£o salva logo no localStorage (estoura quota)
    await db.from('usuarios').update({logo_url:b64}).eq('id',U.id);
    U.logo_url=b64;
    salvarU(); // salva U sem logo_url
    mostrarLogo(b64,'loja-logo-box');
    const prev=$('cfg-logo-prev');
    if(prev)prev.innerHTML=`<img src="${b64}" style="max-height:70px;max-width:200px;object-fit:contain;border-radius:6px;display:block;margin:0 auto;">`;
    showM('cfg-lj-msg','‚úÖ Logo salva com sucesso!',true);setTimeout(()=>clearM('cfg-lj-msg'),2000);
  };
  reader.readAsDataURL(file);
}

// ============ EDITAR PEDIDO ============
function abrirEditarPedido(id,num,cli,tel,rua,nend,bairro,cidade,comp,obs){
  $('edit-id').value=id;
  $('edit-num').value=num||'';$('edit-cli').value=cli||'';$('edit-tel').value=tel||'';
  $('edit-rua').value=rua||'';$('edit-nend').value=nend||'';
  $('edit-bairro').value=bairro||'';$('edit-cidade').value=cidade||'Ribeirao Preto';
  $('edit-comp').value=comp||'';$('edit-obs').value=obs||'';
  clearM('edit-msg');openM('editar');
}
async function salvarEdicaoPedido(){
  const id=$('edit-id').value;if(!id){showM('edit-msg','Erro: ID do pedido n√£o encontrado.',false);return;}
  const btn=document.querySelector('#m-editar .btn-primary');
  if(btn){btn.disabled=true;btn.textContent='Salvando...';}
  const rua=v('edit-rua'),nend=v('edit-nend'),bairro=v('edit-bairro'),cidade=v('edit-cidade')||'Ribeirao Preto',comp=v('edit-comp');
  const endereco=fEnd(rua,nend,bairro,cidade,comp);
  // Monta objeto de update sem campos que podem nao existir no banco
  const upd={
    numero_pedido:v('edit-num')||null,
    cliente_nome:v('edit-cli'),
    cliente_telefone:v('edit-tel'),
    endereco_rua:rua,endereco_numero:nend,endereco_bairro:bairro,endereco_cidade:cidade,
    endereco_complemento:comp,endereco_entrega:endereco
  };
  // Tenta adicionar observacoes - se coluna nao existir, tenta notas
  const obsVal=v('edit-obs');
  const{error}=await db.from('entregas').update({...upd,observacoes:obsVal||null}).eq('id',id);
  if(error&&(error.message.includes('observacoes')||error.message.includes('schema cache'))){
    // Coluna observacoes nao existe - tenta salvar sem ela
    const{error:e2}=await db.from('entregas').update(upd).eq('id',id);
    if(btn){btn.disabled=false;btn.textContent='‚úì Salvar Alteracoes';}
    if(e2){showM('edit-msg','‚ùå Erro ao salvar: '+e2.message,false);return;}
  }else if(error){
    if(btn){btn.disabled=false;btn.textContent='‚úì Salvar Alteracoes';}
    console.error('[editar]',error);
    showM('edit-msg','‚ùå Erro ao salvar: '+error.message,false);
    return;
  }
  if(btn){btn.disabled=false;btn.textContent='‚úì Salvar Alteracoes';}
  showM('edit-msg','‚úÖ Pedido atualizado!',true);
  setTimeout(()=>{closeM('editar');carregarPedidos();},1000);
}

async function marcarEnt(id){
  await db.from('entregas').update({status:'entregue',status_detalhado:'entregue',entregue_at:new Date().toISOString()}).eq('id',id);
  carregarPedidos();
  const{data:ent}=await db.from('entregas').select('id').eq('loja_id',U.id).gte('created_at',iDia()).lte('created_at',fDia());
  $('lj-hj').textContent=ent?ent.length:0;
}
async function cancelarEnt(id){if(!confirm('Cancelar esta entrega?'))return;await db.from('entregas').update({status:'cancelado',status_detalhado:'cancelado'}).eq('id',id);carregarPedidos();}

async function abrirRelLj(){openM('rel');carregarRel();}
async function carregarRel(){
  const p=$('rel-f').value,el=$('rel-dados');
  el.innerHTML='<p style="text-align:center;padding:20px;color:#888;">‚è≥ Carregando...</p>';
  // Calcula per√≠odo com in√≠cio e fim corretos usando BR timezone
  function getRelPeriodo(per){
    const agora=new Date();
    let ini,fim=new Date(agora);fim.setHours(23,59,59,999);
    if(per==='hoje'){ini=new Date(agora);ini.setHours(0,0,0,0);}
    else if(per==='semana'){
      ini=new Date(agora);ini.setDate(ini.getDate()-((agora.getDay()+6)%7));ini.setHours(0,0,0,0);
      fim=new Date(ini);fim.setDate(fim.getDate()+6);fim.setHours(23,59,59,999);
    }
    else if(per==='semana_passada'){
      ini=new Date(agora);ini.setDate(ini.getDate()-((agora.getDay()+6)%7)-7);ini.setHours(0,0,0,0);
      fim=new Date(ini);fim.setDate(fim.getDate()+6);fim.setHours(23,59,59,999);
    }
    else if(per==='mes'){ini=new Date(agora.getFullYear(),agora.getMonth(),1,0,0,0,0);fim=new Date(agora.getFullYear(),agora.getMonth()+1,0,23,59,59,999);}
    else if(per==='mes_passado'){ini=new Date(agora.getFullYear(),agora.getMonth()-1,1,0,0,0,0);fim=new Date(agora.getFullYear(),agora.getMonth(),0,23,59,59,999);}
    else{ini=new Date(agora);ini.setHours(0,0,0,0);}
    return{ini:ini.toISOString(),fim:fim.toISOString()};
  }
  const{ini:dtIni,fim:dtFim}=getRelPeriodo(p);
  const{data:ents}=await db.from('entregas').select('*,entregador:entregador_id(nome)').eq('loja_id',U.id).gte('created_at',dtIni).lte('created_at',dtFim);
  if(!ents||!ents.length){el.innerHTML='<p style="color:#999;text-align:center;padding:20px">Sem entregas no per√≠odo.</p>';return;}

  const tS=ents.reduce((s,e)=>s+parseFloat(e.valor_sistema||0),0);
  const tE=ents.reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0);
  const entregues=ents.filter(e=>e.status==='entregue');
  const taxaConc=ents.length>0?Math.round(entregues.length/ents.length*100):0;

  // Dados por entregador
  const pE={};
  ents.forEach(e=>{
    const k=e.entregador_id||'sem';
    const nome=e.entregador?.nome||'Sem entregador';
    if(!pE[k])pE[k]={nome,lista:[],total:0,entregues:0,kmTotal:0};
    const v=parseFloat(e.valor_corrida||e.valor_entregador||0);
    pE[k].lista.push(e);
    pE[k].total+=v;
    if(e.status==='entregue')pE[k].entregues++;
    pE[k].kmTotal+=parseFloat(e.distancia_km||0);
  });
  const entArr=Object.values(pE).sort((a,b)=>b.lista.length-a.lista.length);
  const melhor=entArr[0];
  const pior=entArr[entArr.length-1];
  const cores=['#FF6B35','#004E89','#00C9A7','#8e44ad','#e74c3c','#f39c12','#27ae60'];

  // Dados por bairro/regi√£o
  const pB={};
  ents.forEach(e=>{
    const b=(e.endereco_bairro||'Sem bairro').trim();
    if(!pB[b])pB[b]=0;
    pB[b]++;
  });
  const bairrosArr=Object.entries(pB).sort((a,b)=>b[1]-a[1]);
  const topBairros=bairrosArr.slice(0,6);

  // Entregas por dia
  const pDia={};
  ents.forEach(e=>{const d=e.created_at?.split('T')[0]||'?';if(!pDia[d])pDia[d]=0;pDia[d]++;});
  const dias=Object.keys(pDia).sort();

  el.innerHTML=`
  <!-- RESUMO CARDS -->
  <div class="g2b" style="gap:8px;margin-bottom:10px;">
    <div style="background:#fff3e0;border-radius:10px;padding:11px;text-align:center;">
      <div style="font-size:10px;color:#888;">Total Entregas</div>
      <div style="font-size:24px;font-weight:700;color:#FF6B35;">${ents.length}</div>
    </div>
    <div style="background:#e8f5e9;border-radius:10px;padding:11px;text-align:center;">
      <div style="font-size:10px;color:#888;">Conclu√≠das</div>
      <div style="font-size:24px;font-weight:700;color:#2e7d32;">${taxaConc}%</div>
    </div>
    <div style="background:#e3f2fd;border-radius:10px;padding:11px;text-align:center;">
      <div style="font-size:10px;color:#888;">Taxa Sistema</div>
      <div style="font-size:16px;font-weight:700;color:#004E89;">${fR(tS)}</div>
    </div>
    <div style="background:#f3e5f5;border-radius:10px;padding:11px;text-align:center;">
      <div style="font-size:10px;color:#888;">Custo Entregad.</div>
      <div style="font-size:16px;font-weight:700;color:#8e44ad;">${fR(tE)}</div>
    </div>
  </div>

  <!-- MELHOR / PIOR -->
  ${entArr.length>1?`<div class="g2b" style="gap:8px;margin-bottom:10px;">
    <div style="background:#e8f5e9;border-radius:10px;padding:11px;border-left:4px solid #27ae60;">
      <div style="font-size:10px;color:#27ae60;font-weight:700;">üèÜ MAIS ENTREGAS</div>
      <div style="font-weight:700;font-size:14px;margin-top:4px;">${melhor.nome}</div>
      <div style="font-size:12px;color:#555;">${melhor.lista.length} corridas ‚Ä¢ ${fR(melhor.total)}</div>
    </div>
    <div style="background:#fce4ec;border-radius:10px;padding:11px;border-left:4px solid #e74c3c;">
      <div style="font-size:10px;color:#e74c3c;font-weight:700;">üìâ MENOS ENTREGAS</div>
      <div style="font-weight:700;font-size:14px;margin-top:4px;">${pior.nome}</div>
      <div style="font-size:12px;color:#555;">${pior.lista.length} corridas ‚Ä¢ ${fR(pior.total)}</div>
    </div>
  </div>`:''}

  <!-- GR√ÅFICO BARRAS POR ENTREGADOR -->
  ${entArr.length>0?`<div style="background:white;border-radius:12px;padding:12px;margin-bottom:10px;box-shadow:0 1px 6px rgba(0,0,0,.06);">
    <div style="font-size:12px;font-weight:700;color:#333;margin-bottom:8px;">üõµ Corridas por Entregador</div>
    <canvas id="lj-chart-bar" height="160"></canvas>
  </div>`:''}

  <!-- GR√ÅFICO BAIRROS -->
  ${topBairros.length>0?`<div style="background:white;border-radius:12px;padding:12px;margin-bottom:10px;box-shadow:0 1px 6px rgba(0,0,0,.06);">
    <div style="font-size:12px;font-weight:700;color:#333;margin-bottom:8px;">üìç Regi√µes com mais entregas (Top ${topBairros.length})</div>
    <canvas id="lj-chart-bairros" height="160"></canvas>
    <div style="margin-top:8px;">
      ${bairrosArr.map((b,i)=>`<div style="display:flex;align-items:center;justify-content:space-between;padding:4px 0;font-size:12px;border-bottom:1px solid #f5f5f5;">
        <span>${i===0?'üî¥':i===1?'üü†':i===2?'üü°':'‚ö™'} ${b[0]}</span>
        <strong>${b[1]} entrega${b[1]>1?'s':''}</strong>
      </div>`).join('')}
    </div>
  </div>`:''}

  <!-- GR√ÅFICO LINHA DIAS -->
  ${dias.length>1?`<div style="background:white;border-radius:12px;padding:12px;margin-bottom:10px;box-shadow:0 1px 6px rgba(0,0,0,.06);">
    <div style="font-size:12px;font-weight:700;color:#333;margin-bottom:8px;">üìà Entregas por Dia</div>
    <canvas id="lj-chart-dias" height="140"></canvas>
  </div>`:''}

  <!-- CUSTO POR ENTREGADOR -->
  <div style="background:white;border-radius:12px;padding:12px;margin-bottom:10px;box-shadow:0 1px 6px rgba(0,0,0,.06);">
    <div style="font-size:12px;font-weight:700;color:#333;margin-bottom:8px;">üí∞ Custo Detalhado por Entregador</div>
    ${entArr.map((ent,i)=>`
    <div style="padding:8px 0;border-bottom:1px solid #f5f5f5;">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <div style="display:flex;align-items:center;gap:7px;">
          <div style="width:10px;height:10px;border-radius:50%;background:${cores[i%cores.length]};"></div>
          <strong style="font-size:13px;">${ent.nome}</strong>
        </div>
        <span style="font-weight:700;color:#004E89;font-size:13px;">${fR(ent.total)}</span>
      </div>
      <div style="display:flex;gap:12px;margin-top:4px;font-size:11px;color:#666;">
        <span>üöÄ ${ent.lista.length} corridas</span>
        <span>‚úÖ ${ent.entregues} entregues</span>
        <span>üìè ${ent.kmTotal.toFixed(1)}km total</span>
        <span>üìä M√©dia: ${fR(ent.lista.length>0?ent.total/ent.lista.length:0)}/corrida</span>
      </div>
      <!-- Barra de taxa de conclus√£o -->
      <div style="margin-top:5px;">
        <div style="font-size:10px;color:#888;margin-bottom:2px;">Taxa de conclus√£o: ${ent.lista.length>0?Math.round(ent.entregues/ent.lista.length*100):0}%</div>
        <div style="background:#f0f0f0;border-radius:20px;height:6px;overflow:hidden;">
          <div style="background:${ent.lista.length>0&&ent.entregues/ent.lista.length>=0.8?'#27ae60':'#e74c3c'};height:100%;width:${ent.lista.length>0?Math.round(ent.entregues/ent.lista.length*100):0}%;border-radius:20px;transition:width .5s;"></div>
        </div>
      </div>
    </div>`).join('')}
  </div>

  <!-- GR√ÅFICO TAXA DE CONCLUS√ÉO -->
  ${entArr.length>0?`<div style="background:white;border-radius:12px;padding:12px;margin-bottom:10px;box-shadow:0 1px 6px rgba(0,0,0,.06);">
    <div style="font-size:12px;font-weight:700;color:#333;margin-bottom:8px;">‚úÖ Taxa de Conclus√£o por Entregador (%)</div>
    <canvas id="lj-chart-taxa" height="140"></canvas>
  </div>`:''}

  <!-- GR√ÅFICO CUSTO POR KM -->
  ${entArr.filter(e=>e.kmTotal>0).length>0?`<div style="background:white;border-radius:12px;padding:12px;margin-bottom:10px;box-shadow:0 1px 6px rgba(0,0,0,.06);">
    <div style="font-size:12px;font-weight:700;color:#333;margin-bottom:8px;">üìè Custo por Km (R$/km)</div>
    <canvas id="lj-chart-km" height="140"></canvas>
    <p style="font-size:10px;color:#888;margin-top:6px;">Menor custo/km = entregador mais eficiente por dist√¢ncia percorrida</p>
  </div>`:''}
  </div>`;

  // Gr√°ficos ap√≥s render
  setTimeout(()=>{
    // Barras por entregador
    const c1=document.getElementById('lj-chart-bar');
    if(c1){
      if(c1._ch)c1._ch.destroy();
      c1._ch=new Chart(c1,{type:'bar',data:{
        labels:entArr.map(e=>e.nome.split(' ')[0]),
        datasets:[
          {label:'Corridas',data:entArr.map(e=>e.lista.length),backgroundColor:entArr.map((_,i)=>cores[i%cores.length]),borderRadius:6},
          {label:'Custo (R$)',data:entArr.map(e=>e.total),backgroundColor:'rgba(0,78,137,.2)',borderColor:'#004E89',type:'line',yAxisID:'y2'}
        ]
      },options:{responsive:true,plugins:{legend:{labels:{font:{size:10}}}},scales:{
        y:{ticks:{font:{size:10}}},
        y2:{position:'right',grid:{drawOnChartArea:false},ticks:{font:{size:10},callback:v=>'R$'+v.toFixed(0)}}
      }}});
    }
    // Bairros
    const c2=document.getElementById('lj-chart-bairros');
    if(c2){
      if(c2._ch)c2._ch.destroy();
      c2._ch=new Chart(c2,{type:'bar',data:{
        labels:topBairros.map(b=>b[0].length>15?b[0].substring(0,15)+'‚Ä¶':b[0]),
        datasets:[{label:'Entregas',data:topBairros.map(b=>b[1]),backgroundColor:topBairros.map((_,i)=>cores[i%cores.length]),borderRadius:5}]
      },options:{indexAxis:'y',responsive:true,plugins:{legend:{display:false}},scales:{x:{ticks:{font:{size:10}}},y:{ticks:{font:{size:10}}}}}});
    }
    // Taxa de conclus√£o por entregador
    const c4=document.getElementById('lj-chart-taxa');
    if(c4){
      if(c4._ch)c4._ch.destroy();
      c4._ch=new Chart(c4,{type:'bar',data:{
        labels:entArr.map(e=>e.nome.split(' ')[0]),
        datasets:[{
          label:'Taxa de conclus√£o (%)',
          data:entArr.map(e=>e.lista.length>0?Math.round(e.entregues/e.lista.length*100):0),
          backgroundColor:entArr.map(e=>{const t=e.lista.length>0?e.entregues/e.lista.length:0;return t>=0.8?'#27ae60':t>=0.5?'#f39c12':'#e74c3c';}),
          borderRadius:6
        }]
      },options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{min:0,max:100,ticks:{font:{size:10},callback:v=>v+'%'}},x:{ticks:{font:{size:10}}}}}});
    }
    // Custo por km
    const c5=document.getElementById('lj-chart-km');
    if(c5){
      const comKm=entArr.filter(e=>e.kmTotal>0);
      if(comKm.length>0){
        if(c5._ch)c5._ch.destroy();
        c5._ch=new Chart(c5,{type:'bar',data:{
          labels:comKm.map(e=>e.nome.split(' ')[0]),
          datasets:[{
            label:'R$/km',
            data:comKm.map(e=>parseFloat((e.total/e.kmTotal).toFixed(2))),
            backgroundColor:comKm.map((_,i)=>cores[i%cores.length]),
            borderRadius:6
          }]
        },options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{ticks:{font:{size:10},callback:v=>'R$'+v.toFixed(2)}},x:{ticks:{font:{size:10}}}}}});
      }
    }
    if(c3&&dias.length>1){
      if(c3._ch)c3._ch.destroy();
      c3._ch=new Chart(c3,{type:'line',data:{
        labels:dias.map(d=>{const[,m,dd]=d.split('-');return`${dd}/${m}`;}),
        datasets:[{label:'Entregas/dia',data:dias.map(d=>pDia[d]),borderColor:'#FF6B35',backgroundColor:'rgba(255,107,53,.1)',tension:.3,fill:true}]
      },options:{responsive:true,plugins:{legend:{labels:{font:{size:10}}}},scales:{y:{beginAtZero:true,ticks:{font:{size:10},stepSize:1}}}}});
    }
  },150);
}

async function abrirGerEnt(){openM('ger');$('ger-cod').textContent=U.codigo_loja||'------';carregarGer();}
async function carregarGer(){
  $('ger-lst').innerHTML='<p>Carregando...</p>';
  const{data:assoc}=await db.from('loja_entregadores').select('*,e:entregador_id(id,nome,telefone,placa_moto,online)').eq('loja_id',U.id);
  if(!assoc||!assoc.length){$('ger-lst').innerHTML='<p style="color:#999;margin-top:9px">Nenhum entregador vinculado ainda.</p>';return;}
  $('ger-lst').innerHTML=assoc.map(a=>`
    <div class="litem">
      <div style="flex:1"><strong>${a.e?a.e.nome:'Removido'}</strong> <span class="badge ${a.e&&a.e.online?'b-online':'b-offline'}">${a.e&&a.e.online?'Online':'Offline'}</span><br>
      <small style="color:#888">Tel:${a.e?a.e.telefone||'-':'-'} | Placa:${a.e?a.e.placa_moto||'-':'-'}</small></div>
      <button class="btn-sm red" onclick="remEnt('${a.id}')">Remover</button>
    </div>`).join('');
}
async function remEnt(id){if(!confirm('Remover?'))return;await db.from('loja_entregadores').delete().eq('id',id);carregarGer();}

async function abrirCfgLj(){
  openM('cfg-lj');
  const{data}=await db.from('usuarios').select('*').eq('id',U.id).single();
  if(data){
    $('cfg-nlj').value=data.nome_loja||'';$('cfg-tel').value=data.telefone||'';$('cfg-cnpj').value=data.cnpj||'';
    $('cfg-rua').value=data.endereco_rua||'';$('cfg-nend').value=data.endereco_numero||'';
    $('cfg-bairro').value=data.endereco_bairro||'';$('cfg-cidade').value=data.endereco_cidade||data.cidade||'Ribeirao Preto';
    $('cfg-comp').value=data.endereco_complemento||'';
    if(data.horario_abertura)$('cfg-ab').value=String(data.horario_abertura).substring(0,5);
    if(data.horario_fechamento)$('cfg-fch').value=String(data.horario_fechamento).substring(0,5);
    const prev=$('cfg-logo-prev');
    if(prev&&data.logo_url)prev.innerHTML=`<img src="${data.logo_url}" style="max-height:70px;max-width:200px;object-fit:contain;border-radius:6px;display:block;margin:0 auto;">`;
    else if(prev)prev.innerHTML='<p style="font-size:11px;color:#999;text-align:center;">Sem logo cadastrado</p>';
  }
  // Google Vision j√° est√° configurado no c√≥digo (GOOGLE_KEY)
  const gk=localStorage.getItem('google_vision_key')||'';
  if($('cfg-google-key'))$('cfg-google-key').value=gk?'‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'+gk.slice(-8):'';
  if($('cfg-google-key-status'))$('cfg-google-key-status').textContent=gk?'‚úÖ Chave configurada':'‚ö†Ô∏è Usando chave padr√£o do sistema';
  clearM('cfg-lj-msg');$('cfg-senha').value='';
}
function salvarGoogleKey(){
  const k=v('cfg-google-key');
  if(!k||k.startsWith('‚Ä¢')){showM('cfg-lj-msg','Digite a chave completa primeiro.',false);return;}
  if(!k.startsWith('AIza')){showM('cfg-lj-msg','Chave inv√°lida. Deve come√ßar com AIza...',false);return;}
  localStorage.setItem('google_vision_key',k);
  if($('cfg-google-key'))$('cfg-google-key').value='‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'+k.slice(-8);
  if($('cfg-google-key-status'))$('cfg-google-key-status').textContent='‚úÖ Chave salva com sucesso!';
  showM('cfg-lj-msg','‚úÖ Chave Google Vision salva! OCR pronto para usar.',true);
}
async function salvarCfgLj(){
  const rua=v('cfg-rua'),num=v('cfg-nend'),bairro=v('cfg-bairro'),cidade=v('cfg-cidade')||'Ribeirao Preto',comp=v('cfg-comp');
  const d={nome_loja:v('cfg-nlj'),telefone:v('cfg-tel'),cnpj:v('cfg-cnpj'),cidade,
    endereco:fEnd(rua,num,bairro,cidade,comp),
    endereco_rua:rua,endereco_numero:num,endereco_bairro:bairro,endereco_cidade:cidade,endereco_complemento:comp,
    horario_abertura:v('cfg-ab')||null,horario_fechamento:v('cfg-fch')||null};
  const ns=v('cfg-senha');if(ns.length>=6)d.senha_hash=ns;
  const{error}=await db.from('usuarios').update(d).eq('id',U.id);
  if(error){showM('cfg-lj-msg','Erro: '+error.message);return;}
  U={...U,...d};salvarU();
  $('loja-nome').textContent=d.nome_loja||U.nome;showM('cfg-lj-msg','Salvo!',true);setTimeout(()=>closeM('cfg-lj'),1500);
}

// ============ ENTREGADOR ============
async function initEnt(){
  // IMPORTANTE: N√ÉO busca loja_ativa_id do banco ‚Äî usa SEMPRE o localStorage
  // Isso evita que um null no banco apague o v√≠nculo salvo localmente
  try{
    const{data}=await db.from('usuarios').select(
      'nome,foto_url,online,taxa_tipo,taxa_entrega,taxa_km_limite,taxa_km_excedente,taxa_fixo_base,observacoes'
    ).eq('id',U.id).single();
    if(data){
      // Merge SOMENTE campos seguros ‚Äî NUNCA sobrescreve dados de loja
      const camposSeguros=['nome','foto_url','online','taxa_tipo','taxa_entrega','taxa_km_limite','taxa_km_excedente','taxa_fixo_base','observacoes'];
      camposSeguros.forEach(k=>{if(data[k]!==undefined&&data[k]!==null)U[k]=data[k];});
      salvarU();
    }
  }catch(e){console.warn('[initEnt fetch]',e);}
  // RESTAURA v√≠nculo de loja da chave dedicada (SEMPRE sobrescreve ‚Äî mais confi√°vel)
  // Esta chave nunca √© apagada pelo banco e persiste entre logins
  const _lojaKey='loja_vinc_'+U.id;
  const _lojaSalva=localStorage.getItem(_lojaKey);
  if(_lojaSalva){
    try{
      const _lj=JSON.parse(_lojaSalva);
      // Usa chave dedicada sempre ‚Äî ela √© atualizada em conectarCodigo, carregarLojaAtiva e sair
      if(_lj.loja_ativa_id)U.loja_ativa_id=_lj.loja_ativa_id;
      if(_lj._loja_ativa_nome)U._loja_ativa_nome=_lj._loja_ativa_nome;
      if(_lj._loja_ativa_codigo)U._loja_ativa_codigo=_lj._loja_ativa_codigo;
      salvarU();
    }catch(e){}
  }
  $('ent-nome').textContent=U.nome;
  $('ent-st').textContent=U.online?'&#128994; Online':'&#9899; Offline';
  atuBtnOn(U.online);
  if(U.foto_url){$('foto-img').src=U.foto_url;$('foto-img').classList.remove('hidden');$('foto-ph').classList.add('hidden');}
  // Inicia GPS silencioso assim que entregador abre o app
  iniciarGPS();
  // Entregas hoje
  const{data:e}=await db.from('entregas').select('id,valor_corrida,valor_entregador').eq('entregador_id',U.id).gte('created_at',iDia()).lte('created_at',fDia());
  $('ent-cnt').textContent=e?e.length:0;
  const g=e?e.reduce((s,x)=>s+parseFloat(x.valor_corrida||x.valor_entregador||0),0):0;
  $('ent-gnh').textContent=fR(g);
  // Lojas vinculadas
  await carregarLojaAtiva();
  if(U.online)inicRast();
  // Polling alertas
  ivs.alerta=setInterval(verificarAlertas,8000);
  verificarAlertas();
  // Notif rota
  verificarRotaAtiva();
}

async function carregarLojaAtiva(){
  const infoBox=$('ent-loja-ativa-info');
  const selBox=$('ent-selecionar-loja-box');

  // PASSO 1: Mostra imediatamente o que est√° no localStorage (resposta instant√¢nea)
  function renderCard(nome,codigo,ativa,lojaId){
    const cor=ativa?'#e8f5e9':'#f0f4ff';
    const borda=ativa?'#00C9A7':'#004E89';
    const corText=ativa?'#1b5e20':'#004E89';
    const status=ativa?'‚úÖ Online ‚Äî trabalhando agora':'‚è∏Ô∏è Conectado ‚Äî clique em Ficar Online';
    const corStatus=ativa?'#2e7d32':'#e65100';
    const btnDesv=lojaId&&!ativa?`<button onclick="desvinculardaLoja('${lojaId}')" style="margin-top:7px;width:100%;background:#ffebee;color:#c62828;border:1px solid #ef9a9a;border-radius:7px;padding:6px;font-size:11px;font-weight:700;cursor:pointer;">üîì Desvincular desta loja</button>`:'';
    return `<div style="background:${cor};border-radius:10px;padding:11px;border:2px solid ${borda};">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px;">
        <span style="font-size:20px;">üè™</span>
        <strong style="font-size:16px;color:${corText};">${nome}</strong>
      </div>
      ${codigo?`<p style="font-size:11px;color:#666;margin:2px 0;">üîë C√≥digo: <strong>${codigo}</strong></p>`:''}
      <p style="font-size:12px;margin:4px 0;color:${corStatus};font-weight:700;">${status}</p>
      ${btnDesv}
    </div>`;
  }

  if(U._loja_ativa_nome){
    infoBox.innerHTML=renderCard(U._loja_ativa_nome,U._loja_ativa_codigo,U.online,U.loja_ativa_id);
    selBox.classList.add('hidden');
  }

  // PASSO 2: Busca associa√ß√µes reais no banco para validar e atualizar
  const{data:assoc}=await db.from('loja_entregadores')
    .select('loja_id,l:loja_id(id,nome_loja,nome,logo_url,codigo_loja)')
    .eq('entregador_id',U.id);

  if(!assoc||!assoc.length){
    if(!U._loja_ativa_nome){
      infoBox.innerHTML='<p style="font-size:12px;color:#999;margin:4px 0;">Sem loja vinculada. Digite o c√≥digo abaixo.</p>';
    }
    selBox.classList.add('hidden');
    return;
  }

  // Encontra a loja ativa: por ID > por nome > √∫nica loja
  let lojaAtiva=null;
  if(U.loja_ativa_id){lojaAtiva=assoc.find(a=>a.loja_id===U.loja_ativa_id);}
  if(!lojaAtiva&&U._loja_ativa_nome){
    lojaAtiva=assoc.find(a=>a.l&&(a.l.nome_loja||a.l.nome)===U._loja_ativa_nome);
  }
  if(!lojaAtiva&&assoc.length===1){lojaAtiva=assoc[0];}

  if(lojaAtiva&&lojaAtiva.l){
    const lj=lojaAtiva.l;
    const nomeLoja=lj.nome_loja||lj.nome;
    // Atualiza UI com dados reais do banco
    infoBox.innerHTML=renderCard(nomeLoja,lj.codigo_loja,U.online,lojaAtiva.loja_id);
    // Logo da loja removida ‚Äî wallpaper √© a identidade visual
    // Salva no localStorage
    U.loja_ativa_id=lojaAtiva.loja_id;
    U._loja_ativa_nome=nomeLoja;
    U._loja_ativa_codigo=lj.codigo_loja||'';
    salvarU();
    // Salva tamb√©m na chave dedicada (sobrevive a logout e recarregamentos)
    localStorage.setItem('loja_vinc_'+U.id,JSON.stringify({
      loja_ativa_id:U.loja_ativa_id,
      _loja_ativa_nome:U._loja_ativa_nome,
      _loja_ativa_codigo:U._loja_ativa_codigo
    }));
    selBox.classList.add('hidden');
    // Bot√£o trocar se tem m√∫ltiplas
    if(assoc.length>1){
      infoBox.innerHTML+=`<p style="font-size:11px;color:#888;margin-top:6px;">
        Voc√™ tem ${assoc.length} lojas. 
        <button onclick="trocarLoja()" style="background:none;border:none;color:#004E89;font-weight:700;cursor:pointer;font-size:11px;padding:0;text-decoration:underline;">Trocar loja</button>
      </p>`;
    }
    // Tenta salvar no banco (n√£o bloqueia se coluna n√£o existir)
    db.from('usuarios').update({loja_ativa_id:lojaAtiva.loja_id}).eq('id',U.id).then(()=>{}).catch(()=>{});
    return;
  }

  // M√∫ltiplas lojas sem ativa definida ‚Äî mostra seletor
  infoBox.innerHTML=`<p style="font-size:12px;color:#e65100;margin-bottom:6px;">‚ö†Ô∏è Selecione com qual loja vai trabalhar hoje:</p>`;
  const sel=$('ent-sel-loja-ativa');sel.innerHTML='';
  assoc.forEach(a=>sel.innerHTML+=`<option value="${a.loja_id}">${a.l?a.l.nome_loja||a.l.nome:'Loja'}</option>`);
  selBox.classList.remove('hidden');
}

function trocarLoja(){
  U.loja_ativa_id=null;salvarU();
  carregarLojaAtiva();
}

async function confirmarLojaAtiva(){
  const lid=v('ent-sel-loja-ativa');if(!lid)return;
  await db.from('usuarios').update({loja_ativa_id:lid,online:true}).eq('id',U.id);
  U.loja_ativa_id=lid;U.online=true;salvarU();
  atuBtnOn(true);inicRast();await carregarLojaAtiva();
}

async function verificarAlertas(){
  if(!U)return;
  // Verificar pedido pronto para este entregador
  const{data:peds}=await db.from('entregas').select('id').eq('entregador_id',U.id).eq('pedido_pronto',true).in('status',['aceito','em_rota']).limit(1);
  const alerta=$('ent-pedido-alerta');
  if(peds&&peds.length){
    if(alerta.classList.contains('hidden')){
      alerta.classList.remove('hidden');beepAlerta();
      $('rota-notif').classList.remove('hidden');
    }
  }else{
    alerta.classList.add('hidden');$('rota-notif').classList.add('hidden');
  }
}

async function verificarRotaAtiva(){
  const{data:rota}=await db.from('entregas').select('id').eq('entregador_id',U.id).in('status',['aceito','em_rota','chegou_loja','saiu_entrega']).limit(1);
  if(rota&&rota.length)$('rota-notif').classList.remove('hidden');
  else $('rota-notif').classList.add('hidden');
}

function atuBtnOn(on){
  const c=$('btn-on-card');
  if(on){c.style.background='linear-gradient(135deg,#00C9A7,#007a65)';$('ico-on').innerHTML='&#128308;';$('txt-on').textContent='Ficar Offline';$('txt-on').style.color='white';$('ent-st').innerHTML='&#128994; Online';}
  else{c.style.background='';$('ico-on').innerHTML='&#128994;';$('txt-on').textContent='Ficar Online';$('txt-on').style.color='';$('ent-st').innerHTML='&#9899; Offline';}
}

async function toggleOnline(){
  const{data:assoc}=await db.from('loja_entregadores').select('loja_id,l:loja_id(nome_loja,nome)').eq('entregador_id',U.id);
  // Se tentar ficar ONLINE sem loja
  if(!U.online){
    if(!assoc||!assoc.length){
      alert('‚ö†Ô∏è Nenhuma loja conectada.\n\nDigite o c√≥digo da loja no campo acima e clique em Conectar primeiro.');
      return;
    }
    // Se tem m√∫ltiplas lojas e n√£o tem loja ativa selecionada, mostrar seletor
    if(assoc.length>1&&!U.loja_ativa_id&&!U._loja_ativa_nome){
      $('ent-selecionar-loja-box').classList.remove('hidden');
      return;
    }
    // Se tem apenas uma loja, define ela automaticamente
    if(assoc.length===1&&!U.loja_ativa_id){
      U.loja_ativa_id=assoc[0].loja_id;
      if(assoc[0].l){U._loja_ativa_nome=assoc[0].l.nome_loja||assoc[0].l.nome;}
      salvarU();
    }
  }
  const novo=!U.online;
  // Ao ficar offline, NAO zera a loja ativa ‚Äî ela deve persistir o turno todo
  await db.from('usuarios').update({online:novo}).eq('id',U.id);
  U.online=novo;
  // Nao zera loja_ativa_id ao ficar offline
  salvarU();
  atuBtnOn(novo);
  if(novo){
    inicRast();
    const av=$('gps-bg-aviso');
    if(av)av.classList.remove('hidden');
    await carregarLojaAtiva();
  }else{
    if(ivs.rast){navigator.geolocation&&navigator.geolocation.clearWatch(ivs.rast);ivs.rast=null;}
    if(ivs.rastPush){clearInterval(ivs.rastPush);ivs.rastPush=null;}
    swPostMessage({type:'STOP_GPS'});
    carregarLojaAtiva();
  }
}

function inicRast(){
  if(ivs.rast!=null){try{navigator.geolocation&&navigator.geolocation.clearWatch(ivs.rast);}catch(e){}ivs.rast=null;}
  if(ivs.rastPush){clearInterval(ivs.rastPush);ivs.rastPush=null;}
  if(!navigator.geolocation)return;

  // Ativa Wake Lock: impede tela de apagar enquanto online (mant√©m GPS ativo)
  ativarWakeLock();

  const salvarPos=async (lat,lng)=>{
    myLat=lat;myLng=lng;gpsOk=true;
    showGpsBanner(false);
    const dbg=$('gps-debug');
    if(dbg)dbg.innerHTML=`<span style="color:#27ae60;font-size:10px;">üì° GPS ativo: ${lat.toFixed(5)}, ${lng.toFixed(5)}</span>`;
    if(U&&U.online){
      db.from('usuarios').update({latitude:lat,longitude:lng}).eq('id',U.id)
        .then(({error})=>{if(error)console.error('[GPS]',error);});
    }
  };

  // Inicia SW com timer de backup (a cada 15s mesmo app fechado)
  if(U&&U.id)swPostMessage({type:'START_GPS',userId:U.id,sbUrl:SB_URL,sbKey:SB_KEY,intervalMs:15000});

  // watchPosition: atualiza a cada movimento detectado pelo dispositivo
  try{
    ivs.rast=navigator.geolocation.watchPosition(
      p=>salvarPos(p.coords.latitude,p.coords.longitude),
      err=>{if(err.code===1)showGpsBanner(true);},
      {enableHighAccuracy:true,timeout:30000,maximumAge:0}
    );
  }catch(e){ivs.rast=null;}

  // Intervalo de 5s como garantia (funciona mesmo sem movimento)
  ivs.rastPush=setInterval(()=>{
    if(!U||!U.online)return;
    navigator.geolocation.getCurrentPosition(
      p=>salvarPos(p.coords.latitude,p.coords.longitude),
      ()=>{if(myLat&&myLng&&U&&U.online)db.from('usuarios').update({latitude:myLat,longitude:myLng}).eq('id',U.id);},
      {enableHighAccuracy:true,timeout:8000,maximumAge:10000}
    );
  },5000);

  // Posi√ß√£o imediata ao entrar online
  navigator.geolocation.getCurrentPosition(
    p=>salvarPos(p.coords.latitude,p.coords.longitude),
    err=>{if(err.code===1)showGpsBanner(true);},
    {enableHighAccuracy:true,timeout:10000,maximumAge:0}
  );
}

function abrirFoto(){$('input-foto').click();}
async function uploadFoto(event){
  const file=event.target.files[0];if(!file)return;
  const reader=new FileReader();
  reader.onload=async function(e){
    const b=e.target.result;
    await db.from('usuarios').update({foto_url:b}).eq('id',U.id);
    U.foto_url=b;salvarU();
    $('foto-img').src=b;$('foto-img').classList.remove('hidden');$('foto-ph').classList.add('hidden');
  };
  reader.readAsDataURL(file);
}

async function desvinculardaLoja(lojaId,lojaIdConfirm){
  if(!confirm('Tem certeza que deseja se DESVINCULAR desta loja?\nVoc√™ n√£o receber√° mais pedidos dela.'))return;
  await db.from('loja_entregadores').delete().eq('entregador_id',U.id).eq('loja_id',lojaId);
  await db.from('usuarios').update({online:false}).eq('id',U.id);
  U.online=false;U.loja_ativa_id=null;U._loja_ativa_nome=null;U._loja_ativa_codigo=null;
  salvarU();
  localStorage.removeItem('loja_vinc_'+U.id);
  atuBtnOn(false);
  carregarLojaAtiva();
  $('msg-cod').className='msg-ok';
  $('msg-cod').textContent='Desvinculado com sucesso.';
}

async function conectarCodigo(){
  const cod=v('cod-loja-inp').toUpperCase();const msg=$('msg-cod');
  if(cod.length<4){msg.className='msg-error';msg.textContent='Digite o codigo da loja';return;}
  msg.className='';msg.textContent='Validando...';
  const{data:loja,error:ljErr}=await db.from('usuarios').select('id,nome_loja,nome,codigo_loja').eq('codigo_loja',cod).eq('tipo','loja').single();
  if(!loja){msg.className='msg-error';msg.textContent='‚ùå C√≥digo n√£o encontrado. Verifique e tente novamente.';return;}
  const nomeLoja=loja.nome_loja||loja.nome;
  // REGRA: entregador pode estar vinculado a m√∫ltiplas lojas, mas s√≥ trabalhar em UMA por vez
  // Verifica se j√° est√° online em outra loja
  if(U.online&&U.loja_ativa_id&&U.loja_ativa_id!==loja.id){
    msg.className='msg-error';
    msg.textContent='‚ö†Ô∏è Voc√™ est√° online em outra loja. Fique Offline primeiro antes de trocar de loja.';
    return;
  }
  // Insere associa√ß√£o (ignora duplicata)
  const{error:insErr}=await db.from('loja_entregadores').insert([{loja_id:loja.id,entregador_id:U.id}]);
  if(insErr&&insErr.code!=='23505'){msg.className='msg-error';msg.textContent='Erro ao vincular: '+insErr.message;return;}
  // Salva loja ativa no banco
  const{error:updErr}=await db.from('usuarios').update({loja_ativa_id:loja.id}).eq('id',U.id);
  if(updErr){console.warn('[loja_ativa_id]',updErr.message);}
  // Salva localmente tamb√©m (fallback se coluna n√£o existir no banco)
  U.loja_ativa_id=loja.id;
  U._loja_ativa_nome=nomeLoja;
  U._loja_ativa_codigo=loja.codigo_loja;
  salvarU();
  // Salva em chave permanente ‚Äî persiste mesmo ap√≥s logout/fechar app
  localStorage.setItem('loja_vinc_'+U.id,JSON.stringify({
    loja_ativa_id:loja.id,
    _loja_ativa_nome:nomeLoja,
    _loja_ativa_codigo:loja.codigo_loja||''
  }));
  $('cod-loja-inp').value='';
  // Mostra card de confirma√ß√£o imediatamente
  const infoBox=$('ent-loja-ativa-info');
  infoBox.innerHTML=`
    <div style="background:#e8f5e9;border-radius:10px;padding:12px;border:2px solid #00C9A7;">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px;">
        <span style="font-size:20px;">üè™</span>
        <strong style="font-size:15px;color:#1b5e20;">${nomeLoja}</strong>
      </div>
      <p style="font-size:12px;color:#2e7d32;margin:2px 0;">üîë C√≥digo: <strong>${loja.codigo_loja}</strong></p>
      <p style="font-size:12px;color:#2e7d32;margin:2px 0;font-weight:700;">‚úÖ Loja conectada com sucesso!</p>
    </div>`;
  $('ent-selecionar-loja-box').classList.add('hidden');
  if(!U.online){
    msg.className='msg-ok';
    msg.textContent='‚úÖ Loja conectada! Agora clique em "Ficar Online"';
  }else{
    msg.className='msg-ok';
    msg.textContent='‚úÖ Loja conectada!';
  }
  setTimeout(()=>carregarLojaAtiva(),500);
}

// ===== ROTA ENTREGADOR COM STATUS GPS =====
async function abrirRotaEnt(){
  openM('rota-ent');
  // Marcar como visto (remover alerta)
  await db.from('entregas').update({pedido_pronto:false}).eq('entregador_id',U.id).in('status',['aceito','em_rota','chegou_loja','saiu_entrega']);
  $('ent-pedido-alerta').classList.add('hidden');$('rota-notif').classList.add('hidden');
  carregarRotaEnt();
}

async function carregarRotaEnt(){
  const{data}=await db.from('entregas').select('*,loja:loja_id(nome_loja,nome,endereco,loja_lat,loja_lng)').eq('entregador_id',U.id).in('status',['aceito','em_rota','chegou_loja','saiu_entrega','pendente']).order('ordem_rota');
  const el=$('rota-ent-lst');
  if(!data||!data.length){el.innerHTML='<p style="color:#999;text-align:center;padding:20px">Nenhuma entrega atribuida.</p>';return;}
  const ends=data.map(e=>encodeURIComponent(e.endereco_entrega));
  const dest=ends[ends.length-1],wp=ends.slice(0,-1).join('|');
  // Waze: melhor para motos no Brasil
  // Botoes de navegacao no topo (rota completa)
  const mapsUrlRota=`https://www.google.com/maps/dir/?api=1&destination=${dest}${wp?'&waypoints='+wp:''}&travelmode=two-wheeler`;
  const wazeUrlRota=`waze://ul?q=${dest}&navigate=yes`;
  const totalEnts=data.length;
  el.innerHTML=`<div style="margin-bottom:14px;">
    <p style="font-size:11px;color:#888;margin-bottom:6px;text-align:center;">üìç ${totalEnts === 1 ? 'Navegar para a entrega' : 'Rota completa com '+totalEnts+' paradas'}</p>
    <div class="row" style="gap:7px;">
      <a href="${mapsUrlRota}" target="_blank" style="flex:1;">
        <button class="btn btn-blue" style="padding:10px;width:100%;font-size:13px;">üó∫Ô∏è Google Maps</button>
      </a>
      <a href="${wazeUrlRota}" target="_blank" style="flex:1;" onclick="if(!this.href.startsWith('waze'))return;setTimeout(()=>{if(document.hasFocus())this.href='https://waze.com/ul?q=${dest}&navigate=yes';},500)">
        <button class="btn" style="padding:10px;width:100%;font-size:13px;background:#00BBCC;color:white;">üöó Waze</button>
      </a>
    </div>
  </div>`;
  data.forEach((e,i)=>{
    const st=e.status_detalhado||e.status;
    const lojaLat=e.loja&&e.loja.loja_lat||RP_LAT,lojaLng=e.loja&&e.loja.loja_lng||RP_LNG;
    const temCodIfood=!!(e.codigo_confirmacao);
    // Botoes de status
    let botoesHtml='';
    if(st==='aceito'||st==='pendente'){botoesHtml+=`<button class="btn-sm blue" onclick="entStatus('${e.id}','chegou_loja',${lojaLat},${lojaLng})" style="margin:2px">üè™ Cheguei na Loja</button>`;}
    if(st==='chegou_loja'){botoesHtml+=`<button class="btn-sm orange" onclick="entStatus('${e.id}','saiu_entrega',${lojaLat},${lojaLng})" style="margin:2px">üõµ Saindo para Entrega</button>`;}
    if(st==='saiu_entrega'||st==='em_rota'){
      if(temCodIfood){
        // Exige c√≥digo antes de finalizar
        botoesHtml+=`<button class="btn-sm green" onclick="confirmarEntregaComCodigo('${e.id}','${e.numero_pedido||''}',${e.lat_entrega||RP_LAT},${e.lng_entrega||RP_LNG})" style="margin:2px">‚úÖ Confirmar Entrega</button>`;
      } else {
        botoesHtml+=`<button class="btn-sm green" onclick="entStatus('${e.id}','entregue',${e.lat_entrega||RP_LAT},${e.lng_entrega||RP_LNG})" style="margin:2px">‚úÖ Confirmar Entrega</button>`;
      }
    }
    const steps=['aceito','chegou_loja','saiu_entrega','entregue'];
    const curI=steps.indexOf(st);
    const flowHtml=steps.map((s,idx)=>`<div class="sf-step ${idx<curI?'done':idx===curI?'current':''}">${['Aceito','Na Loja','A Caminho','Entregue'][idx]}</div>`).join('');
    const endEnc=encodeURIComponent(e.endereco_entrega);
    // Link Maps abre app externo via deep link
    const mapsLink=`https://www.google.com/maps/dir/?api=1&destination=${endEnc}&travelmode=two-wheeler`;
    const wazeLink=`waze://ul?q=${endEnc}&navigate=yes`;
    el.innerHTML+=`<div class="ecard rota">
      <div style="display:flex;justify-content:space-between;margin-bottom:4px;"><strong>${i+1}. ${e.numero_pedido?'#'+e.numero_pedido:e.cliente_nome||'Entrega'}</strong><span class="badge b-${st}">${st}</span></div>
      <div class="status-flow">${flowHtml}</div>
      <p style="font-size:12px;color:#555;margin:3px 0">üìç ${e.endereco_entrega}</p>
      ${e.cliente_nome?`<p style="font-size:11px;color:#888">üë§ ${e.cliente_nome}${e.cliente_telefone?` | <a href="tel:${e.cliente_telefone}" style="color:#004E89;font-weight:700">üìû ${e.cliente_telefone}</a>`:''}</p>`:''}
      ${e.distancia_km>0?`<p style="font-size:11px;color:#888">üìè ${parseFloat(e.distancia_km).toFixed(1)}km | <strong style="color:#2e7d32">${fR(e.valor_corrida||e.valor_entregador)}</strong></p>`:''}
      ${temCodIfood?`<div style="background:#fff3e0;padding:8px;border-radius:8px;margin:5px 0;border:1.5px solid #FF6B35;">
        <p style="font-size:11px;font-weight:700;color:#e65100;margin:0">‚ö†Ô∏è Esta entrega exige confirma√ß√£o no iFood ao entregar</p>
      </div>`:''}
      <div class="row" style="margin-top:7px;flex-wrap:wrap;gap:4px;">
        ${botoesHtml}
      </div>
    </div>`;
  });
}

async function entStatus(id,novoStatus,refLat,refLng){
  const RAIO_M=350; // metros ‚Äî raio de valida√ß√£o
  if(novoStatus==='chegou_loja'||novoStatus==='entregue'){
    // 1) Verifica GPS global (localStorage √© mais confi√°vel que banco pois sync pode atrasar)
    const gpsGlobalLocal=localStorage.getItem('adm_gps_global')==='1';
    let gpsObrigatorio=gpsGlobalLocal;
    // 2) Confirma com banco se o localStorage diz false (pode estar desatualizado)
    if(!gpsObrigatorio){
      try{
        const{data:ped}=await db.from('entregas').select('loja_id').eq('id',id).single();
        if(ped?.loja_id){
          const{data:lj}=await db.from('usuarios').select('gps_validacao_obrigatorio').eq('id',ped.loja_id).single();
          gpsObrigatorio=lj?.gps_validacao_obrigatorio||false;
          // Sincroniza localStorage com banco
          if(gpsObrigatorio)localStorage.setItem('adm_gps_global','1');
        }
      }catch(e){}
    }
    if(gpsObrigatorio){
      // Pede posi√ß√£o FRESCA (maximumAge:0 = n√£o usa cache)
      try{
        const pos=await new Promise((resolve,reject)=>{
          const timer=setTimeout(()=>{
            // Timeout: tenta usar a √∫ltima posi√ß√£o conhecida mesmo que velha
            if(myLat&&myLng)resolve({lat:myLat,lng:myLng,stale:true});
            else reject('timeout');
          },10000);
          navigator.geolocation.getCurrentPosition(
            p=>{clearTimeout(timer);myLat=p.coords.latitude;myLng=p.coords.longitude;resolve({lat:p.coords.latitude,lng:p.coords.longitude,stale:false});},
            err=>{clearTimeout(timer);if(myLat&&myLng)resolve({lat:myLat,lng:myLng,stale:true});else reject('bloqueado');},
            {enableHighAccuracy:true,timeout:9000,maximumAge:0}
          );
        });
        if(!refLat||!refLng||refLat===0){
          // Sem coordenada de refer√™ncia ‚Äî n√£o bloqueia mas avisa
          console.warn('[GPS] refLat/refLng ausente, pulando valida√ß√£o');
        } else {
          const dist=distKm(pos.lat,pos.lng,refLat,refLng)*1000;
          const aviso=pos.stale?' (GPS desatualizado)':'';
          if(dist>RAIO_M){
            alert('üìç Valida√ß√£o de GPS ativa'+aviso+'\n\nVoc√™ precisa estar a menos de '+RAIO_M+'m do local.\nDist√¢ncia atual: '+Math.round(dist)+'m\n\nCertifique-se de estar no endere√ßo correto antes de confirmar.');
            return;
          }
        }
      }catch(e){
        alert('üìç GPS obrigat√≥rio mas n√£o dispon√≠vel.\nAtive o GPS do celular e tente novamente.\n('+e+')');
        return;
      }
    }
  }
  const upd={status_detalhado:novoStatus};
  if(novoStatus==='chegou_loja')upd.chegou_loja_at=new Date().toISOString();
  if(novoStatus==='saiu_entrega'){upd.saiu_entrega_at=new Date().toISOString();upd.status='em_rota';}
  if(novoStatus==='entregue'){upd.status='entregue';upd.entregue_at=new Date().toISOString();upd.pedido_pronto=false;}
  await db.from('entregas').update(upd).eq('id',id);
  carregarRotaEnt();initEnt();
}

// ‚îÄ‚îÄ Confirma√ß√£o de Entrega com C√≥digo iFood (modal) ‚îÄ‚îÄ
let _ifoodPedId=null,_ifoodRefLat=null,_ifoodRefLng=null;

async function confirmarEntregaComCodigo(pedId,numPedido,refLat,refLng){
  _ifoodPedId=pedId;_ifoodRefLat=refLat;_ifoodRefLng=refLng;
  $('ifood-conf-num').textContent=numPedido?'#'+numPedido:'';
  $('ifood-conf-link').href=`${IFOOD_URL}${numPedido||''}`;
  clearM('ifood-conf-msg');
  openM('ifood-conf');
}

async function finalizarComCodigoIfood(){
  // Mantido para compatibilidade ‚Äî redireciona para vers√£o sem c√≥digo
  await finalizarSemCodigoIfood();
}
async function finalizarSemCodigoIfood(){
  showM('ifood-conf-msg','Finalizando...', true);
  closeM('ifood-conf');
  await entStatus(_ifoodPedId,'entregue',_ifoodRefLat,_ifoodRefLng);
}

// ‚îÄ‚îÄ Admin: Finalizar entrega manualmente ‚îÄ‚îÄ
async function admFinalizarEntrega(id){
  if(!confirm('Finalizar esta entrega manualmente pelo painel administrativo?'))return;
  await db.from('entregas').update({status:'entregue',status_detalhado:'entregue',entregue_at:new Date().toISOString()}).eq('id',id);
  await carregarDadosAdmin();
}

// ‚îÄ‚îÄ Admin: Realocar entrega para outro entregador ‚îÄ‚îÄ
async function admRealocarEntrega(pedId){
  const{data:ents}=await db.from('usuarios').select('id,nome').eq('tipo','entregador').eq('online',true);
  if(!ents||!ents.length){alert('Nenhum entregador online no momento.');return;}
  const opts=ents.map((e,i)=>`${i+1}. ${e.nome}`).join('\n');
  const escolha=prompt(`Escolha o novo entregador (digite o n√∫mero):\n\n${opts}`);
  if(!escolha)return;
  const idx=parseInt(escolha)-1;
  if(isNaN(idx)||idx<0||idx>=ents.length){alert('Op√ß√£o inv√°lida.');return;}
  await db.from('entregas').update({entregador_id:ents[idx].id}).eq('id',pedId);
  await carregarDadosAdmin();
  alert(`‚úÖ Entrega realocada para ${ents[idx].nome}`);
}

// ‚îÄ‚îÄ Loja: Finalizar entrega manualmente (sem c√≥digo) ‚îÄ‚îÄ
async function ljFinalizarEntrega(id){
  if(!confirm('Finalizar esta entrega?\nNenhum c√≥digo de confirma√ß√£o √© necess√°rio.'))return;
  await db.from('entregas').update({status:'entregue',status_detalhado:'entregue',entregue_at:new Date().toISOString()}).eq('id',id);
  carregarPedidos();
}

// ‚îÄ‚îÄ Admin: Clicar no entregador foca no mapa ‚îÄ‚îÄ
function focarEntAdm(entId){
  const mk=mrks['admin'];
  const marker=mk[entId];
  if(marker&&mapas['admin']){
    seg['admin']=false;
    mapas['admin'].setView(marker.getLatLng(),17,{animate:true});
    marker.openPopup();
    // Scroll at√© o mapa
    const mapaEl=$('mapa-admin');
    if(mapaEl)mapaEl.scrollIntoView({behavior:'smooth',block:'center'});
  }else{
    alert('Localiza√ß√£o ainda n√£o dispon√≠vel para este entregador.');
  }
}

// ‚îÄ‚îÄ Loja: Clicar em entregador para focar no mapa ‚îÄ‚îÄ
function focarEntregadorMapa(entId){
  const mk=mrks['loja'];
  const marker=mk[entId];
  if(marker&&mapas['loja']){
    seg['loja']=false;
    mapas['loja'].setView(marker.getLatLng(),17,{animate:true});
    marker.openPopup();
    // Destaca o badge clicado
    document.querySelectorAll('#lista-on-lj span').forEach(s=>s.style.outline='');
    event&&event.currentTarget&&(event.currentTarget.style.outline='3px solid #FFD700');
  }else{
    alert('Localiza√ß√£o ainda n√£o dispon√≠vel. O entregador precisa ter o GPS ativo.');
  }
}
let _gnhFiltro='hoje';
let _gnhMesOffset=0; // 0 = m√™s atual, -1 = m√™s passado, -2 = 2 meses atr√°s, etc.

// Verifica virada de m√™s e arquiva ganhos do m√™s anterior no banco
async function verificarArquivoMensal(){
  const agora=new Date();
  const chave='ganhos_mes_arquivado_'+agora.getFullYear()+'_'+(agora.getMonth()+1);
  // Se j√° arquivou este m√™s, n√£o faz nada
  if(localStorage.getItem(chave))return;
  // Verifica se tem ganhos do m√™s PASSADO para arquivar
  const mesPassado=new Date(agora.getFullYear(),agora.getMonth()-1,1);
  const fimMesPassado=new Date(agora.getFullYear(),agora.getMonth(),0,23,59,59,999);
  const{data:ents}=await db.from('entregas').select('valor_corrida,valor_entregador').eq('entregador_id',U.id).in('status',['entregue']).gte('created_at',mesPassado.toISOString()).lte('created_at',fimMesPassado.toISOString());
  if(ents&&ents.length>0){
    const total=ents.reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0);
    const nomeMes=mesPassado.toLocaleString('pt-BR',{month:'long',year:'numeric'});
    // Salva no banco como hist√≥rico
    const histKey='historico_ganhos_'+mesPassado.getFullYear()+'_'+(mesPassado.getMonth()+1);
    try{
      await db.from('usuarios').update({[histKey]:JSON.stringify({total,corridas:ents.length,mes:nomeMes})}).eq('id',U.id);
    }catch(e){}// Ignora se coluna n√£o existir
    // Salva no localStorage mesmo assim
    const hist=JSON.parse(localStorage.getItem('ganhos_historico_'+U.id)||'[]');
    hist.unshift({mes:nomeMes,total,corridas:ents.length,ano:mesPassado.getFullYear(),menum:mesPassado.getMonth()+1});
    if(hist.length>12)hist.pop();// Mant√©m √∫ltimos 12 meses
    localStorage.setItem('ganhos_historico_'+U.id,JSON.stringify(hist));
    localStorage.setItem(chave,'1');
  } else {
    localStorage.setItem(chave,'1');// Marca como verificado mesmo sem dados
  }
}

async function abrirGanhosEnt(){
  openM('ganhos');
  _gnhFiltro='hoje';
  _gnhMesOffset=0;
  // Verificar e arquivar ganhos do m√™s passado se necess√°rio
  verificarArquivoMensal().catch(e=>console.warn('[arquivo mensal]',e));
  // Highlight bot√£o ativo
  ['hoje','ontem','semana','mes'].forEach(f=>{
    const b=$('gnhf-'+f);if(b){b.style.background=f==='hoje'?'#00C9A7':'#888';b.style.opacity='1';}
  });
  // Oculta nav de mes ao abrir (filtro padr√£o √© hoje)
  const navEl=$('gnh-nav-mes');if(navEl)navEl.style.display='none';
  await carregarResumoGanhos();
  await carregarGanhos();
  // Mostrar hist√≥rico mensal se houver
  mostrarHistoricoMensal();
}

function mostrarHistoricoMensal(){
  const hist=JSON.parse(localStorage.getItem('ganhos_historico_'+U.id)||'[]');
  if(!hist.length)return;
  const el=$('gnh-dados');
  const histHTML=`<div style="background:white;border-radius:12px;padding:12px;margin-top:10px;box-shadow:0 1px 6px rgba(0,0,0,.06);">
    <div style="font-size:12px;font-weight:700;color:#333;margin-bottom:8px;">üìÖ Hist√≥rico Mensal</div>
    ${hist.map(h=>`<div style="display:flex;justify-content:space-between;padding:7px 0;border-bottom:1px solid #f5f5f5;font-size:13px;">
      <span style="color:#666;text-transform:capitalize;">${h.mes}</span>
      <div style="text-align:right;">
        <strong style="color:#1b5e20;">${fR(h.total)}</strong>
        <span style="font-size:11px;color:#888;display:block;">${h.corridas} corrida${h.corridas!==1?'s':''}</span>
      </div>
    </div>`).join('')}
  </div>`;
  // Adiciona ao final se n√£o existir ainda
  if(!el.querySelector('#hist-mensal-div')){
    const div=document.createElement('div');div.id='hist-mensal-div';div.innerHTML=histHTML;
    el.appendChild(div);
  }
}

function filtroGanhos(per,btn){
  _gnhFiltro=per;
  _gnhMesOffset=0; // reset ao trocar filtro
  ['hoje','ontem','semana','mes'].forEach(f=>{
    const b=$('gnhf-'+f);if(b){b.style.background=f===per?'#00C9A7':'#888';}
  });
  // Mostrar/ocultar navega√ß√£o de meses
  const navEl=$('gnh-nav-mes');
  if(per==='mes'){
    navEl.style.display='flex';
    atualizarLabelMes();
  } else {
    navEl.style.display='none';
  }
  carregarResumoGanhos();
  carregarGanhos();
}

function navMes(dir){
  const novoOffset=_gnhMesOffset+dir;
  if(novoOffset>0)return;
  _gnhMesOffset=novoOffset;
  atualizarLabelMes();
  carregarResumoGanhos(); // atualiza resumo pro m√™s navegado
  carregarGanhos();
  const proxBtn=$('gnh-nav-prox');
  if(proxBtn)proxBtn.style.opacity=_gnhMesOffset===0?'0.3':'1';
}

function atualizarLabelMes(){
  const agora=new Date();
  const alvo=new Date(agora.getFullYear(),agora.getMonth()+_gnhMesOffset,1);
  const label=alvo.toLocaleString('pt-BR',{month:'long',year:'numeric'});
  const el=$('gnh-mes-label');if(el)el.textContent=label.charAt(0).toUpperCase()+label.slice(1);
  const proxBtn=$('gnh-nav-prox');
  if(proxBtn)proxBtn.style.opacity=_gnhMesOffset===0?'0.3':'1';
}

function periodoRange(per,mesOffset){
  const agora=new Date();
  const off=mesOffset||0;
  let inicio,fim=new Date(agora);
  fim.setHours(23,59,59,999);
  if(per==='hoje'){inicio=new Date(agora);inicio.setHours(0,0,0,0);}
  else if(per==='ontem'){
    inicio=new Date(agora);inicio.setDate(inicio.getDate()-1);inicio.setHours(0,0,0,0);
    fim=new Date(agora);fim.setDate(fim.getDate()-1);fim.setHours(23,59,59,999);
  }
  else if(per==='semana'){
    // Semana BR: Segunda a Domingo ‚Äî (getDay()+6)%7 dias desde segunda
    inicio=new Date(agora);
    inicio.setDate(inicio.getDate()-((agora.getDay()+6)%7));
    inicio.setHours(0,0,0,0);
    fim=new Date(inicio);fim.setDate(fim.getDate()+6);fim.setHours(23,59,59,999);
  }
  else{ // mes ‚Äî suporta offset para meses anteriores
    // JavaScript Date handles month underflow correctly (e.g. month -1 = December of prev year)
    const ano=agora.getFullYear();
    const mes=agora.getMonth()+off; // off negativo = meses anteriores, JS normaliza automaticamente
    inicio=new Date(ano,mes,1,0,0,0,0);
    // √öltimo dia do m√™s alvo
    fim=new Date(ano,mes+1,0,23,59,59,999);
  }
  return{inicio:inicio.toISOString(),fim:fim.toISOString()};
}

// Resumo din√¢mico ‚Äî sempre reflete o per√≠odo selecionado
async function carregarResumoGanhos(){
  const el=$('gnh-resumo');
  el.innerHTML='<p style="text-align:center;color:#aaa;font-size:12px;padding:8px 0;">Carregando resumo...</p>';
  const per=_gnhFiltro||'hoje';
  const agora=new Date();

  if(per==='mes'){
    // M√™s selecionado (pode ser passado)
    const {inicio,fim}=periodoRange('mes',_gnhMesOffset);
    const alvoDate=new Date(agora.getFullYear(),agora.getMonth()+_gnhMesOffset,1);
    const nomeMes=alvoDate.toLocaleString('pt-BR',{month:'long',year:'numeric'});
    const nomeMesFmt=nomeMes.charAt(0).toUpperCase()+nomeMes.slice(1);

    // Busca o m√™s inteiro + semanas dentro do m√™s (para breakdown semanal)
    const [rMes]=await Promise.all([
      db.from('entregas').select('valor_corrida,valor_entregador,created_at').eq('entregador_id',U.id).in('status',['entregue']).gte('created_at',inicio).lte('created_at',fim)
    ]);
    const dados=rMes.data||[];
    const totalMes=dados.reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0);

    // Divide por semana do m√™s (S1=dias 1-7, S2=8-14, S3=15-21, S4=22-fim)
    const semanas=[0,0,0,0];const cntSem=[0,0,0,0];
    dados.forEach(e=>{
      const dia=new Date(e.created_at).getDate();
      const si=dia<=7?0:dia<=14?1:dia<=21?2:3;
      semanas[si]+=parseFloat(e.valor_corrida||e.valor_entregador||0);
      cntSem[si]++;
    });
    const semLabels=['1¬™ sem','2¬™ sem','3¬™ sem','4¬™ sem'];
    el.innerHTML=`
      <div style="background:linear-gradient(135deg,#1b5e20,#2e7d32);border-radius:12px;padding:14px;text-align:center;margin-bottom:8px;color:white;">
        <p style="font-size:11px;opacity:.85;font-weight:600;text-transform:uppercase;letter-spacing:.5px;">${nomeMesFmt}</p>
        <p style="font-size:32px;font-weight:900;margin:4px 0;">${fR(totalMes)}</p>
        <p style="font-size:12px;opacity:.85;">${dados.length} corrida${dados.length!==1?'s':''}</p>
      </div>
      ${totalMes>0?`<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:5px;margin-bottom:4px;">
        ${semanas.map((v,i)=>v>0||cntSem[i]>0?`<div style="background:#f5f5f5;border-radius:8px;padding:7px 4px;text-align:center;">
          <p style="font-size:9px;color:#888;font-weight:700;text-transform:uppercase;">${semLabels[i]}</p>
          <p style="font-size:13px;font-weight:800;color:#2e7d32;">${fR(v)}</p>
          <p style="font-size:10px;color:#777;">${cntSem[i]}x</p>
        </div>`:`<div style="background:#f9f9f9;border-radius:8px;padding:7px 4px;text-align:center;opacity:.4;">
          <p style="font-size:9px;color:#bbb;font-weight:700;">${semLabels[i]}</p>
          <p style="font-size:12px;color:#ccc;">‚Äî</p>
        </div>`).join('')}
      </div>`:''}`;

  } else {
    // Para hoje/ontem/semana: mostra o per√≠odo selecionado + comparativo
    const {inicio,fim}=periodoRange(per,0);

    // Sempre busca todos os 4 para os cards de contexto (per√≠odo atual)
    const inicioHoje=new Date(agora);inicioHoje.setHours(0,0,0,0);
    const inicioOntem=new Date(agora);inicioOntem.setDate(inicioOntem.getDate()-1);inicioOntem.setHours(0,0,0,0);
    const fimOntem=new Date(agora);fimOntem.setDate(fimOntem.getDate()-1);fimOntem.setHours(23,59,59,999);
    const inicioSem=new Date(agora);inicioSem.setDate(inicioSem.getDate()-((agora.getDay()+6)%7));inicioSem.setHours(0,0,0,0);
    const fimSem=new Date(inicioSem);fimSem.setDate(fimSem.getDate()+6);fimSem.setHours(23,59,59,999);
    const inicioMes=new Date(agora.getFullYear(),agora.getMonth(),1);
    const fimMes=new Date(agora.getFullYear(),agora.getMonth()+1,0,23,59,59,999);

    const[rH,rO,rS,rM]=await Promise.all([
      db.from('entregas').select('valor_corrida,valor_entregador').eq('entregador_id',U.id).in('status',['entregue']).gte('created_at',inicioHoje.toISOString()).lte('created_at',new Date().toISOString()),
      db.from('entregas').select('valor_corrida,valor_entregador').eq('entregador_id',U.id).in('status',['entregue']).gte('created_at',inicioOntem.toISOString()).lte('created_at',fimOntem.toISOString()),
      db.from('entregas').select('valor_corrida,valor_entregador').eq('entregador_id',U.id).in('status',['entregue']).gte('created_at',inicioSem.toISOString()).lte('created_at',fimSem.toISOString()),
      db.from('entregas').select('valor_corrida,valor_entregador').eq('entregador_id',U.id).in('status',['entregue']).gte('created_at',inicioMes.toISOString()).lte('created_at',fimMes.toISOString()),
    ]);
    const soma=arr=>(arr||[]).reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0);
    const dH=rH.data||[],dO=rO.data||[],dS=rS.data||[],dM=rM.data||[];

    const cards=[
      {label:'Hoje',val:soma(dH),cnt:dH.length,bg:'#e8f5e9',cor:'#2e7d32',per:'hoje',id:'gnhf-hoje'},
      {label:'Ontem',val:soma(dO),cnt:dO.length,bg:'#fff3e0',cor:'#e65100',per:'ontem',id:'gnhf-ontem'},
      {label:'Esta Semana',val:soma(dS),cnt:dS.length,bg:'#e3f2fd',cor:'#1565C0',per:'semana',id:'gnhf-semana'},
      {label:'Este M√™s',val:soma(dM),cnt:dM.length,bg:'#f3e5f5',cor:'#6a1b9a',per:'mes',id:'gnhf-mes'},
    ];
    el.innerHTML=`<div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:4px;">
      ${cards.map(c=>`<div style="background:${c.bg};border-radius:10px;padding:12px;text-align:center;cursor:pointer;${per===c.per?'border:2px solid '+c.cor+';':''}" onclick="filtroGanhos('${c.per}',$('${c.id}'))">
        <p style="font-size:10px;color:#666;font-weight:700;text-transform:uppercase;">${c.label}</p>
        <p style="font-size:22px;font-weight:800;color:${c.cor};">${fR(c.val)}</p>
        <p style="font-size:11px;color:#555;">${c.cnt} corrida${c.cnt!==1?'s':''}</p>
      </div>`).join('')}
    </div>`;
  }
}

async function carregarGanhos(){
  const per=_gnhFiltro||'hoje';
  const el=$('gnh-dados');el.innerHTML='<p style="text-align:center;color:#999;font-size:12px;">Carregando...</p>';
  const{inicio,fim}=periodoRange(per,per==='mes'?_gnhMesOffset:0);
  const{data}=await db.from('entregas').select('*,l:loja_id(nome_loja,nome,endereco)').eq('entregador_id',U.id).in('status',['entregue']).gte('created_at',inicio).lte('created_at',fim).order('created_at',{ascending:false});
  if(!data||!data.length){el.innerHTML='<p style="color:#999;text-align:center;padding:20px">Nenhuma entrega no per√≠odo.</p>';return;}
  const tot=data.reduce((s,e)=>s+parseFloat(e.valor_corrida||e.valor_entregador||0),0);
  // Label din√¢mico para meses passados
  let labelPer='';
  if(per==='mes'&&_gnhMesOffset<0){
    const agora=new Date();
    const alvo=new Date(agora.getFullYear(),agora.getMonth()+_gnhMesOffset,1);
    labelPer=alvo.toLocaleString('pt-BR',{month:'long',year:'numeric'});
    labelPer=labelPer.charAt(0).toUpperCase()+labelPer.slice(1);
  }else{
    const labels={hoje:'Hoje',ontem:'Ontem',semana:'Esta Semana',mes:'Este M√™s'};
    labelPer=labels[per]||per;
  }
  el.innerHTML=`
    <div style="background:#e8f5e9;padding:12px;border-radius:11px;text-align:center;margin-bottom:12px;border:2px solid #00C9A7;">
      <p style="font-size:11px;color:#666;">${labelPer} ‚Äî ${data.length} entrega(s)</p>
      <p style="font-size:28px;font-weight:800;color:#2e7d32;">${fR(tot)}</p>
    </div>
    <p style="font-size:12px;font-weight:700;color:#444;margin-bottom:6px;">üìã Detalhes das corridas:</p>
    ${data.map((e,i)=>{
      const hr=e.entregue_at?new Date(e.entregue_at).toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'}):'--:--';
      const nomeLoja=e.l?e.l.nome_loja||e.l.nome:'Loja';
      const endRetirada=e.l&&e.l.endereco?e.l.endereco:'Endere√ßo da loja';
      return `<div style="padding:10px;border-bottom:1px solid #f0f0f0;background:white;border-radius:8px;margin-bottom:5px;border:1px solid #eee;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;">
          <strong style="font-size:13px;">Corrida ${i+1}${e.numero_pedido?' ‚Äî #'+e.numero_pedido:''}</strong>
          <strong style="color:#2e7d32;font-size:14px;">${fR(e.valor_corrida||e.valor_entregador)}</strong>
        </div>
        <p style="font-size:11px;color:#666;margin:2px 0;">üïê Hor√°rio: <strong>${hr}</strong></p>
        <p style="font-size:11px;color:#666;margin:2px 0;">üè™ Loja: <strong>${nomeLoja}</strong></p>
        <p style="font-size:11px;color:#555;margin:2px 0;">üì§ Retirada: ${endRetirada}</p>
        <p style="font-size:11px;color:#555;margin:2px 0;">üìç Entrega: ${e.endereco_entrega||'-'}</p>
        ${e.distancia_km>0?`<p style="font-size:11px;color:#888;margin:2px 0;">üìè ${parseFloat(e.distancia_km).toFixed(1)} km</p>`:''}
        <span class="badge b-entregue" style="margin-top:4px;display:inline-block;">‚úÖ Entregue</span>
      </div>`;
    }).join('')}`;
}

async function abrirCfgEnt(){
  openM('cfg-ent');
  $('ent-nome2').value=U.nome||'';$('ent-tel2').value=U.telefone||'';$('ent-plc').value=U.placa_moto||'';$('ent-pix').value=U.chave_pix||'';$('ent-sen').value='';clearM('ent-cfg-msg');
}
async function salvarCfgEnt(){
  const d={nome:v('ent-nome2'),telefone:v('ent-tel2'),placa_moto:v('ent-plc'),chave_pix:v('ent-pix')};
  const ns=v('ent-sen');if(ns.length>=6)d.senha_hash=ns;
  const{error}=await db.from('usuarios').update(d).eq('id',U.id);
  if(error){showM('ent-cfg-msg','Erro: '+error.message);return;}
  U={...U,...d};salvarU();$('ent-nome').textContent=d.nome;showM('ent-cfg-msg','Salvo!',true);setTimeout(()=>closeM('cfg-ent'),1500);
}
</script>
</body>
</html>
